<!DOCTYPE html>
<html data-theme="light" data-rh="data-theme" style="" lang="zh"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Lex与YACC详解 - 知乎</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="renderer" content="webkit"><meta name="force-rendering" content="webkit"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="google-site-verification" content="FTeR0c8arOPKh8c5DYh_9uu98_zJbaWw53J-Sch9MTg"><meta data-rh="true" name="keywords" content="lex,词法分析,编译原理"><meta data-rh="true" name="description" content="一、简介只要你在Unix环境中写过程序，你必定会邂逅神秘的Lex&amp;amp;YACC，就如GNU/Linux用户所熟知的Flex&amp;amp;Bison，这里的Flex就是由Vern Paxon实现的一个Lex，Bison则是GNU版本的YACC。在此我们将统一称呼这些程…"><meta data-rh="true" property="og:title" content="Lex与YACC详解"><meta data-rh="true" property="og:url" content="https://zhuanlan.zhihu.com/p/143867739"><meta data-rh="true" property="og:description" content="一、简介只要你在Unix环境中写过程序，你必定会邂逅神秘的Lex&amp;amp;YACC，就如GNU/Linux用户所熟知的Flex&amp;amp;Bison，这里的Flex就是由Vern Paxon实现的一个Lex，Bison则是GNU版本的YACC。在此我们将统一称呼这些程…"><meta data-rh="true" property="og:image" content=""><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="og:site_name" content="知乎专栏"><link data-rh="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-152.a53ae37b.png"><link data-rh="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-152.a53ae37b.png" sizes="152x152"><link data-rh="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-120.bbce8f18.png" sizes="120x120"><link data-rh="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-76.cbade8f9.png" sizes="76x76"><link data-rh="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-60.8f6c52aa.png" sizes="60x60"><link crossorigin="" rel="shortcut icon" type="image/x-icon" href="https://static.zhihu.com/heifetz/favicon.ico"><link crossorigin="" rel="search" type="application/opensearchdescription+xml" href="https://static.zhihu.com/heifetz/search.xml" title="知乎"><link rel="dns-prefetch" href="https://static.zhimg.com/"><link rel="dns-prefetch" href="https://pica.zhimg.com/"><link rel="dns-prefetch" href="https://pic1.zhimg.com/"><link rel="dns-prefetch" href="https://pic2.zhimg.com/"><link rel="dns-prefetch" href="https://pic3.zhimg.com/"><link rel="dns-prefetch" href="https://pic4.zhimg.com/"><link rel="dns-prefetch" href="https://static.zhihu.com/"><style data-emotion-css="1m4merm">.u-safeAreaInset-top{height:constant(safe-area-inset-top) !important;height:env(safe-area-inset-top) !important;}.u-safeAreaInset-bottom{height:constant(safe-area-inset-bottom) !important;height:env(safe-area-inset-bottom) !important;}</style><link href="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/column_003.css" crossorigin="" rel="stylesheet"><script nonce="">!function(){"use strict";!function(e,n){var r=[];function t(e){return function(){r.push([e,arguments])}}n.Raven={captureException:t("captureException"),captureMessage:t("captureMessage"),captureBreadcrumb:t("captureBreadcrumb")};var a,o,c,i,s,u="undefined"!=typeof DOMError;function d(e){var n=e instanceof Error||e instanceof ErrorEvent||u&&e instanceof DOMError||e instanceof DOMException;Raven.captureException(n?e:new Error(e.message||e.reason))}n.addEventListener("unhandledrejection",d),n.addEventListener("error",d,!0),a=e.src,o=e,c=function(){r.forEach(function(e){var n;(n=Raven)[e[0]].apply(n,e[1])}),n.removeEventListener("unhandledrejection",d),n.removeEventListener("error",d,!0)},i=document.head||document.getElementsByTagName("head")[0],(s=document.createElement("script")).crossOrigin=o.crossOrigin,s.dataset.sentryConfig=o["data-sentry-config"],s.onload=c,s.src=a,i.appendChild(s)}({"defer":true,"crossOrigin":"anonymous","src":"https://unpkg.zhimg.com/@cfe/sentry-script@1.3.1/dist/init.js","data-sentry-config":"{\"dsn\":\"https://2d8d764432cc4f6fb3bc78ab9528299d@crash2.zhihu.com/1224\",\"sampleRate\":0.1,\"release\":\"4037-c0a1ac44\",\"ignoreErrorNames\":[\"NetworkError\",\"SecurityError\"],\"ignoreErrorsPreset\":\"ReactApp\",\"tags\":{\"app_name\":\"heifetz\"}}"},window)}();
</script><script crossorigin="anonymous" data-sentry-config="{&quot;dsn&quot;:&quot;https://2d8d764432cc4f6fb3bc78ab9528299d@crash2.zhihu.com/1224&quot;,&quot;sampleRate&quot;:0.1,&quot;release&quot;:&quot;4037-c0a1ac44&quot;,&quot;ignoreErrorNames&quot;:[&quot;NetworkError&quot;,&quot;SecurityError&quot;],&quot;ignoreErrorsPreset&quot;:&quot;ReactApp&quot;,&quot;tags&quot;:{&quot;app_name&quot;:&quot;heifetz&quot;}}" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/init.js"></script><style data-emotion-css="1l12z7y">.css-1l12z7y{box-shadow:0px 16px 32px rgba(0,0,0,0.04);}</style><style data-emotion-css="1hlrcxk">.css-1hlrcxk{-webkit-transition-property:fill;transition-property:fill;-webkit-transition-duration:0.25s;transition-duration:0.25s;-webkit-transition-timing-function:ease-in;transition-timing-function:ease-in;}</style><style data-emotion-css="1emujq8">.css-1emujq8{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;}.css-1emujq8:hover{color:#0066FF;}</style><style data-emotion-css="1ct7cfw">.css-1ct7cfw{box-sizing:border-box;margin:0;min-width:0;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-right:20px;color:#8590A6;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;}.css-1ct7cfw:hover{color:#0066FF;}</style><style data-emotion-css="1v994a0">.css-1v994a0{margin-right:6px;}</style><style data-emotion-css="1cd9gw4">.css-1cd9gw4{margin-left:.3em;}</style><style data-emotion-css="1yuhvjn">.css-1yuhvjn{margin-top:16px;}</style><style data-emotion-css="3jt6os">.css-3jt6os .FileLinkCard{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:rgba(246,246,246,0.88);border-radius:12px;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:1em auto;max-width:100%;overflow:hidden;padding:12px;position:relative;width:390px;}.css-3jt6os .FileLinkCard-icon{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;height:30px;width:30px;}.css-3jt6os .FileLinkCard-info{margin-left:12px;}.css-3jt6os .FileLinkCard-name{color:#121212;font-size:15px;font-weight:500;line-height:21px;display:-webkit-box;text-overflow:ellipsis;overflow:hidden;-webkit-box-orient:vertical;-webkit-line-clamp:2;}.css-3jt6os .FileLinkCard-meta{color:#999999;font-size:12px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;line-height:14px;margin-top:5px;}.css-3jt6os .FileLinkCard-source{white-space:pre;}</style><style data-emotion-css="1wr1m8">.css-1wr1m8 .LinkCard.new{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;box-sizing:border-box;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:390px;min-height:84px;border-radius:8px;max-width:100%;overflow:hidden;margin:16px auto;padding:12px 12px 9px 12px;background-color:#F6F6F6;}.css-1wr1m8 .LinkCard.new,.css-1wr1m8 .LinkCard.new:hover{-webkit-text-decoration:none;text-decoration:none;border:none !important;color:inherit !important;}.css-1wr1m8 .LinkCard.new .LinkCard-contents{display:block;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;position:relative;}.css-1wr1m8 .LinkCard.new .LinkCard-contents .loading{height:14px;background:#EBEBEB;border-radius:7px;}.css-1wr1m8 .LinkCard.new .LinkCard-contents.withTitle{margin-bottom:3px;}.css-1wr1m8 .LinkCard.new .LinkCard-title{display:-webkit-box;font-size:15px;font-weight:500;line-height:1.4;margin-bottom:2px;color:#121212;text-overflow:ellipsis;overflow:hidden;-webkit-box-orient:vertical;-webkit-line-clamp:1;}.css-1wr1m8 .LinkCard.new .LinkCard-title.two-line{line-height:20px;display:-webkit-box;text-overflow:ellipsis;overflow:hidden;-webkit-box-orient:vertical;-webkit-line-clamp:2;}.css-1wr1m8 .LinkCard.new .LinkCard-title.loading{margin-bottom:8px;width:80%;}.css-1wr1m8 .LinkCard.new .LinkCard-title.loading.withTitle{margin-bottom:6px;}.css-1wr1m8 .LinkCard.new .LinkCard-title.loadingTitle{margin-bottom:5px;}.css-1wr1m8 .LinkCard.new .LinkCard-excerpt{display:-webkit-box;text-overflow:ellipsis;font-size:13px;line-height:18px;color:#999999;margin-bottom:4px;overflow:hidden;-webkit-box-orient:vertical;-webkit-line-clamp:1;}.css-1wr1m8 .LinkCard.new .LinkCard-excerpt .LinkCard-author{color:#444444;}.css-1wr1m8 .LinkCard.new .LinkCard-desc{display:-webkit-box;font-size:13px;height:18px;line-height:18px;color:#999999;word-break:break-all;text-overflow:ellipsis;overflow:hidden;-webkit-box-orient:vertical;-webkit-line-clamp:1;}.css-1wr1m8 .LinkCard.new .LinkCard-desc .LinkCard-tag,.css-1wr1m8 .LinkCard.new .LinkCard-desc .tag{display:inline-block;font-size:11px;margin-left:8px;padding:0 4px;border-radius:3px;background:rgba(211,211,211,0.3);}.css-1wr1m8 .LinkCard.new .LinkCard-desc.loading{width:40%;}.css-1wr1m8 .LinkCard.new .LinkCard-desc svg{margin-right:2px;}.css-1wr1m8 .LinkCard.new .LinkCard-image{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;background-color:#EBEBEB;background-size:cover;background-position:center;position:relative;display:block;width:60px;height:60px;margin-left:20px;object-fit:cover;border-radius:inherit;overflow:hidden;}.css-1wr1m8 .LinkCard.new .LinkCard-image.LinkCard-image--default{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;background-color:#EBEBEB;color:#D3D3D3;}.css-1wr1m8 .LinkCard.new .LinkCard-image.LinkCard-image--default svg{color:#999999;}.css-1wr1m8 .LinkCard.new .LinkCard-image img{width:100%;height:100%;object-fit:cover;}.css-1wr1m8 .LinkCard.new .LinkCard-image .LinkCard-image--video{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;position:absolute;top:50%;left:50%;-webkit-transform:translateX(-50%) translateY(-50%);-ms-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);width:24px;height:24px;border-radius:12px;background:rgba(255,255,255,0.9);pointer-events:none;}.css-1wr1m8 .LinkCard.new .LinkCard-image .LinkCard-image--video svg{color:#444444;}.css-1wr1m8 .LinkCard.new .LinkCard-richText .text{color:#444444;}.css-1wr1m8 .LinkCard.new .LinkCard-richText .bold{font-weight:600;}.css-1wr1m8 .LinkCard.new .LinkCard-richText .tag{margin-left:4px;}.css-1wr1m8 .LinkCard.old{position:relative;display:block;margin:1em auto;width:390px;box-sizing:border-box;border-radius:12px;max-width:100%;overflow:hidden;}.css-1wr1m8 .LinkCard.old,.css-1wr1m8 .LinkCard.old:hover{-webkit-text-decoration:none;text-decoration:none;border:none !important;color:inherit !important;}.css-1wr1m8 .LinkCard-ecommerceLoadingCard{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding:12px;border-radius:inherit;height:80px;box-sizing:border-box;background:rgba(246,246,246,0.88);color:#D3D3D3;}.css-1wr1m8 .LinkCard-ecommerceLoadingCardAvatarWrapper{width:60px;height:60px;background:#EBEBEB;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;border-radius:6px;margin-right:10px;}.css-1wr1m8 .LinkCard-ecommerceLoadingCardNetwork{width:20px;height:20px;}.css-1wr1m8 .LinkCard-ecommerceLoadingCardLoadingbar{height:60px;-webkit-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.css-1wr1m8 .LinkCard-ecommerceLoadingCardLoadingbar span{height:16px;display:inline-block;background:#EBEBEB;}.css-1wr1m8 .LinkCard-ecommerceLoadingCardLoadingbar span:nth-of-type(1){width:60px;margin-bottom:4px;}.css-1wr1m8 .LinkCard-ecommerceLoadingCardLoadingbar span:nth-of-type(2){width:127px;}</style><style data-emotion-css="hypxot">.css-hypxot .LinkCard.old{position:relative;display:block;margin:1em auto;width:390px;box-sizing:border-box;border-radius:12px;max-width:100%;overflow:hidden;}.css-hypxot .LinkCard.old,.css-hypxot .LinkCard.old:hover{-webkit-text-decoration:none;text-decoration:none;border:none !important;color:inherit !important;}.css-hypxot .LinkCard-ecommerceLoadingCard{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding:12px;border-radius:inherit;height:80px;box-sizing:border-box;background:rgba(246,246,246,0.88);color:#D3D3D3;}.css-hypxot .LinkCard-ecommerceLoadingCardAvatarWrapper{width:60px;height:60px;background:#EBEBEB;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;border-radius:6px;margin-right:10px;}.css-hypxot .LinkCard-ecommerceLoadingCardNetwork{width:20px;height:20px;}.css-hypxot .LinkCard-ecommerceLoadingCardLoadingbar{height:60px;-webkit-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.css-hypxot .LinkCard-ecommerceLoadingCardLoadingbar span{height:16px;display:inline-block;background:#EBEBEB;}.css-hypxot .LinkCard-ecommerceLoadingCardLoadingbar span:nth-of-type(1){width:60px;margin-bottom:4px;}.css-hypxot .LinkCard-ecommerceLoadingCardLoadingbar span:nth-of-type(2){width:127px;}.css-hypxot .LinkCard.new{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;box-sizing:border-box;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:390px;min-height:84px;border-radius:8px;max-width:100%;overflow:hidden;margin:16px auto;padding:12px 12px 9px 12px;background-color:#F6F6F6;}.css-hypxot .LinkCard.new,.css-hypxot .LinkCard.new:hover{-webkit-text-decoration:none;text-decoration:none;border:none !important;color:inherit !important;}.css-hypxot .LinkCard.new .LinkCard-contents{display:block;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;position:relative;}.css-hypxot .LinkCard.new .LinkCard-contents .loading{height:14px;background:#EBEBEB;border-radius:7px;}.css-hypxot .LinkCard.new .LinkCard-contents.withTitle{margin-bottom:3px;}.css-hypxot .LinkCard.new .LinkCard-title{display:-webkit-box;font-size:15px;font-weight:500;line-height:1.4;margin-bottom:2px;color:#121212;text-overflow:ellipsis;overflow:hidden;-webkit-box-orient:vertical;-webkit-line-clamp:1;}.css-hypxot .LinkCard.new .LinkCard-title.two-line{line-height:20px;display:-webkit-box;text-overflow:ellipsis;overflow:hidden;-webkit-box-orient:vertical;-webkit-line-clamp:2;}.css-hypxot .LinkCard.new .LinkCard-title.loading{margin-bottom:8px;width:80%;}.css-hypxot .LinkCard.new .LinkCard-title.loading.withTitle{margin-bottom:6px;}.css-hypxot .LinkCard.new .LinkCard-title.loadingTitle{margin-bottom:5px;}.css-hypxot .LinkCard.new .LinkCard-excerpt{display:-webkit-box;text-overflow:ellipsis;font-size:13px;line-height:18px;color:#999999;margin-bottom:4px;overflow:hidden;-webkit-box-orient:vertical;-webkit-line-clamp:1;}.css-hypxot .LinkCard.new .LinkCard-excerpt .LinkCard-author{color:#444444;}.css-hypxot .LinkCard.new .LinkCard-desc{display:-webkit-box;font-size:13px;height:18px;line-height:18px;color:#999999;word-break:break-all;text-overflow:ellipsis;overflow:hidden;-webkit-box-orient:vertical;-webkit-line-clamp:1;}.css-hypxot .LinkCard.new .LinkCard-desc .LinkCard-tag,.css-hypxot .LinkCard.new .LinkCard-desc .tag{display:inline-block;font-size:11px;margin-left:8px;padding:0 4px;border-radius:3px;background:rgba(211,211,211,0.3);}.css-hypxot .LinkCard.new .LinkCard-desc.loading{width:40%;}.css-hypxot .LinkCard.new .LinkCard-desc svg{margin-right:2px;}.css-hypxot .LinkCard.new .LinkCard-image{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;background-color:#EBEBEB;background-size:cover;background-position:center;position:relative;display:block;width:60px;height:60px;margin-left:20px;object-fit:cover;border-radius:inherit;overflow:hidden;}.css-hypxot .LinkCard.new .LinkCard-image.LinkCard-image--default{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;background-color:#EBEBEB;color:#D3D3D3;}.css-hypxot .LinkCard.new .LinkCard-image.LinkCard-image--default svg{color:#999999;}.css-hypxot .LinkCard.new .LinkCard-image img{width:100%;height:100%;object-fit:cover;}.css-hypxot .LinkCard.new .LinkCard-image .LinkCard-image--video{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;position:absolute;top:50%;left:50%;-webkit-transform:translateX(-50%) translateY(-50%);-ms-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);width:24px;height:24px;border-radius:12px;background:rgba(255,255,255,0.9);pointer-events:none;}.css-hypxot .LinkCard.new .LinkCard-image .LinkCard-image--video svg{color:#444444;}.css-hypxot .LinkCard.new .LinkCard-richText .text{color:#444444;}.css-hypxot .LinkCard.new .LinkCard-richText .bold{font-weight:600;}.css-hypxot .LinkCard.new .LinkCard-richText .tag{margin-left:4px;}.css-hypxot .FileLinkCard{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:rgba(246,246,246,0.88);border-radius:12px;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:1em auto;max-width:100%;overflow:hidden;padding:12px;position:relative;width:390px;}.css-hypxot .FileLinkCard-icon{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;height:30px;width:30px;}.css-hypxot .FileLinkCard-info{margin-left:12px;}.css-hypxot .FileLinkCard-name{color:#121212;font-size:15px;font-weight:500;line-height:21px;display:-webkit-box;text-overflow:ellipsis;overflow:hidden;-webkit-box-orient:vertical;-webkit-line-clamp:2;}.css-hypxot .FileLinkCard-meta{color:#999999;font-size:12px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;line-height:14px;margin-top:5px;}.css-hypxot .FileLinkCard-source{white-space:pre;}</style><style data-emotion-css="14bz7qe animation-1sh55c5">.css-14bz7qe{word-break:break-word;line-height:1.6;}.css-14bz7qe a.UserLink-link{color:#175199;}.css-14bz7qe a.UserLink-link:hover{border-bottom:1px solid #175199;}.css-14bz7qe lazy[data-lazy-status]{background-color:#F6F6F6;}.css-14bz7qe lazy[data-lazy-status="ok"]{background-color:transparent;-webkit-animation:animation-1sh55c5 0.5s ease-in;animation:animation-1sh55c5 0.5s ease-in;}.css-14bz7qe > [data-first-child]{margin-top:0;}.css-14bz7qe > :last-child{margin-bottom:0;}.css-14bz7qe h1,.css-14bz7qe h2{clear:left;margin-top:calc((1.4em * 2) / 1.2);margin-bottom:calc(1.4em / 1.2);font-size:1.2em;line-height:1.5;font-weight:600;}.css-14bz7qe h3,.css-14bz7qe h4,.css-14bz7qe h5,.css-14bz7qe h6{clear:left;margin-top:calc((1.4em * 1.5) / 1.1);margin-bottom:calc(1.4em / 1.1);font-size:1.1em;line-height:1.5;font-weight:600;}.css-14bz7qe u{-webkit-text-decoration:none;text-decoration:none;border-bottom:1px dashed #808080;}.css-14bz7qe b{font-weight:600;}.css-14bz7qe sup{font-size:0.8em;}.css-14bz7qe sup[data-draft-type='reference']{color:#175199;}.css-14bz7qe a:focus{outline:none;-webkit-transition:box-shadow 0.3s;transition:box-shadow 0.3s;}html[data-focus-visible] .css-14bz7qe a:focus{box-shadow:0 0 0 2px #FFFFFF,0 0 0 4px rgba(0,102,255,0.3);}.css-14bz7qe a.ztext-link,.css-14bz7qe a.internal,.css-14bz7qe a.external{-webkit-text-decoration:none;text-decoration:none;cursor:pointer;border-bottom:1px solid #808080;}.css-14bz7qe a.ztext-link:hover,.css-14bz7qe a.internal:hover,.css-14bz7qe a.external:hover{color:#175199;border-bottom:1px solid #175199;}.css-14bz7qe a.ztext-link > .ellipsis::after,.css-14bz7qe a.internal > .ellipsis::after,.css-14bz7qe a.external > .ellipsis::after{content:'...';}.css-14bz7qe a.ztext-link > .invisible,.css-14bz7qe a.internal > .invisible,.css-14bz7qe a.external > .invisible{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;}.css-14bz7qe a.ztext-link u,.css-14bz7qe a.internal u,.css-14bz7qe a.external u{border:none;}.css-14bz7qe a.member_mention{color:#175199;}.css-14bz7qe a.member_mention:hover{border-bottom:1px solid #175199;}.css-14bz7qe p{margin:1.4em 0;}.css-14bz7qe p.ztext-empty-paragraph{margin:calc((2.8em- (1.4em * 2 + 1.6em)) / 2) 0;}.css-14bz7qe p.ztext-empty-paragraph + .ztext-empty-paragraph{margin:1.4em 0;}.css-14bz7qe hr{margin:4em auto;width:240px;max-width:100%;border:none;border-top:1px solid #D3D3D3;}.css-14bz7qe img[eeimg]{max-width:100%;vertical-align:middle;}.css-14bz7qe img[eeimg="1"]{margin:0 3px;display:inline-block;}.css-14bz7qe img[eeimg="2"]{margin:1.4em 0;display:block;}.css-14bz7qe blockquote{margin:1.4em 0;padding-left:1em;color:#646464;border-left:3px solid #D3D3D3;}.css-14bz7qe ol,.css-14bz7qe ul{margin:1.4em 0;padding:0;}.css-14bz7qe ol ol,.css-14bz7qe ul ol,.css-14bz7qe ol ul,.css-14bz7qe ul ul{margin:0;}.css-14bz7qe ol > ol,.css-14bz7qe ul > ol,.css-14bz7qe ol > ul,.css-14bz7qe ul > ul{display:table-row;}.css-14bz7qe ol > ol::before,.css-14bz7qe ul > ol::before,.css-14bz7qe ol > ul::before,.css-14bz7qe ul > ul::before{display:table-cell;content:'';}.css-14bz7qe ul{display:table;}.css-14bz7qe ul>li{display:table-row;list-style:none;}.css-14bz7qe ul>li::before{display:table-cell;content:'•  ';white-space:pre;}.css-14bz7qe ol{display:table;counter-reset:ol;}.css-14bz7qe ol > li{display:table-row;list-style:none;}.css-14bz7qe ol > li::before{display:table-cell;text-align:right;counter-increment:ol;content:counter(ol) '. ';white-space:pre;}.css-14bz7qe ol ol{counter-reset:ol2;}.css-14bz7qe ol ol li::before{counter-increment:ol2;content:counter(ol2) '. ';}.css-14bz7qe ol ol ol{counter-reset:ol3;}.css-14bz7qe ol ol ol li::before{counter-increment:ol3;content:counter(ol3) '. ';}.css-14bz7qe ol ol ol ol{counter-reset:ol4;}.css-14bz7qe ol ol ol ol li::before{counter-increment:ol4;content:counter(ol4) '. ';}.css-14bz7qe figure{margin:1.4em 0;}.css-14bz7qe figure .content_image,.css-14bz7qe figure .origin_image{margin:0 auto;}.css-14bz7qe figure figcaption{margin-top:calc(0.6em / 0.9);padding:0 1em;font-size:0.9em;line-height:1.5;text-align:center;color:#999999;}.css-14bz7qe figure + figure{margin-top:calc(1.4em * 1.6);}.css-14bz7qe figure[data-size='small'],.css-14bz7qe figure:not([data-size]) > [data-size='small']{clear:both;}.css-14bz7qe figure[data-size='left'],.css-14bz7qe figure:not([data-size]) > [data-size='left']{float:left;margin:0 20px 20px 0;max-width:33%;}.css-14bz7qe figure[data-size='right'],.css-14bz7qe figure:not([data-size]) > [data-size='right']{float:right;margin:0 0 20px 20px;max-width:33%;}.css-14bz7qe figure[data-size='collapse']{margin-bottom:0;}.css-14bz7qe figure[data-size='collapse'] + figure{margin-top:0;}.css-14bz7qe .content_image,.css-14bz7qe .origin_image{display:block;max-width:100%;margin:1.4em auto;}.css-14bz7qe .content_image[data-size='small'],.css-14bz7qe .origin_image[data-size='small']{max-width:40%;}.css-14bz7qe .content_image.zh-lightbox-thumb,.css-14bz7qe .origin_image.zh-lightbox-thumb{cursor:-webkit-zoom-in;cursor:-moz-zoom-in;cursor:zoom-in;}.css-14bz7qe code{margin:0 2px;padding:3px 4px;border-radius:3px;font-size:0.9em;background-color:#F6F6F6;}.css-14bz7qe pre{margin:1.4em 0;padding:calc(0.8em / 0.9);font-size:0.9em;word-break:initial;word-wrap:initial;white-space:pre;overflow:auto;-webkit-overflow-scrolling:touch;background:#F6F6F6;border-radius:4px;}.css-14bz7qe pre code{margin:0;padding:0;font-size:inherit;border-radius:0;background-color:inherit;}.css-14bz7qe li pre{white-space:pre-wrap;}.css-14bz7qe table[data-draft-type='table']{border-collapse:collapse;font-size:15px;margin:1.4em auto;max-width:100%;table-layout:fixed;text-align:left;width:100%;}.css-14bz7qe table[data-draft-type='table'][data-size='small']{min-width:260px;width:40%;}.css-14bz7qe table[data-draft-type='table'][data-row-style='striped'] tr:nth-of-type(2n + 1){background:#F6F6F6;}.css-14bz7qe table[data-draft-type='table'] td,.css-14bz7qe table[data-draft-type='table'] th{border:1px solid #D3D3D3;line-height:24px;height:24px;padding:3px 12px;}.css-14bz7qe table[data-draft-type='table'] th{background:#EBEBEB;color:#121212;font-weight:500;}.css-14bz7qe .video-box,.css-14bz7qe .link-box{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;margin:1.4em 0;overflow:auto;white-space:normal;cursor:pointer;border:solid 1px #EBEBEB;border-radius:4px;}.css-14bz7qe .highlight{margin:1em 0;}.css-14bz7qe .highlight pre{margin:0;}.css-14bz7qe .highlight .hll{background-color:#FDFDFD;}.css-14bz7qe .highlight .c{font-style:italic;color:#999999;}.css-14bz7qe .highlight .err{color:#F1403C;}.css-14bz7qe .highlight .k{font-weight:600;}.css-14bz7qe .highlight .o{font-weight:600;}.css-14bz7qe .highlight .cm{font-style:italic;color:#999999;}.css-14bz7qe .highlight .cp{font-weight:600;color:#999999;}.css-14bz7qe .highlight .c1{font-style:italic;color:#999999;}.css-14bz7qe .highlight .cs{font-style:italic;font-weight:600;color:#999999;}.css-14bz7qe .highlight .gd{color:#FF3366;}.css-14bz7qe .highlight .ge{font-style:italic;}.css-14bz7qe .highlight .gr{color:#F1403C;}.css-14bz7qe .highlight .gh{color:#999999;}.css-14bz7qe .highlight .gi{color:#12b370;}.css-14bz7qe .highlight .go{color:#808080;}.css-14bz7qe .highlight .gp{color:#646464;}.css-14bz7qe .highlight .gs{font-weight:600;}.css-14bz7qe .highlight .gu{color:#999999;}.css-14bz7qe .highlight .gt{color:#F1403C;}.css-14bz7qe .highlight .kc{font-weight:600;}.css-14bz7qe .highlight .kd{font-weight:600;}.css-14bz7qe .highlight .kn{font-weight:600;}.css-14bz7qe .highlight .kp{font-weight:600;}.css-14bz7qe .highlight .kr{font-weight:600;}.css-14bz7qe .highlight .kt{font-weight:600;color:#175199;}.css-14bz7qe .highlight .m{color:#0066FF;}.css-14bz7qe .highlight .s{color:#F1403C;}.css-14bz7qe .highlight .na{color:#0066FF;}.css-14bz7qe .highlight .nb{color:#0066FF;}.css-14bz7qe .highlight .nc{font-weight:600;color:#175199;}.css-14bz7qe .highlight .no{color:#0066FF;}.css-14bz7qe .highlight .ni{color:#5555DD;}.css-14bz7qe .highlight .ne{font-weight:600;color:#F1403C;}.css-14bz7qe .highlight .nf{font-weight:600;color:#F1403C;}.css-14bz7qe .highlight .nn{color:#646464;}.css-14bz7qe .highlight .nt{color:#175199;}.css-14bz7qe .highlight .nv{color:#0066FF;}.css-14bz7qe .highlight .ow{font-weight:600;}.css-14bz7qe .highlight .w{color:#BFBFBF;}.css-14bz7qe .highlight .mf{color:#0066FF;}.css-14bz7qe .highlight .mh{color:#0066FF;}.css-14bz7qe .highlight .mi{color:#0066FF;}.css-14bz7qe .highlight .mo{color:#0066FF;}.css-14bz7qe .highlight .sb{color:#F1403C;}.css-14bz7qe .highlight .sc{color:#F1403C;}.css-14bz7qe .highlight .sd{color:#F1403C;}.css-14bz7qe .highlight .s2{color:#F1403C;}.css-14bz7qe .highlight .se{color:#F1403C;}.css-14bz7qe .highlight .sh{color:#F1403C;}.css-14bz7qe .highlight .si{color:#F1403C;}.css-14bz7qe .highlight .sx{color:#F1403C;}.css-14bz7qe .highlight .sr{color:#A5542F;}.css-14bz7qe .highlight .s1{color:#F1403C;}.css-14bz7qe .highlight .ss{color:#F1403C;}.css-14bz7qe .highlight .bp{color:#999999;}.css-14bz7qe .highlight .vc{color:#0066FF;}.css-14bz7qe .highlight .vg{color:#0066FF;}.css-14bz7qe .highlight .vi{color:#0066FF;}.css-14bz7qe .highlight .il{color:#0066FF;}.css-14bz7qe .highlight::-webkit-scrollbar{width:6px;height:6px;}.css-14bz7qe .highlight::-webkit-scrollbar-thumb:horizontal{background-color:rgba(18,18,18,0.5);border-radius:6px;}.css-14bz7qe .highlight::-webkit-scrollbar-thumb:horizontal:hover{background-color:rgba(18,18,18,0.6);}.css-14bz7qe .LinkCard.old{position:relative;display:block;margin:1em auto;width:390px;box-sizing:border-box;border-radius:12px;max-width:100%;overflow:hidden;}.css-14bz7qe .LinkCard.old,.css-14bz7qe .LinkCard.old:hover{-webkit-text-decoration:none;text-decoration:none;border:none !important;color:inherit !important;}.css-14bz7qe .LinkCard-ecommerceLoadingCard{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding:12px;border-radius:inherit;height:80px;box-sizing:border-box;background:rgba(246,246,246,0.88);color:#D3D3D3;}.css-14bz7qe .LinkCard-ecommerceLoadingCardAvatarWrapper{width:60px;height:60px;background:#EBEBEB;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;border-radius:6px;margin-right:10px;}.css-14bz7qe .LinkCard-ecommerceLoadingCardNetwork{width:20px;height:20px;}.css-14bz7qe .LinkCard-ecommerceLoadingCardLoadingbar{height:60px;-webkit-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.css-14bz7qe .LinkCard-ecommerceLoadingCardLoadingbar span{height:16px;display:inline-block;background:#EBEBEB;}.css-14bz7qe .LinkCard-ecommerceLoadingCardLoadingbar span:nth-of-type(1){width:60px;margin-bottom:4px;}.css-14bz7qe .LinkCard-ecommerceLoadingCardLoadingbar span:nth-of-type(2){width:127px;}.css-14bz7qe .LinkCard.new{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;box-sizing:border-box;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:390px;min-height:84px;border-radius:8px;max-width:100%;overflow:hidden;margin:16px auto;padding:12px 12px 9px 12px;background-color:#F6F6F6;}.css-14bz7qe .LinkCard.new,.css-14bz7qe .LinkCard.new:hover{-webkit-text-decoration:none;text-decoration:none;border:none !important;color:inherit !important;}.css-14bz7qe .LinkCard.new .LinkCard-contents{display:block;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;position:relative;}.css-14bz7qe .LinkCard.new .LinkCard-contents .loading{height:14px;background:#EBEBEB;border-radius:7px;}.css-14bz7qe .LinkCard.new .LinkCard-contents.withTitle{margin-bottom:3px;}.css-14bz7qe .LinkCard.new .LinkCard-title{display:-webkit-box;font-size:15px;font-weight:500;line-height:1.4;margin-bottom:2px;color:#121212;text-overflow:ellipsis;overflow:hidden;-webkit-box-orient:vertical;-webkit-line-clamp:1;}.css-14bz7qe .LinkCard.new .LinkCard-title.two-line{line-height:20px;display:-webkit-box;text-overflow:ellipsis;overflow:hidden;-webkit-box-orient:vertical;-webkit-line-clamp:2;}.css-14bz7qe .LinkCard.new .LinkCard-title.loading{margin-bottom:8px;width:80%;}.css-14bz7qe .LinkCard.new .LinkCard-title.loading.withTitle{margin-bottom:6px;}.css-14bz7qe .LinkCard.new .LinkCard-title.loadingTitle{margin-bottom:5px;}.css-14bz7qe .LinkCard.new .LinkCard-excerpt{display:-webkit-box;text-overflow:ellipsis;font-size:13px;line-height:18px;color:#999999;margin-bottom:4px;overflow:hidden;-webkit-box-orient:vertical;-webkit-line-clamp:1;}.css-14bz7qe .LinkCard.new .LinkCard-excerpt .LinkCard-author{color:#444444;}.css-14bz7qe .LinkCard.new .LinkCard-desc{display:-webkit-box;font-size:13px;height:18px;line-height:18px;color:#999999;word-break:break-all;text-overflow:ellipsis;overflow:hidden;-webkit-box-orient:vertical;-webkit-line-clamp:1;}.css-14bz7qe .LinkCard.new .LinkCard-desc .LinkCard-tag,.css-14bz7qe .LinkCard.new .LinkCard-desc .tag{display:inline-block;font-size:11px;margin-left:8px;padding:0 4px;border-radius:3px;background:rgba(211,211,211,0.3);}.css-14bz7qe .LinkCard.new .LinkCard-desc.loading{width:40%;}.css-14bz7qe .LinkCard.new .LinkCard-desc svg{margin-right:2px;}.css-14bz7qe .LinkCard.new .LinkCard-image{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;background-color:#EBEBEB;background-size:cover;background-position:center;position:relative;display:block;width:60px;height:60px;margin-left:20px;object-fit:cover;border-radius:inherit;overflow:hidden;}.css-14bz7qe .LinkCard.new .LinkCard-image.LinkCard-image--default{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;background-color:#EBEBEB;color:#D3D3D3;}.css-14bz7qe .LinkCard.new .LinkCard-image.LinkCard-image--default svg{color:#999999;}.css-14bz7qe .LinkCard.new .LinkCard-image img{width:100%;height:100%;object-fit:cover;}.css-14bz7qe .LinkCard.new .LinkCard-image .LinkCard-image--video{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;position:absolute;top:50%;left:50%;-webkit-transform:translateX(-50%) translateY(-50%);-ms-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);width:24px;height:24px;border-radius:12px;background:rgba(255,255,255,0.9);pointer-events:none;}.css-14bz7qe .LinkCard.new .LinkCard-image .LinkCard-image--video svg{color:#444444;}.css-14bz7qe .LinkCard.new .LinkCard-richText .text{color:#444444;}.css-14bz7qe .LinkCard.new .LinkCard-richText .bold{font-weight:600;}.css-14bz7qe .LinkCard.new .LinkCard-richText .tag{margin-left:4px;}.css-14bz7qe .FileLinkCard{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:rgba(246,246,246,0.88);border-radius:12px;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:1em auto;max-width:100%;overflow:hidden;padding:12px;position:relative;width:390px;}.css-14bz7qe .FileLinkCard-icon{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;height:30px;width:30px;}.css-14bz7qe .FileLinkCard-info{margin-left:12px;}.css-14bz7qe .FileLinkCard-name{color:#121212;font-size:15px;font-weight:500;line-height:21px;display:-webkit-box;text-overflow:ellipsis;overflow:hidden;-webkit-box-orient:vertical;-webkit-line-clamp:2;}.css-14bz7qe .FileLinkCard-meta{color:#999999;font-size:12px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;line-height:14px;margin-top:5px;}.css-14bz7qe .FileLinkCard-source{white-space:pre;}@-webkit-keyframes animation-1sh55c5{from{opacity:0;}to{opacity:1;}}@keyframes animation-1sh55c5{from{opacity:0;}to{opacity:1;}}</style><style data-emotion-css="u1frr4">.css-u1frr4{width:724px;}.css-u1frr4 .Modal-content{margin:22px 0 5px;}.css-u1frr4 .Creator-QuestionShared-title{padding-right:65px;}</style><script charset="utf-8" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/column_015.js" crossorigin="anonymous"></script><script charset="utf-8" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/column_011.js" crossorigin="anonymous"></script><link rel="stylesheet" type="text/css" href="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/column_002.css" crossorigin="anonymous"><script charset="utf-8" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/column_018.js" crossorigin="anonymous"></script><link rel="stylesheet" type="text/css" href="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/column_005.css" crossorigin="anonymous"><script charset="utf-8" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/column_006.js" crossorigin="anonymous"></script><link rel="stylesheet" type="text/css" href="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/column_007.css" crossorigin="anonymous"><script charset="utf-8" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/column_009.js" crossorigin="anonymous"></script><script charset="utf-8" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/column_013.js" crossorigin="anonymous"></script><link rel="stylesheet" type="text/css" href="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/column_004.css" crossorigin="anonymous"><script charset="utf-8" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/column_017.js" crossorigin="anonymous"></script><link rel="stylesheet" type="text/css" href="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/column_008.css" crossorigin="anonymous"><script charset="utf-8" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/column_012.js" crossorigin="anonymous"></script><style data-emotion="css"></style><link rel="stylesheet" type="text/css" href="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/column.css" crossorigin="anonymous"><script charset="utf-8" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/column_014.js" crossorigin="anonymous"></script><script charset="utf-8" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/column_004.js" crossorigin="anonymous"></script><script charset="utf-8" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/column_008.js" crossorigin="anonymous"></script><script charset="utf-8" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/column_016.js" crossorigin="anonymous"></script><link rel="stylesheet" type="text/css" href="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/column_006.css" crossorigin="anonymous"><script charset="utf-8" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/column_002.js" crossorigin="anonymous"></script><script type="text/javascript" charset="UTF-8" async="" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/plugins.js"></script><script type="text/javascript" charset="UTF-8" async="" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/tool.js"></script><script type="text/javascript" charset="UTF-8" async="" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/core.js"></script><script type="text/javascript" charset="UTF-8" async="" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/light.js"></script><style type="text/css">.yidun.yidun--light.yidun--error.yidun--icon_point .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--error.yidun--inference .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--error.yidun--maxerror .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--error.yidun--point .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--error.yidun--sms .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--error.yidun--space .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--error.yidun--voice .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--error.yidun--word_order .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--icon_point.yidun--button .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--inference.yidun--button .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--point.yidun--button .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--space.yidun--button .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--success.yidun--icon_point .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--success.yidun--inference .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--success.yidun--point .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--success.yidun--sms .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--success.yidun--space .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--success.yidun--voice .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--success.yidun--word_order .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--word_order.yidun--button .yidun_tips .yidun_tips__icon,.yidun.yidun--light .yidun_loadbox .yidun_loadbox__inner,.yidun.yidun--light .yidun_loadbox .yidun_loadbox__inner .yidun_loadicon,.yidun.yidun--light .yidun_tips__answer,.yidun.yidun--light .yidun_tips__before,.yidun.yidun--light .yidun_tips__content,.yidun_intellisense--light .yidun_classic-tips .yidun_tips__icon,.yidun_intellisense--light .yidun_intelli-icon,.yidun_popup.yidun_popup--light .yidun_modal,.yidun_popup.yidun_popup--light .yidun_modal__before,.yidun_popup.yidun_popup--light .yidun_modal__sibling,.yidun_popup.yidun_popup--light .yidun_modal__title{display:inline-block;*display:inline;zoom:1;vertical-align:top}.yidun,.yidun_pop{-webkit-tap-highlight-color:transparent}.yidun *,.yidun_pop *{box-sizing:border-box}.yidun :focus-visible,.yidun_pop :focus-visible{outline:2px solid #4997fd}.panel_ease_top-enter,.panel_ease_top-leave-active{opacity:0;transform:translateY(20px)}.panel_ease_bottom-enter,.panel_ease_bottom-leave-active{opacity:0;transform:translateY(-20px)}.panel_ease_bottom-enter-active,.panel_ease_bottom-leave-active,.panel_ease_top-enter-active,.panel_ease_top-leave-active{transition:all .2s linear;pointer-events:none}.popup_scale-enter,.popup_scale-leave-active{opacity:0;transform:scale(0)}.popup_scale-enter-active{transition:all .3s cubic-bezier(.76,.01,.35,1.56)}.popup_scale-leave-active{transition:all .2s ease-out}.popup_ease-enter{opacity:0;transform:translateY(-20px)}.popup_ease-enter-active{transition:opacity .3s linear,transform .3s linear}.popup_ease-leave-active{opacity:0;transform:translateY(-20px);transition:all .2s ease-out}@keyframes loading{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes ball-scale-multiple{0%{transform:scale(.22);opacity:0}5%{opacity:1}to{transform:scale(1);opacity:0}}@keyframes bright{0%{opacity:.5}to{opacity:1}}.yidun_cover-frame{position:absolute;top:0;left:0;width:100%;height:100%;border:0;opacity:0;filter:alpha(opacity=0)}.yidun.yidun--light{position:relative;margin:auto;font-size:14px;-ms-touch-action:none;touch-action:none}.yidun.yidun--light img{pointer-events:none}.yidun.yidun--light .yidun_jigsaw,.yidun.yidun--light .yidun_slide_indicator,.yidun.yidun--light .yidun_slider{display:none}.yidun.yidun--light.yidun--jigsaw .yidun_jigsaw,.yidun.yidun--light.yidun--jigsaw .yidun_slide_indicator,.yidun.yidun--light.yidun--jigsaw .yidun_slider{display:block}.yidun.yidun--light.yidun--jigsaw .yidun_tips__content{width:100%}.yidun.yidun--light.yidun--jigsaw .yidun_tips{padding-left:40px}.yidun.yidun--light .yidun_jigsaw{position:absolute;left:0;top:0;width:auto;height:100%;-webkit-transform:translateZ(0);-webkit-perspective:1000;-webkit-backface-visibility:hidden;pointer-events:auto}.yidun.yidun--light .yidun_icon-point{position:absolute;width:26px;height:33px;cursor:pointer;background-repeat:no-repeat}.yidun.yidun--light .yidun_icon-point.yidun_point-1{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -881px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun.yidun--light .yidun_icon-point.yidun_point-1{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -881px;background-size:32px 914px}}.yidun.yidun--light .yidun_icon-point.yidun_point-2{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -729px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun.yidun--light .yidun_icon-point.yidun_point-2{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -729px;background-size:32px 914px}}.yidun.yidun--light .yidun_icon-point.yidun_point-3{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -843px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun.yidun--light .yidun_icon-point.yidun_point-3{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -843px;background-size:32px 914px}}.yidun.yidun--light .yidun_icon-point.yidun_point-4{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -805px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun.yidun--light .yidun_icon-point.yidun_point-4{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -805px;background-size:32px 914px}}.yidun.yidun--light .yidun_icon-point.yidun_point-5{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -767px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun.yidun--light .yidun_icon-point.yidun_point-5{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -767px;background-size:32px 914px}}.yidun.yidun--light.yidun--space .yidun_icon-point{width:29px;height:29px;background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -378px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun.yidun--light.yidun--space .yidun_icon-point{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -378px;background-size:32px 914px}}.yidun.yidun--light.yidun--maxerror .yidun_icon-point{cursor:default}.yidun.yidun--light .yidun_inference{display:none;position:absolute;width:25%;height:50%;overflow:hidden;box-sizing:border-box;background-color:transparent}.yidun.yidun--light .yidun_inference .yidun_inference__border{display:block;position:absolute;top:0;left:0;bottom:0;right:0;z-index:1;border:1px solid #fff;box-sizing:border-box;background:transparent;border-radius:inherit;transition:border .2s ease-out 0s}.yidun.yidun--light .yidun_inference.yidun_inference--0,.yidun.yidun--light .yidun_inference.yidun_inference--0 .yidun_inference__img{top:0;left:0}.yidun.yidun--light .yidun_inference.yidun_inference--1{top:0;left:25%}.yidun.yidun--light .yidun_inference.yidun_inference--1 .yidun_inference__img{top:0;left:-100%}.yidun.yidun--light .yidun_inference.yidun_inference--2{top:0;left:50%}.yidun.yidun--light .yidun_inference.yidun_inference--2 .yidun_inference__img{top:0;left:-200%}.yidun.yidun--light .yidun_inference.yidun_inference--3{top:0;left:75%}.yidun.yidun--light .yidun_inference.yidun_inference--3 .yidun_inference__img{top:0;left:-300%}.yidun.yidun--light .yidun_inference.yidun_inference--4,.yidun.yidun--light .yidun_inference.yidun_inference--4 .yidun_inference__img{bottom:0;left:0}.yidun.yidun--light .yidun_inference.yidun_inference--5{bottom:0;left:25%}.yidun.yidun--light .yidun_inference.yidun_inference--5 .yidun_inference__img{bottom:0;left:-100%}.yidun.yidun--light .yidun_inference.yidun_inference--6{bottom:0;left:50%}.yidun.yidun--light .yidun_inference.yidun_inference--6 .yidun_inference__img{bottom:0;left:-200%}.yidun.yidun--light .yidun_inference.yidun_inference--7{bottom:0;left:75%}.yidun.yidun--light .yidun_inference.yidun_inference--7 .yidun_inference__img{bottom:0;left:-300%}.yidun.yidun--light .yidun_inference.yidun_inference--drag .yidun_inference__border,.yidun.yidun--light .yidun_inference.yidun_inference--swap .yidun_inference__border,.yidun.yidun--light .yidun_inference:hover .yidun_inference__border{border-color:#2c6eff;border-width:2px}.yidun.yidun--light .yidun_inference.yidun_inference--drag,.yidun.yidun--light .yidun_inference:hover{background-color:#fff}.yidun.yidun--light .yidun_inference.yidun_inference--drag .yidun_inference__img,.yidun.yidun--light .yidun_inference:hover .yidun_inference__img{opacity:.3;filter:alpha(opacity=30)}.yidun.yidun--light .yidun_inference:hover{cursor:pointer}.yidun.yidun--light .yidun_inference.yidun_inference--drag{z-index:1;box-shadow:0 2px 6px 30%}.yidun.yidun--light .yidun_inference.yidun_inference--origin .yidun_inference__border{background-color:#d8d8d8}.yidun.yidun--light .yidun_inference.yidun_inference--swap .yidun_inference__border{background:transparent}.yidun.yidun--light .yidun_inference__img{position:absolute;width:400%;height:200%;transition:opacity .2s ease-out}.yidun.yidun--light.yidun--inference .yidun_inference{display:block;background-color:#fff}.yidun.yidun--light.yidun--inference .yidun_bg-img{display:none}.yidun.yidun--light.yidun--float .yidun_panel{display:none;position:absolute;left:0;width:100%;z-index:999}.yidun.yidun--light .yidun_panel{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.yidun.yidun--light .yidun_panel-placeholder{pointer-events:auto;position:relative;padding-top:50%}.yidun.yidun--light .yidun_bgimg{pointer-events:auto;position:absolute;top:0;left:0;width:100%;height:100%}.yidun.yidun--light .yidun_bgimg .yidun_bg-img{vertical-align:top;width:100%}.yidun.yidun--light.yidun--icon_point .yidun_bgimg,.yidun.yidun--light.yidun--icon_point .yidun_panel-placeholder,.yidun.yidun--light.yidun--inference .yidun_bgimg,.yidun.yidun--light.yidun--inference .yidun_panel-placeholder,.yidun.yidun--light.yidun--point .yidun_bgimg,.yidun.yidun--light.yidun--point .yidun_panel-placeholder,.yidun.yidun--light.yidun--space .yidun_bgimg,.yidun.yidun--light.yidun--space .yidun_panel-placeholder,.yidun.yidun--light.yidun--word_order .yidun_bgimg,.yidun.yidun--light.yidun--word_order .yidun_panel-placeholder{overflow:hidden}.yidun.yidun--light .yidun_voice{display:none}.yidun.yidun--light.yidun--voice .yidun_voice{display:block;width:100%;height:100%;overflow:hidden;position:relative}.yidun.yidun--light.yidun--voice .yidun_top,.yidun.yidun--light.yidun--voice .yidun_top__audio{display:none}.yidun.yidun--light.yidun--voice .yidun_bgimg{background-color:#f8f9fb;border:1px solid #e6e7eb;padding:0 8px}.yidun.yidun--light.yidun--voice .yidun_bg-img,.yidun.yidun--light.yidun--voice .yidun_jigsaw{display:none}.yidun.yidun--light.yidun--voice .yidun_control{background-color:#e9edf3;border-color:#e9edf3;cursor:pointer}.yidun.yidun--light.yidun--voice .yidun_control[role=button] .yidun_tips{color:#45494c}.yidun.yidun--light .yidun_audio{height:40px;margin-bottom:24px;position:relative}.yidun.yidun--light .yidun_audio__wave{pointer-events:none;position:absolute;top:0;left:50%;transform:translateX(-50%);z-index:-1;white-space:nowrap;height:100%;line-height:40px;font-size:0}.yidun.yidun--light .yidun_wave__item{display:inline-block;width:4px;height:10px;border-radius:3px;position:relative;overflow:hidden;background-color:#dfe6f4;vertical-align:middle;margin:0 3px}.yidun.yidun--light .yidun_wave__item.yidun_wave__item-light .yidun_wave__inner{transform:translateX(0);transition:transform .35s linear}.yidun.yidun--light .yidun_wave__inner{position:absolute;top:0;left:0;width:4px;height:100%;border-radius:3px;transform:translateX(-4px);background-color:#1991fa}.yidun.yidun--light .yidun_wave-1{height:12px}.yidun.yidun--light .yidun_wave-2{height:18px}.yidun.yidun--light .yidun_wave-3{height:24px}.yidun.yidun--light .yidun_wave-4,.yidun.yidun--light .yidun_wave-5{height:30px}.yidun.yidun--light .yidun_wave-6{height:24px}.yidun.yidun--light .yidun_wave-7{height:18px}.yidun.yidun--light .yidun_wave-8{height:12px}.yidun.yidun--light .yidun_wave-9,.yidun.yidun--light .yidun_wave-10{height:6px}.yidun.yidun--light .yidun_wave-11{height:12px}.yidun.yidun--light .yidun_wave-12{height:18px}.yidun.yidun--light .yidun_wave-13{height:24px}.yidun.yidun--light .yidun_wave-14,.yidun.yidun--light .yidun_wave-15{height:30px}.yidun.yidun--light .yidun_wave-16{height:24px}.yidun.yidun--light .yidun_wave-17{height:18px}.yidun.yidun--light .yidun_wave-18{height:12px}.yidun.yidun--light .yidun_wave-19,.yidun.yidun--light .yidun_wave-20{height:6px}.yidun.yidun--light .yidun_wave-21{height:12px}.yidun.yidun--light .yidun_wave-22{height:18px}.yidun.yidun--light .yidun_wave-23{height:24px}.yidun.yidun--light .yidun_wave-24,.yidun.yidun--light .yidun_wave-25{height:30px}.yidun.yidun--light .yidun_wave-26{height:24px}.yidun.yidun--light .yidun_wave-27{height:18px}.yidun.yidun--light .yidun_wave-28{height:12px}.yidun.yidun--light .yidun_wave-29,.yidun.yidun--light .yidun_wave-30{height:6px}.yidun.yidun--light .yidun_audio__play,.yidun.yidun--light .yidun_audio__refresh{width:40px;height:40px;background-color:#0776f8;box-shadow:0 3px 16px rgba(73,103,180,.32);border:none;outline:none;font-size:0;vertical-align:middle;border-radius:50%;margin:0 16px}.yidun.yidun--light .yidun_audio__play:hover,.yidun.yidun--light .yidun_audio__refresh:hover{background-color:#1991fa;cursor:pointer}.yidun.yidun--light .yidun_audio__play:before,.yidun.yidun--light .yidun_audio__refresh:before{content:"";width:20px;height:20px;display:block;margin:auto}.yidun.yidun--light .yidun_audio__play:before{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -322px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun.yidun--light .yidun_audio__play:before{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -322px;background-size:32px 914px}}.yidun.yidun--light .yidun_audio__refresh:before{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -297px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun.yidun--light .yidun_audio__refresh:before{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -297px;background-size:32px 914px}}.yidun.yidun--light .yidun_audio__source,.yidun.yidun--light .yidun_audio__txt{display:none}.yidun.yidun--light .yidun_voice__inner{position:absolute;top:50%;width:100%;transform:translateY(-50%)}.yidun.yidun--light .yidun_voice__input{width:100%;height:32px;line-height:30px;font-size:14px;border:1px solid;border-radius:2px;-webkit-appearance:none;text-indent:4px;border-color:#e6e7eb;background-color:#fff;color:#44494a}.yidun.yidun--light .yidun_voice__input:-ms-input-placeholder{color:#c7c7c7}.yidun.yidun--light .yidun_voice__input::placeholder{color:#c7c7c7}.yidun.yidun--light .yidun_voice__input:focus{border-color:#4997fd}.yidun.yidun--light .yidun_voice__btns{text-align:left;margin-top:6px}.yidun.yidun--light .yidun_voice__back,.yidun.yidun--light .yidun_voice__refresh{color:#45494c}.yidun.yidun--light .yidun_voice__back:before,.yidun.yidun--light .yidun_voice__refresh:before{content:"";display:inline-block;width:20px;height:20px;background-repeat:no-repeat;background-position:50%;vertical-align:middle;margin-right:2px}.yidun.yidun--light .yidun_voice__back span,.yidun.yidun--light .yidun_voice__refresh span{vertical-align:middle}.yidun.yidun--light .yidun_voice__refresh:before{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -172px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun.yidun--light .yidun_voice__refresh:before{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -172px;background-size:32px 914px}}.yidun.yidun--light .yidun_voice__back,.yidun.yidun--light .yidun_voice__refresh{border:none;background:transparent;font-size:12px;line-height:20px;padding:0;cursor:pointer;vertical-align:middle}.yidun.yidun--light .yidun_voice__back{display:none}.yidun.yidun--light .yidun_voice__back:before{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -222px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun.yidun--light .yidun_voice__back:before{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -222px;background-size:32px 914px}}.yidun.yidun--light .yidun_voice__right{float:right}.yidun.yidun--light .yidun_loadbox{display:none;position:absolute;top:0;left:0;width:100%;height:100%;text-align:center;background-image:url("https://cstaticdun.126.net/2.17.4/images/tipBg.3417f33.png");background-color:#f7f9fa;background-position:50%;background-size:cover}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun.yidun--light .yidun_loadbox{background-image:url("https://cstaticdun.126.net/2.17.4/images/tipBg@2x.16fcb9a.png")}}.yidun.yidun--light .yidun_loadbox .yidun_loadbox__inner{position:relative;top:50%;margin-top:-25px}.yidun.yidun--light .yidun_loadbox .yidun_loadbox__inner .yidun_loadicon{width:32px;height:32px;background-repeat:no-repeat}.yidun.yidun--light .yidun_loadbox .yidun_loadbox__inner .yidun_loadtext{display:block;line-height:20px;color:#45494c}.yidun.yidun--light .yidun_top{position:absolute;right:0;top:0;max-width:98px;*max-width:68px;z-index:2;background-color:rgba(0,0,0,.12);*background-color:transparent;_background-color:transparent}.yidun.yidun--light .yidun_top:hover{background-color:rgba(0,0,0,.2);*background-color:transparent;_background-color:transparent}.yidun.yidun--light .yidun_top__right{float:right}.yidun.yidun--light .yidun_refresh,.yidun.yidun--light .yidun_top__audio{width:30px;height:30px;margin-left:4px;cursor:pointer;font-size:0;vertical-align:top;text-indent:-9999px;text-transform:capitalize;border:none;background-color:transparent}.yidun.yidun--light .yidun_refresh{float:left;background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -587px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun.yidun--light .yidun_refresh{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -587px;background-size:32px 914px}}.yidun.yidun--light .yidun_refresh:hover{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -482px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun.yidun--light .yidun_refresh:hover{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -482px;background-size:32px 914px}}.yidun.yidun--light .yidun_top__audio{float:right;background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -517px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun.yidun--light .yidun_top__audio{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -517px;background-size:32px 914px}}.yidun.yidun--light .yidun_top__audio:hover{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -552px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun.yidun--light .yidun_top__audio:hover{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -552px;background-size:32px 914px}}.yidun.yidun--light.yidun--maxerror .yidun_refresh{cursor:not-allowed}.yidun.yidun--light.yidun--maxerror .yidun_refresh:hover{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -587px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun.yidun--light.yidun--maxerror .yidun_refresh:hover{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -587px;background-size:32px 914px}}.yidun.yidun--light.yidun--maxerror .yidun_top__audio{cursor:not-allowed}.yidun.yidun--light.yidun--maxerror .yidun_top__audio:hover{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -517px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun.yidun--light.yidun--maxerror .yidun_top__audio:hover{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -517px;background-size:32px 914px}}.yidun.yidun--light .yidun_feedback{float:left;display:block;width:30px;height:30px;cursor:pointer;background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -347px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun.yidun--light .yidun_feedback{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -347px;background-size:32px 914px}}.yidun.yidun--light .yidun_feedback:hover{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -447px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun.yidun--light .yidun_feedback:hover{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -447px;background-size:32px 914px}}.yidun.yidun--light .yidun_feedback_txt{font-size:0;clip:rect(0,0,0,0);-webkit-clip-path:inset(0 0 99.9% 99.9%);clip-path:inset(0 0 99.9% 99.9%)}.yidun.yidun--light .yidun_control{position:relative;border:1px solid #e4e7eb;background-color:#f7f9fa}.yidun.yidun--light .yidun_control.yidun_control--moving .yidun_slide_indicator{border-color:#1991fa;background-color:#d1e9fe}.yidun.yidun--light .yidun_control.yidun_control--moving .yidun_slider{background-color:#1991fa}.yidun.yidun--light .yidun_control.yidun_control--moving .yidun_slider .yidun_slider__icon{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 0;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun.yidun--light .yidun_control.yidun_control--moving .yidun_slider .yidun_slider__icon{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 0;background-size:32px 914px}}.yidun.yidun--light .yidun_slide_indicator{position:absolute;top:-1px;left:-1px;width:0;border:1px solid transparent}.yidun.yidun--light .yidun_slider{position:absolute;top:0;left:0;height:100%;background-color:#fff;box-shadow:0 0 3px rgba(0,0,0,.3);cursor:pointer;transition:background .2s linear}.yidun.yidun--light .yidun_slider:hover{background-color:#1991fa}.yidun.yidun--light .yidun_slider:hover .yidun_slider__icon{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 0;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun.yidun--light .yidun_slider:hover .yidun_slider__icon{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 0;background-size:32px 914px}}.yidun.yidun--light .yidun_slider .yidun_slider__icon{position:absolute;top:50%;margin-top:-6px;left:50%;margin-left:-6px;width:14px;height:10px;background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -30px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun.yidun--light .yidun_slider .yidun_slider__icon{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -30px;background-size:32px 914px}}.yidun.yidun--light .yidun_slider img.yidun_slider__icon{width:100%;height:100%;top:0;left:0;margin:0;background-image:none!important}.yidun.yidun--light .yidun_tips{text-align:center;color:#45494c;height:100%;white-space:nowrap;font-size:0}.yidun.yidun--light .yidun_tips .yidun_sms-counter{color:#1991fa}.yidun.yidun--light .yidun_tips__before{height:100%;width:0;vertical-align:middle}.yidun.yidun--light .yidun_tips__content{display:inline-block;vertical-align:middle;white-space:normal;font-size:14px;line-height:18px}.yidun.yidun--light .yidun_tips__text{vertical-align:middle;word-break:break-word}.yidun.yidun--light .yidun_tips__answer{vertical-align:middle;font-weight:700}.yidun.yidun--light .yidun_tips__answer.hide{display:none}.yidun.yidun--light.yidun--point .yidun_tips__point{display:inline}.yidun.yidun--light.yidun--point .yidun_tips__img,.yidun.yidun--light.yidun--space .yidun_tips__answer,.yidun.yidun--light.yidun--space .yidun_tips__img,.yidun.yidun--light.yidun--space .yidun_tips__point,.yidun.yidun--light.yidun--word_order .yidun_tips__answer,.yidun.yidun--light.yidun--word_order .yidun_tips__img,.yidun.yidun--light.yidun--word_order .yidun_tips__point{display:none}.yidun.yidun--light.yidun--icon_point .yidun_tips__answer{width:80px;height:19px;margin-left:8px;overflow:hidden;position:relative}.yidun.yidun--light.yidun--icon_point .yidun_tips__point{display:none}.yidun.yidun--light.yidun--icon_point .yidun_tips__img{display:block;position:absolute;bottom:-60px;left:0;width:400%}.yidun.yidun--light.yidun--loadfail .yidun_bgimg,.yidun.yidun--light.yidun--loading .yidun_bgimg{display:none}.yidun.yidun--light.yidun--loadfail .yidun_loadbox,.yidun.yidun--light.yidun--loading .yidun_loadbox{display:block}.yidun.yidun--light.yidun--loadfail .yidun_slider,.yidun.yidun--light.yidun--loading .yidun_slider{cursor:not-allowed}.yidun.yidun--light.yidun--loadfail .yidun_slider:hover,.yidun.yidun--light.yidun--loading .yidun_slider:hover{background-color:#fff}.yidun.yidun--light.yidun--loadfail .yidun_slider:hover .yidun_slider__icon,.yidun.yidun--light.yidun--loading .yidun_slider:hover .yidun_slider__icon{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -30px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun.yidun--light.yidun--loadfail .yidun_slider:hover .yidun_slider__icon,.yidun.yidun--light.yidun--loading .yidun_slider:hover .yidun_slider__icon{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -30px;background-size:32px 914px}}.yidun.yidun--light.yidun--loadfail .yidun_top,.yidun.yidun--light.yidun--loading .yidun_top{display:block}.yidun.yidun--light.yidun--loadfail .yidun_control,.yidun.yidun--light.yidun--loading .yidun_control{border-color:#e4e7eb;background-color:#f7f9fa}.yidun.yidun--light.yidun--loading .yidun_loadicon{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -692px;background-size:32px 914px;animation:loading .8s linear infinite}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun.yidun--light.yidun--loading .yidun_loadicon{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -692px;background-size:32px 914px}}.yidun.yidun--light.yidun--loading .yidun_refresh,.yidun.yidun--light.yidun--loading .yidun_top__audio{cursor:not-allowed}.yidun.yidun--light.yidun--loading .yidun_control{border-color:#e4e7eb;background-color:#f7f9fa}.yidun.yidun--light.yidun--loadfail .yidun_loadicon{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -412px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun.yidun--light.yidun--loadfail .yidun_loadicon{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -412px;background-size:32px 914px}}.yidun.yidun--light.yidun--icon_point.yidun--button .yidun_control,.yidun.yidun--light.yidun--inference.yidun--button .yidun_control,.yidun.yidun--light.yidun--point.yidun--button .yidun_control,.yidun.yidun--light.yidun--space.yidun--button .yidun_control,.yidun.yidun--light.yidun--word_order.yidun--button .yidun_control{cursor:pointer;background:#f7f9fa;background:linear-gradient(180deg,#fff 0,#ebedf0 87%)}.yidun.yidun--light.yidun--icon_point.yidun--button .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--inference.yidun--button .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--point.yidun--button .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--space.yidun--button .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--word_order.yidun--button .yidun_tips .yidun_tips__icon{margin-right:8px;width:20px;height:20px;vertical-align:middle;background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -272px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun.yidun--light.yidun--icon_point.yidun--button .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--inference.yidun--button .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--point.yidun--button .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--space.yidun--button .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--word_order.yidun--button .yidun_tips .yidun_tips__icon{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -272px;background-size:32px 914px}}.yidun.yidun--light.yidun--icon_point.yidun--verifying .yidun_refresh,.yidun.yidun--light.yidun--icon_point.yidun--verifying .yidun_top__audio,.yidun.yidun--light.yidun--inference.yidun--verifying .yidun_refresh,.yidun.yidun--light.yidun--inference.yidun--verifying .yidun_top__audio,.yidun.yidun--light.yidun--jigsaw.yidun--verifying .yidun_refresh,.yidun.yidun--light.yidun--jigsaw.yidun--verifying .yidun_top__audio,.yidun.yidun--light.yidun--point.yidun--verifying .yidun_refresh,.yidun.yidun--light.yidun--point.yidun--verifying .yidun_top__audio,.yidun.yidun--light.yidun--word_icon.yidun--verifying .yidun_refresh,.yidun.yidun--light.yidun--word_icon.yidun--verifying .yidun_top__audio{cursor:not-allowed}.yidun.yidun--light.yidun--inference.yidun--verifying .yidun_inference--target .yidun_inference__img{animation:bright .6s ease-in .3s}.yidun.yidun--light.yidun--success .yidun_tips{color:#52ccba}.yidun.yidun--light.yidun--success .yidun_refresh,.yidun.yidun--light.yidun--success .yidun_top__audio{display:none}.yidun.yidun--light.yidun--success.yidun--jigsaw .yidun_control .yidun_slide_indicator{border-color:#52ccba;background-color:#d2f4ef}.yidun.yidun--light.yidun--success.yidun--jigsaw .yidun_control .yidun_slider{background-color:#52ccba}.yidun.yidun--light.yidun--success.yidun--jigsaw .yidun_control .yidun_slider .yidun_slider__icon{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -15px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun.yidun--light.yidun--success.yidun--jigsaw .yidun_control .yidun_slider .yidun_slider__icon{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -15px;background-size:32px 914px}}.yidun.yidun--light.yidun--success.yidun--icon_point .yidun_control,.yidun.yidun--light.yidun--success.yidun--inference .yidun_control,.yidun.yidun--light.yidun--success.yidun--point .yidun_control,.yidun.yidun--light.yidun--success.yidun--sms .yidun_control,.yidun.yidun--light.yidun--success.yidun--space .yidun_control,.yidun.yidun--light.yidun--success.yidun--voice .yidun_control,.yidun.yidun--light.yidun--success.yidun--word_order .yidun_control{border-color:#52ccba;background-color:#d2f4ef}.yidun.yidun--light.yidun--success.yidun--icon_point .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--success.yidun--inference .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--success.yidun--point .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--success.yidun--sms .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--success.yidun--space .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--success.yidun--voice .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--success.yidun--word_order .yidun_tips .yidun_tips__icon{margin-right:5px;width:17px;height:12px;vertical-align:middle;background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -111px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun.yidun--light.yidun--success.yidun--icon_point .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--success.yidun--inference .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--success.yidun--point .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--success.yidun--sms .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--success.yidun--space .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--success.yidun--voice .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--success.yidun--word_order .yidun_tips .yidun_tips__icon{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -111px;background-size:32px 914px}}.yidun.yidun--light.yidun--error .yidun_tips{color:#f57a7a}.yidun.yidun--light.yidun--error.yidun--jigsaw.yidun--maxerror .yidun_slide_indicator,.yidun.yidun--light.yidun--error.yidun--jigsaw.yidun--maxerror .yidun_slider{display:none}.yidun.yidun--light.yidun--error.yidun--jigsaw.yidun--maxerror .yidun_tips{padding-left:0}.yidun.yidun--light.yidun--error.yidun--jigsaw .yidun_control .yidun_slide_indicator{border-color:#f57a7a;background-color:#fce1e1}.yidun.yidun--light.yidun--error.yidun--jigsaw .yidun_control .yidun_slider{background-color:#f57a7a}.yidun.yidun--light.yidun--error.yidun--jigsaw .yidun_control .yidun_slider .yidun_slider__icon{width:12px;height:12px;background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -94px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun.yidun--light.yidun--error.yidun--jigsaw .yidun_control .yidun_slider .yidun_slider__icon{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -94px;background-size:32px 914px}}.yidun.yidun--light.yidun--error.yidun--jigsaw .yidun_control .yidun_slider img.yidun_slider__icon{width:100%;height:100%}.yidun.yidun--light.yidun--error.yidun--icon_point .yidun_control,.yidun.yidun--light.yidun--error.yidun--inference .yidun_control,.yidun.yidun--light.yidun--error.yidun--maxerror .yidun_control,.yidun.yidun--light.yidun--error.yidun--point .yidun_control,.yidun.yidun--light.yidun--error.yidun--sms .yidun_control,.yidun.yidun--light.yidun--error.yidun--space .yidun_control,.yidun.yidun--light.yidun--error.yidun--voice .yidun_control,.yidun.yidun--light.yidun--error.yidun--word_order .yidun_control{border-color:#f57a7a;background-color:#fce1e1}.yidun.yidun--light.yidun--error.yidun--icon_point .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--error.yidun--inference .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--error.yidun--maxerror .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--error.yidun--point .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--error.yidun--sms .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--error.yidun--space .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--error.yidun--voice .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--error.yidun--word_order .yidun_tips .yidun_tips__icon{margin-right:5px;width:12px;height:12px;vertical-align:middle;background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -77px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun.yidun--light.yidun--error.yidun--icon_point .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--error.yidun--inference .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--error.yidun--maxerror .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--error.yidun--point .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--error.yidun--sms .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--error.yidun--space .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--error.yidun--voice .yidun_tips .yidun_tips__icon,.yidun.yidun--light.yidun--error.yidun--word_order .yidun_tips .yidun_tips__icon{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -77px;background-size:32px 914px}}.yidun.yidun--light.yidun--error.yidun--maxerror .yidun_tips:hover{cursor:pointer}.yidun.yidun--light.yidun--inference.yidun--error .yidun_inference,.yidun.yidun--light.yidun--inference.yidun--maxerror .yidun_inference,.yidun.yidun--light.yidun--inference.yidun--success .yidun_inference,.yidun.yidun--light.yidun--inference.yidun--verifying .yidun_inference,.yidun.yidun--light.yidun--inference .yidun_bgimg--dragging .yidun_inference{cursor:default}.yidun.yidun--light.yidun--inference.yidun--error .yidun_inference:hover .yidun_inference__border,.yidun.yidun--light.yidun--inference.yidun--maxerror .yidun_inference:hover .yidun_inference__border,.yidun.yidun--light.yidun--inference.yidun--success .yidun_inference:hover .yidun_inference__border,.yidun.yidun--light.yidun--inference.yidun--verifying .yidun_inference:hover .yidun_inference__border,.yidun.yidun--light.yidun--inference .yidun_bgimg--dragging .yidun_inference:hover .yidun_inference__border{content:"";border-color:#fff;border-width:1px}.yidun.yidun--light.yidun--inference.yidun--error .yidun_inference:hover .yidun_inference__img,.yidun.yidun--light.yidun--inference.yidun--maxerror .yidun_inference:hover .yidun_inference__img,.yidun.yidun--light.yidun--inference.yidun--success .yidun_inference:hover .yidun_inference__img,.yidun.yidun--light.yidun--inference.yidun--verifying .yidun_inference:hover .yidun_inference__img,.yidun.yidun--light.yidun--inference .yidun_bgimg--dragging .yidun_inference:hover .yidun_inference__img{opacity:1;filter:alpha(opacity=100)}.yidun.yidun--light.yidun--inference.yidun--error .yidun_inference.yidun_inference--drag .yidun_inference__border,.yidun.yidun--light.yidun--inference.yidun--error .yidun_inference.yidun_inference--swap .yidun_inference__border,.yidun.yidun--light.yidun--inference.yidun--maxerror .yidun_inference.yidun_inference--drag .yidun_inference__border,.yidun.yidun--light.yidun--inference.yidun--maxerror .yidun_inference.yidun_inference--swap .yidun_inference__border,.yidun.yidun--light.yidun--inference.yidun--success .yidun_inference.yidun_inference--drag .yidun_inference__border,.yidun.yidun--light.yidun--inference.yidun--success .yidun_inference.yidun_inference--swap .yidun_inference__border,.yidun.yidun--light.yidun--inference.yidun--verifying .yidun_inference.yidun_inference--drag .yidun_inference__border,.yidun.yidun--light.yidun--inference.yidun--verifying .yidun_inference.yidun_inference--swap .yidun_inference__border,.yidun.yidun--light.yidun--inference .yidun_bgimg--dragging .yidun_inference.yidun_inference--drag .yidun_inference__border,.yidun.yidun--light.yidun--inference .yidun_bgimg--dragging .yidun_inference.yidun_inference--swap .yidun_inference__border{border-color:#2c6eff;border-width:2px}.yidun.yidun--light.yidun--inference .yidun_bgimg--dragging .yidun_inference.yidun_inference--target{background-color:#000}.yidun.yidun--light.yidun--inference .yidun_bgimg--dragging .yidun_inference.yidun_inference--target .yidun_inference__border{border:2px solid #2c6eff}.yidun.yidun--light.yidun--inference .yidun_bgimg--dragging .yidun_inference.yidun_inference--target .yidun_inference__img{opacity:.4;filter:alpha(opacity=40)}.yidun.yidun--light.yidun--voice.yidun--error .yidun_control,.yidun.yidun--light.yidun--voice.yidun--error .yidun_voice__back,.yidun.yidun--light.yidun--voice.yidun--error .yidun_voice__refresh,.yidun.yidun--light.yidun--voice.yidun--maxerror .yidun_control,.yidun.yidun--light.yidun--voice.yidun--maxerror .yidun_voice__back,.yidun.yidun--light.yidun--voice.yidun--maxerror .yidun_voice__refresh,.yidun.yidun--light.yidun--voice.yidun--success .yidun_control,.yidun.yidun--light.yidun--voice.yidun--success .yidun_voice__back,.yidun.yidun--light.yidun--voice.yidun--success .yidun_voice__refresh,.yidun.yidun--light.yidun--voice.yidun--verifying .yidun_control,.yidun.yidun--light.yidun--voice.yidun--verifying .yidun_voice__back,.yidun.yidun--light.yidun--voice.yidun--verifying .yidun_voice__refresh{cursor:not-allowed}.yidun.yidun--light.yidun--rtl{direction:rtl}.yidun.yidun--light.yidun--rtl .yidun_top{left:0;right:auto}.yidun.yidun--light.yidun--rtl .yidun_feedback{float:right;margin-left:4px;background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -622px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun.yidun--light.yidun--rtl .yidun_feedback{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -622px;background-size:32px 914px}}.yidun.yidun--light.yidun--rtl .yidun_feedback:hover{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -657px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun.yidun--light.yidun--rtl .yidun_feedback:hover{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -657px;background-size:32px 914px}}.yidun.yidun--light.yidun--rtl .yidun_top__right{float:left}.yidun.yidun--light.yidun--rtl .yidun_top__audio{float:left;margin-left:0}.yidun.yidun--light.yidun--rtl .yidun_tips__img{bottom:-40px}.yidun.yidun--light.yidun--rtl .yidun_voice__right{float:left}.yidun.yidun--light.yidun--rtl .yidun_voice__refresh{float:right}.yidun.yidun--light.yidun--rtl .yidun_audio__play:before{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -247px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun.yidun--light.yidun--rtl .yidun_audio__play:before{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -247px;background-size:32px 914px}}.yidun.yidun--light.yidun--rtl .yidun_voice__back{margin-left:4px}.yidun.yidun--light.yidun--rtl .yidun_voice__back:before{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -197px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun.yidun--light.yidun--rtl .yidun_voice__back:before{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -197px;background-size:32px 914px}}.yidun.yidun--light.yidun--rtl .yidun_voice__back:before,.yidun.yidun--light.yidun--rtl .yidun_voice__refresh:before{margin-left:2px;margin-right:0}.yidun.yidun--light.yidun--rtl .yidun_wave__inner{transform:translateX(4px)}.yidun_popup.yidun_popup--light{position:fixed;top:0;left:0;width:100%;height:100%;z-index:9999;text-align:center}.yidun_popup.yidun_popup--light .yidun_popup__mask{-ms-touch-action:none;touch-action:none;position:absolute;top:0;left:0;width:100%;height:100%;background-color:#000;transition:opacity .3s linear;will-change:opacity}.yidun_popup.yidun_popup--light .yidun_modal{position:relative;box-sizing:border-box;border-radius:2px;border:1px solid #e4e7eb;background-color:#fff;box-shadow:0 0 10px rgba(0,0,0,.3);-ms-touch-action:none;touch-action:none}.yidun_popup.yidun_popup--light .yidun_modal__subwrap,.yidun_popup.yidun_popup--light .yidun_modal__wrap{height:100%;width:100%}.yidun_popup.yidun_popup--light .yidun_modal__sibling{width:0;height:100%}.yidun_popup.yidun_popup--light .yidun_modal__header{padding:0 30px 0 15px;height:50px;text-align:left;font-size:0;color:#45494c;border-bottom:1px solid #e4e7eb;white-space:nowrap}.yidun_popup.yidun_popup--light .yidun_modal__before{width:0;height:100%;vertical-align:middle}.yidun_popup.yidun_popup--light .yidun_modal__title{font-size:16px;line-height:20px;vertical-align:middle;white-space:normal}.yidun_popup.yidun_popup--light .yidun_modal__close{position:absolute;top:13px;right:9px;width:24px;height:24px;text-align:center;border:none;background:transparent;padding:0;cursor:pointer}.yidun_popup.yidun_popup--light .yidun_modal__close .yidun_icon-close{display:block;width:11px;height:11px;font-size:0;text-indent:-9999px;text-transform:capitalize;margin:auto;background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -61px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun_popup.yidun_popup--light .yidun_modal__close .yidun_icon-close{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -61px;background-size:32px 914px}}.yidun_popup.yidun_popup--light .yidun_modal__close:hover .yidun_icon-close{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -45px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun_popup.yidun_popup--light .yidun_modal__close:hover .yidun_icon-close{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -45px;background-size:32px 914px}}.yidun_popup.yidun_popup--light .yidun_modal__body{padding:15px}.yidun_popup.yidun_popup--light .yidun_modal__body .yidun{*margin:0}.yidun_popup.yidun_popup--auto .yidun_modal{top:auto;*top:-50%}.yidun_popup.yidun_popup--auto .yidun_modal__wrap{display:table;*position:relative}.yidun_popup.yidun_popup--auto .yidun_modal__subwrap{display:table-cell;vertical-align:middle;*height:auto;*position:absolute;*top:50%;*left:0}@supports (display:flex){.yidun_popup.yidun_popup--auto .yidun_modal{top:auto;margin:auto}.yidun_popup.yidun_popup--auto .yidun_modal__wrap{display:block}.yidun_popup.yidun_popup--auto .yidun_modal__subwrap{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-line-pack:center;align-content:center}}.yidun_popup.yidun_popup--append{position:absolute}.yidun_popup.yidun_popup--rtl{direction:rtl}.yidun_popup.yidun_popup--rtl .yidun_modal__header{text-align:right;padding:0 15px 0 30px}.yidun_popup.yidun_popup--rtl .yidun_modal__close{left:9px;right:auto}.yidun_intellisense--light{position:relative}.yidun_intellisense--light *{box-sizing:border-box}.yidun_intellisense--light.yidun_intellisense--checking .yidun_intelli-control,.yidun_intellisense--light.yidun_intellisense--loadfail .yidun_intelli-control,.yidun_intellisense--light.yidun_intellisense--loading .yidun_intelli-control,.yidun_intellisense--light.yidun_intellisense--success .yidun_intelli-control{cursor:default}.yidun_intellisense--light .yidun_intelli-control{position:relative;height:40px;font-size:14px;cursor:pointer;border-radius:2px;border:1px solid #e4e7eb;background-color:#f7f9fa;overflow:hidden;outline:none}.yidun_intellisense--light .yidun_intelli-tips{text-align:center;color:#45494c}.yidun_intellisense--light .yidun_intelli-tips:hover .yidun_intelli-icon{background-color:#1991fa;box-shadow:0 2px 6px 1px rgba(25,145,250,.5)}.yidun_intellisense--light .yidun_intelli-tips:hover .yidun_intelli-icon .yidun_logo{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -128px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun_intellisense--light .yidun_intelli-tips:hover .yidun_intelli-icon .yidun_logo{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -128px;background-size:32px 914px}}.yidun_intellisense--light .yidun_intelli-tips:hover .yidun_intelli-text{color:#1991fa}.yidun_intellisense--light .yidun_intelli-icon{position:relative;margin-right:5px;width:28px;height:28px;vertical-align:middle;border-radius:50%;background-color:#fff;box-shadow:0 2px 8px 1px rgba(188,196,204,.5);transition:all .2s linear}.yidun_intellisense--light .yidun_intelli-icon .yidun_logo{position:absolute;top:50%;left:50%;margin-top:-8px;margin-left:-8px;width:15px;height:17px;background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -150px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun_intellisense--light .yidun_intelli-icon .yidun_logo{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -150px;background-size:32px 914px}}.yidun_intellisense--light .yidun_intelli-icon img.yidun_logo{width:100%;height:100%;top:0;left:0;margin:0;border-radius:50%;background-image:none!important}.yidun_intellisense--light .yidun_intelli-text{line-height:38px;vertical-align:middle;transition:all .2s linear}.yidun_intellisense--light .yidun_classic-tips{display:none;text-align:center}.yidun_intellisense--light .yidun_classic-tips .yidun_tips__icon{margin-right:5px;width:12px;height:12px;vertical-align:middle}.yidun_intellisense--light .yidun_classic-tips .yidun_tips__text{line-height:38px;vertical-align:middle}.yidun_intellisense--light .yidun_classic-container{position:absolute;bottom:0;left:0;width:100%;z-index:1000}.yidun_intellisense--light .yidun_classic-wrapper{display:none;padding:9px;border:1px solid #e4e7eb;border-radius:2px;background-color:#fff}.yidun_intellisense--light.yidun_intellisense--checking .yidun_intelli-icon,.yidun_intellisense--light.yidun_intellisense--loading .yidun_intelli-icon{background-color:#1991fa}.yidun_intellisense--light.yidun_intellisense--checking .yidun_intelli-icon .yidun_logo,.yidun_intellisense--light.yidun_intellisense--loading .yidun_intelli-icon .yidun_logo{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -128px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun_intellisense--light.yidun_intellisense--checking .yidun_intelli-icon .yidun_logo,.yidun_intellisense--light.yidun_intellisense--loading .yidun_intelli-icon .yidun_logo{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -128px;background-size:32px 914px}}.yidun_intellisense--light.yidun_intellisense--checking .yidun_intelli-text,.yidun_intellisense--light.yidun_intellisense--loading .yidun_intelli-text{color:#1991fa}.yidun_intellisense--light.yidun_intellisense--checking .yidun_ball-scale-multiple{position:absolute;top:50%;left:50%;transform:translateY(-80px)}.yidun_intellisense--light.yidun_intellisense--checking .yidun_ball-scale-multiple>div:nth-child(2){animation-delay:-1.2s}.yidun_intellisense--light.yidun_intellisense--checking .yidun_ball-scale-multiple>div:nth-child(3){animation-delay:-.6s}.yidun_intellisense--light.yidun_intellisense--checking .yidun_ball-scale-multiple>div{position:absolute;box-shadow:inset 0 0 40px rgba(25,145,250,.5);border-radius:100%;animation-fill-mode:both;left:-80px;top:0;opacity:0;width:160px;height:160px;animation:ball-scale-multiple 1.8s 0s linear infinite}.yidun_intellisense--light.yidun_intellisense--loading .yidun_logo{display:none}.yidun_intellisense--light.yidun_intellisense--loading .yidun_intelli-loading{position:absolute;top:50%;left:50%;margin-top:-8px;margin-left:-8px;width:16px;height:16px;border-radius:50%;border-width:2px;border-style:solid;border-color:#fff #fff transparent;animation:loading .75s linear infinite;background-position:0 0}.yidun_intellisense--light.yidun_intellisense--error .yidun_intelli-tips,.yidun_intellisense--light.yidun_intellisense--loadfail .yidun_intelli-tips,.yidun_intellisense--light.yidun_intellisense--success .yidun_intelli-tips{display:none}.yidun_intellisense--light.yidun_intellisense--error .yidun_classic-tips,.yidun_intellisense--light.yidun_intellisense--loadfail .yidun_classic-tips,.yidun_intellisense--light.yidun_intellisense--success .yidun_classic-tips{display:block}.yidun_intellisense--light.yidun_intellisense--success .yidun_intelli-control{border-color:#52ccba;background-color:#d2f4ef}.yidun_intellisense--light.yidun_intellisense--success .yidun_classic-tips{color:#52ccba}.yidun_intellisense--light.yidun_intellisense--success .yidun_tips__icon{width:17px;background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -111px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun_intellisense--light.yidun_intellisense--success .yidun_tips__icon{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -111px;background-size:32px 914px}}.yidun_intellisense--light.yidun_intellisense--error .yidun_intelli-control,.yidun_intellisense--light.yidun_intellisense--loadfail .yidun_intelli-control{border-color:#f57a7a;background-color:#fce1e1}.yidun_intellisense--light.yidun_intellisense--error .yidun_classic-tips,.yidun_intellisense--light.yidun_intellisense--loadfail .yidun_classic-tips{color:#f57a7a}.yidun_intellisense--light.yidun_intellisense--error .yidun_tips__icon,.yidun_intellisense--light.yidun_intellisense--loadfail .yidun_tips__icon{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light.fb029b4.png");background-position:0 -77px;background-size:32px 914px}@media only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min-device-pixel-ratio:2){.yidun_intellisense--light.yidun_intellisense--error .yidun_tips__icon,.yidun_intellisense--light.yidun_intellisense--loadfail .yidun_tips__icon{background-image:url("https://cstaticdun.126.net/2.17.4/images/icon_light@2x.676c228.png");background-position:0 -77px;background-size:32px 914px}}.yidun_intellisense--light.yidun_intellisense--maxerror .yidun_intelli-control .yidun_tips__text:hover{cursor:pointer;text-decoration:underline}</style><script type="text/javascript" charset="UTF-8" async="" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/watchman.js"></script></head><body class="WhiteBg-body PostIndex-body" data-rh="class"><img src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/logo.png" alt="" hidden=""><div id="root"><div class="App"><div class="LoadingBar"></div><div><span style="position:absolute;top:-10000px;left:-10000px" role="log" aria-live="assertive"></span></div><main role="main" class="App-main"><div class="Post-content" data-zop-usertoken="{&quot;userToken&quot;:&quot;&quot;}" data-zop="{&quot;authorName&quot;:&quot;Deepliu&quot;,&quot;itemId&quot;:143867739,&quot;title&quot;:&quot;Lex与YACC详解&quot;,&quot;type&quot;:&quot;article&quot;}" data-za-detail-view-path-module="PostItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Post&quot;,&quot;token&quot;:&quot;143867739&quot;}}}"><div class="ColumnPageHeader-Wrapper"><div><div class="Sticky ColumnPageHeader is-fixed css-1l12z7y" style="width: 1836px; top: 0px; left: 0px;"><div class="ColumnPageHeader-content"><a href="https://www.zhihu.com/" aria-label="知乎"><svg viewBox="0 0 64 30" fill="#0066FF" width="64" height="30" class="css-1hlrcxk"><path d="M29.05 4.582H16.733V25.94h3.018l.403 2.572 4.081-2.572h4.815V4.582zm-5.207 18.69l-2.396 1.509-.235-1.508h-1.724V7.233h6.78v16.04h-2.425zM14.46 14.191H9.982c0-.471.033-.954.039-1.458v-5.5h5.106V5.935a1.352 1.352 0 0 0-.404-.957 1.378 1.378 0 0 0-.968-.396H5.783c.028-.088.056-.177.084-.255.274-.82 1.153-3.326 1.153-3.326a4.262 4.262 0 0 0-2.413.698c-.57.4-.912.682-1.371 1.946-.532 1.453-.997 2.856-1.31 3.693C1.444 8.674.28 11.025.28 11.025a5.85 5.85 0 0 0 2.52-.61c1.119-.593 1.679-1.502 2.054-2.883l.09-.3h2.334v5.5c0 .5-.045.982-.073 1.46h-4.12c-.71 0-1.39.278-1.893.775a2.638 2.638 0 0 0-.783 1.874h6.527a17.717 17.717 0 0 1-.778 3.649 16.796 16.796 0 0 1-3.012 5.273A33.104 33.104 0 0 1 0 28.74s3.13 1.175 5.425-.954c1.388-1.292 2.631-3.814 3.23-5.727a28.09 28.09 0 0 0 1.12-5.229h5.967v-1.37a1.254 1.254 0 0 0-.373-.899 1.279 1.279 0 0 0-.909-.37z"></path><path d="M11.27 19.675l-2.312 1.491 5.038 7.458a6.905 6.905 0 0 0 .672-2.218 3.15 3.15 0 0 0-.28-2.168l-3.118-4.563zM51.449 15.195V5.842c4.181-.205 7.988-.405 9.438-.483l.851-.05c.387-.399.885-2.395.689-3.021-.073-.25-.213-.666-.638-.555a33.279 33.279 0 0 1-4.277.727c-2.766.321-3.97.404-7.804.682-6.718.487-12.709.72-12.709.72a2.518 2.518 0 0 0 .788 1.834 2.567 2.567 0 0 0 1.883.706c2.278-.095 5.598-.25 8.996-.41v9.203h-12.78c0 .703.281 1.377.783 1.874a2.69 2.69 0 0 0 1.892.777h10.105v7.075c0 .887-.464 1.192-1.231 1.214h-3.92a4.15 4.15 0 0 0 .837 1.544 4.2 4.2 0 0 0 1.403 1.067 6.215 6.215 0 0 0 2.71.277c1.36-.066 2.967-.826 2.967-3.57v-7.607h11.28c.342 0 .67-.135.91-.374.242-.239.378-.563.378-.902v-1.375H51.449z"></path><path d="M42.614 8.873a2.304 2.304 0 0 0-1.508-.926 2.334 2.334 0 0 0-1.727.405l-.376.272 4.255 5.85 2.24-1.62-2.884-3.98zM57.35 8.68l-3.125 4.097 2.24 1.663 4.517-5.927-.375-.277a2.32 2.32 0 0 0-1.722-.452 2.327 2.327 0 0 0-1.536.896z"></path></svg></a><i class="ColumnPageHeader-Line"></i><div class="ColumnPageHeader-Title"><div class="ColumnPageHeader-TitleName"><span class="ColumnPageHeader-TitleMeta">首发于</span><a class="ColumnLink ColumnPageHeader-TitleColumn" href="https://www.zhihu.com/column/server-development">后台开发图鉴</a></div></div><div class="ColumnPageHeader-Button"><button href="" class="css-1ct7cfw"><svg width="16" height="16" viewBox="0 0 24 24" data-new-api="HeartFill24" data-old-api="Heart" class="Zi Zi--Heart css-1v994a0" fill="currentColor"><path d="M12.004 4.934c1.015-.944 2.484-1.618 3.98-1.618 3.48 0 6.53 3.265 6.15 7.614-.11 1.254-.686 2.55-1.458 3.753-.778 1.215-1.79 2.392-2.845 3.419-1.054 1.028-2.168 1.923-3.161 2.566a9.96 9.96 0 01-1.41.777c-.418.182-.862.32-1.268.32s-.848-.137-1.267-.317a9.918 9.918 0 01-1.407-.771c-.992-.64-2.103-1.53-3.156-2.555-1.052-1.024-2.062-2.2-2.84-3.417-.77-1.208-1.346-2.51-1.456-3.775-.38-4.349 2.67-7.614 6.15-7.614 1.484 0 2.983.673 3.988 1.618z" fill-rule="evenodd" clip-rule="evenodd"></path></svg>无障碍</button><button type="button" class="Button ColumnPageHeader-WriteButton Button--blue"><svg width="24" height="24" viewBox="0 0 24 24" data-new-api="PencilPaper24" data-old-api="EditSurround" class="Zi Zi--EditSurround" fill="currentColor"><path d="M3.046 5.466A2.415 2.415 0 015.46 3.051h8.56a.75.75 0 010 1.5H5.46a.915.915 0 00-.915.915v13.072c0 .505.41.915.915.915h13.074c.506 0 .915-.41.915-.915V9.98a.75.75 0 011.5 0v8.557a2.415 2.415 0 01-2.415 2.415H5.461a2.415 2.415 0 01-2.415-2.415V5.466z" fill-rule="evenodd" clip-rule="evenodd"></path><path d="M20.735 3.267a.75.75 0 010 1.06l-8.206 8.206a.75.75 0 01-1.06-1.06l8.205-8.206a.75.75 0 011.06 0z" fill-rule="evenodd" clip-rule="evenodd"></path></svg>写文章</button></div></div><div class="ColumnPageHeader-profile"><div><button type="button" class="Button AppHeader-login Button--blue">登录</button></div></div></div><div class="Sticky--holder" style="position: relative; inset: 0px; display: block; float: none; margin: 0px; height: 52px;"></div></div></div><article class="Post-Main Post-NormalMain" tabindex="-1"><header class="Post-Header"><h1 class="Post-Title">Lex与YACC详解</h1><div class="Post-Author"><div class="AuthorInfo" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><div class="AuthorInfo"><meta itemprop="name" content="Deepliu"><meta itemprop="image" content="https://pic2.zhimg.com/v2-ffae45eb0d5db66f67640e894321c303_l.jpg?source=172ae18b"><meta itemprop="url" content="https://www.zhihu.com/people/donghua.lau"><meta itemprop="zhihu:followerCount"><span class="UserLink AuthorInfo-avatarWrapper"><div class="Popover"><div id="Popover10-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover10-content"><a href="https://www.zhihu.com/people/donghua.lau" target="_blank" class="UserLink-link" data-za-detail-view-element_name="User"><img class="Avatar Avatar--round AuthorInfo-avatar" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/v2-ffae45eb0d5db66f67640e894321c303_xs.jpg" srcset="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/v2-ffae45eb0d5db66f67640e894321c303_l.jpg 2x" alt="Deepliu" width="38" height="38"></a></div></div></span><div class="AuthorInfo-content"><div class="AuthorInfo-head"><span class="UserLink AuthorInfo-name"><div class="Popover"><div id="Popover11-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover11-content"><a href="https://www.zhihu.com/people/donghua.lau" target="_blank" class="UserLink-link" data-za-detail-view-element_name="User">Deepliu</a></div></div></span></div><div class="AuthorInfo-detail"><div class="AuthorInfo-badge"><div class="ztext AuthorInfo-badgeText">在南方城市敲代码</div></div></div></div></div></div></div><div class="LabelContainer-wrapper"></div><div role="button" tabindex="0"><span class="Voters"><button type="button" class="Button Button--plain">142 人<!-- -->赞同了该文章</button></span></div></header><div class="Post-RichTextContainer"><div class="css-1yuhvjn"><div class="Catalog isCatalogV2 css-1xzea0b" data-za-detail-view-name="正文" style="visibility: visible;"><div class="css-jpzy4w"><div class="css-zkfaav"><span style="display: inline-flex; align-items: center;">​<svg width="1.2em" height="1.2em" viewBox="0 0 24 24" class="ZDI ZDI--Catalog24" fill="currentColor"><path d="M10 5a1 1 0 011-1h10a1 1 0 110 2H11a1 1 0 01-1-1zm4 6a1 1 0 100 2h7a1 1 0 100-2h-7zm0 7a1 1 0 100 2h7a1 1 0 100-2h-7zm-8.335.25a.915.915 0 01-.915-.915V12.75H10a.75.75 0 000-1.5H4.75V6.665c0-.505.41-.915.915-.915H7a.75.75 0 000-1.5H5.665A2.415 2.415 0 003.25 6.665v10.67a2.415 2.415 0 002.415 2.415H10a.75.75 0 000-1.5H5.665z"></path></svg></span><div class="css-5287jj">目录</div></div><div class="css-17oyyq4">收起</div></div><div class="css-1izmkad"><div class="Catalog-content css-a3sv8e"><div class="Catalog-FirstLevelTitle Catalog-Title css-11caopt"><div data-catalog-target-id="h_143867739_0" data-za-detail-view-id="9745" data-za-detail-view-action="Click" data-za-detail-view-name="正文" class="css-q9wt1v"><div class="css-nj7ofv">一、简介</div></div></div><div class="Catalog-FirstLevelTitle Catalog-Title css-11caopt"><div data-catalog-target-id="h_143867739_1" data-za-detail-view-id="9745" data-za-detail-view-action="Click" data-za-detail-view-name="正文" class="css-q9wt1v"><div class="css-nj7ofv">二、Lex &amp; YACC能为你做什么？</div></div></div><div class="Catalog-FirstLevelTitle Catalog-Title css-11caopt"><div data-catalog-target-id="h_143867739_2" data-za-detail-view-id="9745" data-za-detail-view-action="Click" data-za-detail-view-name="正文" class="css-q9wt1v"><div class="css-nj7ofv">三、Lex</div></div></div><div class="Catalog-SecondLevelTitle Catalog-Title css-1hgl14h"><div data-catalog-target-id="h_143867739_3" data-za-detail-view-id="9745" data-za-detail-view-action="Click" data-za-detail-view-name="正文" class="css-z3i3y5"><div class="css-nj7ofv">3.1 Lex的常规表达式</div></div></div><div class="Catalog-SecondLevelTitle Catalog-Title css-1hgl14h"><div data-catalog-target-id="h_143867739_4" data-za-detail-view-id="9745" data-za-detail-view-action="Click" data-za-detail-view-name="正文" class="css-z3i3y5"><div class="css-nj7ofv">3.2 匹配中的正则表达式示例</div></div></div><div class="Catalog-SecondLevelTitle Catalog-Title css-1hgl14h"><div data-catalog-target-id="h_143867739_5" data-za-detail-view-id="9745" data-za-detail-view-action="Click" data-za-detail-view-name="正文" class="css-z3i3y5"><div class="css-nj7ofv">3.3 复杂一点的类C语法示例</div></div></div><div class="Catalog-FirstLevelTitle Catalog-Title css-11caopt"><div data-catalog-target-id="h_143867739_6" data-za-detail-view-id="9745" data-za-detail-view-action="Click" data-za-detail-view-name="正文" class="css-q9wt1v"><div class="css-nj7ofv">四、YACC</div></div></div><div class="Catalog-SecondLevelTitle Catalog-Title css-4rj7vs"><div data-catalog-target-id="h_143867739_7" data-za-detail-view-id="9745" data-za-detail-view-action="Click" data-za-detail-view-name="正文" class="css-z3i3y5"><div class="css-nj7ofv">4.1 一个简单的温度控制器</div></div></div><div class="Catalog-SecondLevelTitle Catalog-Title css-1hgl14h"><div data-catalog-target-id="h_143867739_8" data-za-detail-view-id="9745" data-za-detail-view-action="Click" data-za-detail-view-name="正文" class="css-z3i3y5"><div class="css-nj7ofv">4.2 扩展恒温器，使得其可以接受参数</div></div></div><div class="Catalog-SecondLevelTitle Catalog-Title css-1hgl14h"><div data-catalog-target-id="h_143867739_9" data-za-detail-view-id="9745" data-za-detail-view-action="Click" data-za-detail-view-name="正文" class="css-z3i3y5"><div class="css-nj7ofv">4.3 解析一个配置文件</div></div></div><div class="Catalog-FirstLevelTitle Catalog-Title css-11caopt"><div data-catalog-target-id="h_143867739_10" data-za-detail-view-id="9745" data-za-detail-view-action="Click" data-za-detail-view-name="正文" class="css-q9wt1v"><div class="css-nj7ofv">五、生成C++代码的解析器</div></div></div><div class="Catalog-FirstLevelTitle Catalog-Title css-11caopt"><div data-catalog-target-id="h_143867739_11" data-za-detail-view-id="9745" data-za-detail-view-action="Click" data-za-detail-view-name="正文" class="css-q9wt1v"><div class="css-nj7ofv">六、Lex和YACC内部工作原理</div></div></div><div class="Catalog-SecondLevelTitle Catalog-Title css-1hgl14h"><div data-catalog-target-id="h_143867739_12" data-za-detail-view-id="9745" data-za-detail-view-action="Click" data-za-detail-view-name="正文" class="css-z3i3y5"><div class="css-nj7ofv">6.1 标识符的值(token values)</div></div></div><div class="Catalog-SecondLevelTitle Catalog-Title css-1hgl14h"><div data-catalog-target-id="h_143867739_13" data-za-detail-view-id="9745" data-za-detail-view-action="Click" data-za-detail-view-name="正文" class="css-z3i3y5"><div class="css-nj7ofv">6.2 递归：’right is wrong’</div></div></div><div class="Catalog-SecondLevelTitle Catalog-Title css-1hgl14h"><div data-catalog-target-id="h_143867739_14" data-za-detail-view-id="9745" data-za-detail-view-action="Click" data-za-detail-view-name="正文" class="css-z3i3y5"><div class="css-nj7ofv">6.3 高级yylval: %union</div></div></div><div class="Catalog-SecondLevelTitle Catalog-Title css-1hgl14h"><div data-catalog-target-id="h_143867739_15" data-za-detail-view-id="9745" data-za-detail-view-action="Click" data-za-detail-view-name="正文" class="css-z3i3y5"><div class="css-nj7ofv">6.4 自定义YY_INPUT指向字符串而非标准输入</div></div></div><div class="Catalog-FirstLevelTitle Catalog-Title css-11caopt"><div data-catalog-target-id="h_143867739_16" data-za-detail-view-id="9745" data-za-detail-view-action="Click" data-za-detail-view-name="正文" class="css-q9wt1v"><div class="css-nj7ofv">七、调试</div></div></div><div class="Catalog-SecondLevelTitle Catalog-Title css-1hgl14h"><div data-catalog-target-id="h_143867739_17" data-za-detail-view-id="9745" data-za-detail-view-action="Click" data-za-detail-view-name="正文" class="css-z3i3y5"><div class="css-nj7ofv">7.1 状态机</div></div></div><div class="Catalog-SecondLevelTitle Catalog-Title css-1hgl14h"><div data-catalog-target-id="h_143867739_18" data-za-detail-view-id="9745" data-za-detail-view-action="Click" data-za-detail-view-name="正文" class="css-z3i3y5"><div class="css-nj7ofv">7.2 冲突：『shift/reduce』以及『reduce/reduce』</div></div></div><div class="Catalog-FirstLevelTitle Catalog-Title css-11caopt"><div data-catalog-target-id="h_143867739_19" data-za-detail-view-id="9745" data-za-detail-view-action="Click" data-za-detail-view-name="正文" class="css-q9wt1v"><div class="css-nj7ofv">八、进一步阅读</div></div></div></div></div></div><div class="RichText ztext Post-RichText css-14bz7qe" options="[object Object]"><h2 data-first-child="" id="h_143867739_0" data-into-catalog-status="">一、简介</h2><p data-pid="RqzhCbiO">只
要你在Unix环境中写过程序，你必定会邂逅神秘的Lex&amp;YACC，就如GNU/Linux用户所熟知的Flex&amp;Bison，这里的
Flex就是由Vern 
Paxon实现的一个Lex，Bison则是GNU版本的YACC。在此我们将统一称呼这些程序为Lex和YACC。新版本的程序是向上兼容的(译注：即
兼容老版本)，所以你可以用Flex和Bison来尝试下我们的实例。<br><br>这些程序实用性极广，但如同你的C编译器一样，在其主页上并没有描述它们，也没有关于怎样使用的信息。当和Lex结合使用时，YACC实在是棒极了，但是Bison的主页上并没有描述Bison如何跟Lex结合使用以生成代码的相应说明。</p><h2 id="h_143867739_1" data-into-catalog-status="">二、Lex &amp; YACC能为你做什么？</h2><p data-pid="hoG8D09M">如果使用得当，这些程序(指LEX&amp;YACC)可以让你轻易的解析复杂的语言，当你需要读取一个配置文件时，或者你需要编写一个你自己使用的语言的编译器时，这对于你来说是莫大的裨益。<br>本文档能提供给你一些帮助，你将发现你再也不用手工写解析器了，Lex &amp; YACC就是为你量身打造的利器。</p><h2 id="h_143867739_2" data-into-catalog-status="">三、Lex</h2><p data-pid="IAcFo_u_">Lex会生成一个叫做『词法分析器』的程序。这是一个函数，它带有一个字符流传入参数，词法分析器函数看到一组字符就会去匹配一个关键字(key)，采取相应措施。一个非常简单的例子(example1)如下:</p><div class="highlight"><pre><code class="language-c"><span class="o">%</span><span class="p">{</span>
<span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span><span class="cp"></span><span class="o">%</span><span class="p">}</span>
<span class="o">%%</span>
<span class="n">stop</span> <span class="n">printf</span><span class="p">(</span><span class="s">"Stop command received</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
<span class="n">start</span> <span class="nf">printf</span><span class="p">(</span><span class="s">"Start command received</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
<span class="o">%%</span></code></pre></div><p data-pid="Br54Ktve"><br>第一部分，位于%{和%}对之间直接包含了输出程序(stdio.h)。我们需要这个程序，因为使用了printf函数，它在stdio.h中定义。<br><br>第二部分用’%%’分割开来，所以第二行起始于’stop’，一旦在输入参数中遇到了’stop’，接下来的那一行(printf()调用)将被执行。<br><br>除此之外，还有’start’，其跟stop的行为差不多。<br><br>我们再次用’%%’结束代码段。<br><br>为了编译上面的例子，只需要执行以下命令：</p><div class="highlight"><pre><code class="language-bash">lex example1.l
cc lex.yy –o example –ll</code></pre></div><p data-pid="Puvp50Q4"><br>注意：如果你用flex，则就将lex命令用flex代替，还需要将’-ll’选项改成’-lfl’。在RedHat 6.x以及SuSe中需要这样做。<br><br>这样，Lex将生成’example1’这个文件。运行该文件，它将等待你输入一些数据。每次你输入一些不匹配的命令(非’stop’和’start’)，它会将你输入的字符再次输出。你若输入’stop’，它将输出’Stop command received’。<br><br>用一个EOF(^D)来结束程序。<br><br>也许你想知道，它是怎么运行的，因为我们并没有定义main()函数。这个函数(指main())已经在lib1(liblex)中定义好了，在此我们选用了编译选项’-ll’</p><h3 id="h_143867739_3" data-into-catalog-status="">3.1 Lex的常规表达式</h3><p data-pid="9FMU0b0f">常规表达式是一种使用元语言的模式描述。表达式由符号组成。符号一般是字符和数字，还有一些具有特殊含义的其他标记，如下表：</p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-14e3c63e03db9eba547536139f023bf3_b.jpg" data-caption="" data-size="normal" data-rawwidth="1252" data-rawheight="1332" class="origin_image zh-lightbox-thumb" width="1252" data-original="https://pic4.zhimg.com/v2-14e3c63e03db9eba547536139f023bf3_r.jpg"/></noscript><img src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/v2-14e3c63e03db9eba547536139f023bf3_720w.jpg" data-caption="" data-size="normal" data-rawwidth="1252" data-rawheight="1332" class="origin_image zh-lightbox-thumb lazy" data-original="https://pic4.zhimg.com/v2-14e3c63e03db9eba547536139f023bf3_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-14e3c63e03db9eba547536139f023bf3_b.jpg" data-lazy-status="ok" width="1252"></figure><h3 id="h_143867739_4" data-into-catalog-status="">3.2 匹配中的正则表达式示例</h3><p data-pid="6IHoG8Ol">这个实例(example2)本身并没什么用处，下一个实例也不会提及正则表达式。但这里它展示了如何在Lex中使用正则表达式，这在后面将非常有用。</p><div class="highlight"><pre><code class="language-c"><span class="o">%</span><span class="p">{</span>
<span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span><span class="cp"></span><span class="o">%</span><span class="p">}</span>

<span class="o">%%</span>
<span class="p">[</span><span class="mo">01234567</span><span class="mi">89</span><span class="p">]</span><span class="o">+</span> <span class="n">printf</span><span class="p">(</span><span class="s">"NUMBER</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
<span class="p">[</span><span class="n">a</span><span class="o">-</span><span class="n">zA</span><span class="o">-</span><span class="n">Z</span><span class="p">][</span><span class="n">a</span><span class="o">-</span><span class="n">zA</span><span class="o">-</span><span class="n">Z0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span><span class="o">*</span> <span class="n">printf</span><span class="p">(</span><span class="s">"WORD</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span></code></pre></div><p data-pid="U1dO3kHp">该Lex文件描述了两种token匹配：WORDs和NUMBERs。正则表达式非常恐怖，但是只需要稍花力气便可以加以理解。<br><br>其中NUMBER匹配“[0123456789]+”可以写成“[0-9]+”。<br><br>WORD匹配就有点复杂：[a-zA-Z][a-zA-Z0-9]*<br><br>第
一部分仅仅匹配一个’a’到’z’或’A’到’Z’之间的字符，也即一个字母。接着该字母后面需要连上0个或多个字符，这些字符可以是字母，也可以是数
字。这里为何用’*’? 
’+’表示至少1次的匹配。一个WORD只有一个字符也可以很好的匹配，在第一部分我们已经匹配到了一个字符，所以第二部分可以是0个匹配，所以
用’*’。<br><br>用这种方式，我们就模仿了很多编程语言中对于一个变量名的要求，即要求变量名『必须』以字母开头，但是可以在后续字符中用数字。也就是说’temperature1’是一个正确的命名，但是’1temperature’就不是。<br><br>像example1一样编译example2，并输入一些文本，如下：</p><div class="highlight"><pre><code class="language-text">$ ./example2
foo
WORD

bar
WORD

123
NUMBER

bar123
WORD

123bar
NUMBER
WORD</code></pre></div><p data-pid="4TkXwZru"><br>你也许会疑惑，所有的输出中的空格是从哪来的？理由很简单：从输入而来，我们不在空格上匹配任何内容，所以它们又输出来了。<br><br>Flex主页上有正则表达式的详细文档。很多人觉得perl正则表达式主页的说明非常有用，但是Flex并不实现perl所实现的所有东西。<br><br>你只需要确保不写一些形如’[0-9]*’的空匹配即可，你的词法分析器(由Flex生成)将不明就里的开始不断的匹配空字符。</p><h3 id="h_143867739_5" data-into-catalog-status="">3.3 复杂一点的类C语法示例</h3><p data-pid="qFHWSH1o">假定我们需要解析一个形如下面的文件：</p><div class="highlight"><pre><code class="language-nginx"><span class="k">logging{</span>
<span class="s">category</span> <span class="s">lame-servers</span> <span class="p">{</span> <span class="kn">null</span><span class="p">;</span> <span class="p">}</span>;
<span class="k">category</span> <span class="s">cname</span> <span class="p">{</span> <span class="kn">null</span><span class="p">;</span> <span class="p">}</span>;
<span class="k">}</span><span class="p">;</span>

<span class="k">zone</span> <span class="s">"."</span> <span class="p">{</span>
<span class="kn">type</span> <span class="s">hint</span><span class="p">;</span>
<span class="kn">file</span> <span class="s">"/etc/bind/db.root"</span><span class="p">;</span>
<span class="p">}</span></code></pre></div><p data-pid="eDH3QpSH">我们在此见到了很多token：</p><ul><li data-pid="RxfM-FiR">WORD: 如’zone’和’type’</li><li data-pid="RmRUVygN">FILENAME：如“/etc/bind/db.root”</li><li data-pid="nwobbF4i">QUOTE: 如包含文件名的引号</li><li data-pid="mqhgeG6O">OBRACE：{</li><li data-pid="uHFMFTAJ">EBRACE: }</li><li data-pid="TyTOW3Y4">SEMICOLON: ;</li></ul><p data-pid="SnAYua45">example3相应的Lex文件如下：</p><div class="highlight"><pre><code class="language-c"><span class="o">%</span><span class="p">{</span>
<span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span><span class="cp"></span><span class="o">%</span><span class="p">}</span>

<span class="o">%%</span>
<span class="p">[</span><span class="n">a</span><span class="o">-</span><span class="n">zA</span><span class="o">-</span><span class="n">Z</span><span class="p">][</span><span class="n">a</span><span class="o">-</span><span class="n">zA</span><span class="o">-</span><span class="n">Z0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span><span class="o">*</span> <span class="n">printf</span><span class="p">(</span><span class="s">"WORD "</span><span class="p">);</span>
<span class="p">[</span><span class="n">a</span><span class="o">-</span><span class="n">zA</span><span class="o">-</span><span class="n">Z0</span><span class="o">-</span><span class="mi">9</span><span class="err">\</span><span class="o">/</span><span class="p">.</span><span class="o">-</span><span class="p">]</span><span class="o">+</span> <span class="n">printf</span><span class="p">(</span><span class="s">"FILENAME "</span><span class="p">);</span>
<span class="err">\</span><span class="s">" printf("</span><span class="n">QUOTE</span> <span class="s">");</span>
<span class="err">\</span><span class="p">{</span> <span class="n">printf</span><span class="p">(</span><span class="s">"OBRACE "</span><span class="p">);</span>
<span class="err">\</span><span class="p">}</span> <span class="n">printf</span><span class="p">(</span><span class="s">"EBRACE "</span><span class="p">);</span>
<span class="p">;</span> <span class="n">printf</span><span class="p">(</span><span class="s">"SEMICOLON "</span><span class="p">);</span>
<span class="err">\</span><span class="n">n</span> <span class="n">printf</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
<span class="p">[</span> <span class="err">\</span><span class="n">t</span><span class="p">]</span><span class="o">+</span> <span class="cm">/* ignore whitespace */</span><span class="p">;</span>
<span class="o">%%</span></code></pre></div><p data-pid="42zBTP-r"><br>当输入我们的文件到Lex生成的example3中，我们得到：</p><div class="highlight"><pre><code class="language-text">WORD OBRACE
WORD FILENAME OBRACE WORD SEMICOLON EBRACE SEMICOLON
WORD WORD OBRACE WORD SEMICOLON EBRACE SEMICOLON
EBRACE SEMICOLON
WORD QUOTE FILENAME QUOTE OBRACE
WORD WORD SEMICOLON
WORD QUOTE FILENAME QUOTE SEMICOLON
EBRACE SEMICOLON</code></pre></div><h2 id="h_143867739_6" data-into-catalog-status="">四、YACC</h2><p data-pid="d6t14KBl">YACC可以解析输入流中的标识符(token)，这就清楚的描述了YACC和LEX的关系，YACC并不知道『输入流』为何物，它需要事先就将输入流预加工成标识符，虽然你可以自己手工写一个Tokenizer，但我们将这些工作留给LEX来做。<br><br>YACC
用来为编译器解析输入数据，即程序代码。这些用编程语言写成的程序代码一点也不模棱两可——它们只有一个意思。正因为如此，YACC才不会去对付那些有歧
义的语法，并且会抱怨shift/reduce或者reduce/reduce冲突。更多的关于模糊性和YACC『问题』可以在『冲突』一章中找到。</p><h3 id="h_143867739_7" data-into-catalog-status="">4.1 一个简单的温度控制器</h3><p data-pid="8BQXaE3h">假定我们有一个温度计，我们要用一种简单的语言来控制它。关于此的一个会话、如下：</p><div class="highlight"><pre><code class="language-text">heat on
Heater on!
heat off
Header off!
target temperature set!</code></pre></div><p data-pid="rnWA9i7a">我们需要识别的标识符为heat, on/off(STATE), target, temperature, NUMBER。<br><br>LEX的tokenizer(example4)为：</p><div class="highlight"><pre><code class="language-c"><span class="o">%</span><span class="p">{</span>
<span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">"y.tab.h"</span><span class="cp">
</span><span class="cp"></span><span class="o">%</span><span class="p">}</span>

<span class="o">%%</span>
<span class="p">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span><span class="o">+</span> <span class="k">return</span> <span class="n">NUMBER</span><span class="p">;</span>
<span class="n">heat</span> <span class="k">return</span> <span class="n">TOKHEAT</span><span class="p">;</span>
<span class="n">on</span><span class="o">|</span><span class="n">off</span> <span class="k">return</span> <span class="n">STATE</span><span class="p">;</span>
<span class="n">target</span> <span class="k">return</span> <span class="n">TOKTARGET</span><span class="p">;</span>
<span class="n">temperature</span> <span class="k">return</span> <span class="n">TOKTEMPERATURE</span><span class="p">;</span>
<span class="err">\</span><span class="n">n</span> <span class="cm">/* ignore end of line */</span><span class="p">;</span>
<span class="p">[</span> <span class="err">\</span><span class="n">t</span><span class="p">]</span><span class="o">+</span> <span class="cm">/* ignore whitespace */</span>
<span class="o">%%</span></code></pre></div><p data-pid="zsmF7mgJ"><br>有两个重点需要注意：<br>第一，我们包含了『y.tab.h』；<br>第二，我们不再打印输出了，我们返回标识符的名字。之所这样做是因为我们将这些返回传送给了YACC，而它对于我们屏幕上的输出并不感冒。 『y.tab.h』中定义了这些标识符。<br><br>但是y.tab.h从哪里来？它由YACC从我们编写的语法文件中生成，语法文件非常简单，如下：</p><div class="highlight"><pre><code class="language-c"><span class="nl">commands</span><span class="p">:</span> <span class="cm">/* empty */</span>
<span class="o">|</span> <span class="n">commands</span> <span class="n">command</span>
<span class="p">;</span>

<span class="nl">command</span><span class="p">:</span> <span class="n">heat_switch</span> <span class="o">|</span> <span class="n">target_set</span> <span class="p">;</span>

<span class="nl">heat_switch</span><span class="p">:</span>
<span class="n">TOKHEAT</span> <span class="n">STATE</span>
<span class="p">{</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">"</span><span class="se">\t</span><span class="s">Heat turned on or off</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
<span class="p">};</span>

<span class="nl">target_set</span><span class="p">:</span>
<span class="n">TOKTARGET</span> <span class="n">TOKTEMPERATURE</span> <span class="n">NUMBER</span>
<span class="p">{</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">"</span><span class="se">\t</span><span class="s">Temperature set</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
<span class="p">};</span></code></pre></div><p data-pid="o0IXgX0o"><br>第
一部分，我们称之为根(root)。它告诉我们有一个『commands』，并且这些『commands』由单个的『command』组成。正如你所见到
的那样，这是一个标准的递归结构，因为它又再次包含了『commands』。这意味着该程序可以一个个的递减一系列的命令。参见『LEX和YACC内部工
作原理』一章，阅读更多的递归细节。<br><br>第二个规则定义了『command』的内容。我们只假定两种命令。<br><br>一个heat_switch由HEAT标识符组成，它后面跟着一个状态，该状态在LEX中定义，为『on』或『off』。<br><br>target_set稍微有点复杂，它由TARGET标识符、TEMPERATURE以及一个数字组成。<br><br>前面的那个例子只有YACC文件的语法部分，起始在YACC文件中还有其它内容，完整的YACC文件如下：</p><div class="highlight"><pre><code class="language-c"><span class="o">%</span><span class="p">{</span>
<span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;string.h&gt;</span><span class="cp">
</span><span class="cp"></span>
<span class="c1">//在lex.yy.c里定义，会被yyparse()调用。在此声明消除编译和链接错误。
</span><span class="c1"></span><span class="k">extern</span> <span class="kt">int</span> <span class="n">yylex</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span> 

<span class="c1">// 在此声明，消除yacc生成代码时的告警
</span><span class="c1"></span><span class="k">extern</span> <span class="kt">int</span> <span class="nf">yyparse</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span> 

<span class="kt">int</span> <span class="nf">yywrap</span><span class="p">()</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 该函数在y.tab.c里会被调用，需要在此定义
</span><span class="c1"></span><span class="kt">void</span> <span class="nf">yyerror</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">s</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">"[error] %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">s</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
	<span class="n">yyparse</span><span class="p">();</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="o">%</span><span class="p">}</span>

<span class="o">%</span><span class="n">token</span> <span class="n">NUMBER</span> <span class="n">TOKHEAT</span> <span class="n">STATE</span> <span class="n">TOKTARGET</span> <span class="n">TOKTEMPERATURE</span>

<span class="o">%%</span>
<span class="nl">commands</span><span class="p">:</span> <span class="cm">/* empty */</span>
<span class="o">|</span> <span class="n">commands</span> <span class="n">command</span>
<span class="p">;</span>

<span class="nl">command</span><span class="p">:</span> <span class="n">heat_switch</span> <span class="o">|</span> <span class="n">target_set</span> <span class="p">;</span>

<span class="nl">heat_switch</span><span class="p">:</span>
<span class="n">TOKHEAT</span> <span class="n">STATE</span>
<span class="p">{</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">"</span><span class="se">\t</span><span class="s">Heat turned on or off</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
<span class="p">};</span>

<span class="nl">target_set</span><span class="p">:</span>
<span class="n">TOKTARGET</span> <span class="n">TOKTEMPERATURE</span> <span class="n">NUMBER</span>
<span class="p">{</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">"</span><span class="se">\t</span><span class="s">Temperature set</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
<span class="p">};</span>
<span class="o">%%</span></code></pre></div><p data-pid="74LJ8I46"><br>函数yyerror()在YACC发现一个错误的时候被调用，我们只是简单的输出错误信息，但其实还可以做一些更漂亮的事情，参见文档尾的『进阶阅读』部分。<br><br>yywrap()函数用于不断的从一个文件中读取数据，当遇到EOF时，你可以再输入一个文件，然后返回0，你也可以使得其返回1，暗示着输入结束。更多细节，参见『YACC和LEX内部如何工作的？』一章。<br><br>接着，这里有一个main()函数，它基本什么也不做，只是调用一些函数。<br><br>最后一行简单的定义了我将使用的标识符，如果调用YACC时，使用『-d』选项，那么它们会输出到y.tab.h中。<br><br>编译并运行恒温控制器：</p><div class="highlight"><pre><code class="language-basemake">lex example4.l
yacc –d example4.y
cc lex.yy.c y.tab.c –o example4</code></pre></div><p data-pid="ruv_p1dE">在此，情况有所改变，我们现在调用YACC来编译我们的程序，它创建了y.tab.c和y.tab.h. 我接着再调用LEX。 编译时，我们去除了『-ll』编译选项，因为此时我们有了自己的main()函数，并不需要libl来提供。<br><br>注意：如果在编译过程中报错说找不到『yylval』，那么在example4.l的#include &lt;y.tab.h&gt;下面加上：</p><div class="highlight"><pre><code class="language-c"><span class="k">extern</span> <span class="n">YYSTYPE</span> <span class="n">yylval</span><span class="err">；</span></code></pre></div><p data-pid="J9kS908m">具体细节在『LEX和YACC内部工作原理』中解说。<br><br>一个简单的会话：</p><div class="highlight"><pre><code class="language-text">$ ./example4
heat on
Heat turned on or off
heat off
Heat turned on or off
target temperature 10
Temperature set
target humidity 20
error: parse error
$</code></pre></div><h3 id="h_143867739_8" data-into-catalog-status="">4.2 扩展恒温器，使得其可以接受参数</h3><p data-pid="hal-hPOa">我们已经可以正确的解析温度计命令了，并且能对一些错误做标记。但也许一些狡猾的人会猜疑说，该解析器并不知道你应该做什么，也没有处理一些你输入的数值。<br><br>让我们来添加能读取新的温度参数的功能。为达到此目的，我们得知道LEX中的NUMBER匹配要转化成一个数值，然后才能为YACC所接收.<br><br>每当LEX匹配到了一个目标字串，它就将该匹配文本赋值给『yytext』，YACC则依次在『yylval』中来查找一个值，在example5中，我们可以得到一个明晰的方案：</p><div class="highlight"><pre><code class="language-c"><span class="o">%</span><span class="p">{</span>
<span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">"y.tab.h"</span><span class="cp">
</span><span class="cp"></span><span class="o">%</span><span class="p">}</span>

<span class="o">%%</span>
<span class="p">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span><span class="o">+</span> <span class="n">yylval</span> <span class="o">=</span> <span class="n">atoi</span><span class="p">(</span><span class="n">yytext</span><span class="p">);</span> <span class="k">return</span> <span class="n">NUMBER</span><span class="p">;</span>
<span class="n">heat</span> <span class="k">return</span> <span class="n">TOKHEAT</span><span class="p">;</span>
<span class="n">on</span><span class="o">|</span><span class="n">off</span> <span class="n">yylval</span> <span class="o">=</span> <span class="o">!</span><span class="n">strcmp</span><span class="p">(</span><span class="n">yytext</span><span class="p">,</span> <span class="s">"on"</span><span class="p">);</span> <span class="k">return</span> <span class="n">STATE</span><span class="p">;</span>
<span class="n">target</span> <span class="k">return</span> <span class="n">TOKTARGET</span><span class="p">;</span>
<span class="n">temperature</span> <span class="k">return</span> <span class="n">TOKTEMPERATURE</span><span class="p">;</span>
<span class="err">\</span><span class="n">n</span> <span class="cm">/* ignore end of line */</span>
<span class="p">[</span> <span class="err">\</span><span class="n">t</span><span class="p">]</span><span class="o">+</span> <span class="cm">/* ignore whitespace */</span>
<span class="o">%%</span></code></pre></div><p data-pid="uh5jQi1g"><br>如你所见，我们在yytext中用了atoi()，并将结果存储在yylval中，使得YACC可以『看见』它。 同理，我们再处理STATE匹配，将其与『on』比较，若想等，则将yylval设置为1。<br><br>接下来，我们就得考察YACC如何来应对。我们来看看新的temperature target规则设置：</p><div class="highlight"><pre><code class="language-c"><span class="nl">target_set</span><span class="p">:</span>
<span class="n">TOKTARGET</span> <span class="n">TOKTEMPERATURE</span> <span class="n">NUMBER</span>
<span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"</span><span class="se">\t</span><span class="s">Temperature set to %d</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="err">$</span><span class="mi">3</span><span class="p">);</span>
<span class="p">};</span></code></pre></div><p data-pid="y5NHT1f-">为得到规则中第三部分的值(NUMBER)，我们用『$3』来表示，每次yylex()返回时，yylval的值便依附到了终结符上，其值可以通过『$-常数』来获取。<br><br>为更进一步加深理解，我们来看『heat_switch』规则：</p><div class="highlight"><pre><code class="language-c"><span class="nl">heat_switch</span><span class="p">:</span>
<span class="n">TOKHEAT</span> <span class="n">STATE</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="err">$</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"</span><span class="se">\t</span><span class="s">Heat turned on</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
    <span class="k">else</span>
        <span class="nf">printf</span><span class="p">(</span><span class="s">"</span><span class="se">\t</span><span class="s">Heat turned off</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
<span class="p">}</span></code></pre></div><p data-pid="lIb3skpJ">如果现在运行example5，它将输出你所输入的数据。</p><h3 id="h_143867739_9" data-into-catalog-status="">4.3 解析一个配置文件</h3><p data-pid="MofD4If1">让我们再次回顾先前提到的那个配置文件：</p><div class="highlight"><pre><code class="language-nginx"><span class="k">zone</span> <span class="s">"./www"</span> <span class="p">{</span>
	<span class="kn">type</span> <span class="s">hint</span><span class="p">;</span>
	<span class="kn">name</span> <span class="s">foo</span><span class="p">;</span>
	<span class="kn">hello</span> <span class="s">"/hello/world"</span><span class="p">;</span>
	<span class="kn">file</span> <span class="s">"/etc/bind/db.root"</span><span class="p">;</span>
<span class="p">}</span>;</code></pre></div><p data-pid="e-Q9rEae">之前我们已经将LEX文件写好了，接下来只需要编写YACC语法文件，并且对词法分析器做一些修改，使得其可以返回一些值给YACC。<br>example6中的词法分析器如下：</p><div class="highlight"><pre><code class="language-c"><span class="o">%</span><span class="p">{</span>
<span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span><span class="cp">#define YYSTYPE char *
</span><span class="cp"></span><span class="k">extern</span> <span class="n">YYSTYPE</span> <span class="n">yylval</span><span class="p">;</span> <span class="c1">// 必须放在#include "y.tab.h"前面
</span><span class="c1"></span><span class="cp">#include</span> <span class="cpf">"y.tab.h"</span><span class="cp">
</span><span class="cp"></span><span class="o">%</span><span class="p">}</span>
<span class="o">%%</span>
<span class="n">zone</span> <span class="k">return</span> <span class="n">ZONETOK</span><span class="p">;</span>
<span class="n">file</span> <span class="k">return</span> <span class="n">FILETOK</span><span class="p">;</span>
<span class="p">[</span><span class="n">a</span><span class="o">-</span><span class="n">zA</span><span class="o">-</span><span class="n">Z</span><span class="p">][</span><span class="n">a</span><span class="o">-</span><span class="n">zA</span><span class="o">-</span><span class="n">Z0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span><span class="o">*</span> <span class="n">yylval</span> <span class="o">=</span> <span class="n">strdup</span><span class="p">(</span><span class="n">yytext</span><span class="p">);</span> <span class="k">return</span> <span class="n">WORD</span><span class="p">;</span>
<span class="p">[</span><span class="n">a</span><span class="o">-</span><span class="n">zA</span><span class="o">-</span><span class="n">Z0</span><span class="o">-</span><span class="mi">9</span><span class="err">\</span><span class="o">/</span><span class="p">.</span><span class="o">-</span><span class="p">]</span><span class="o">+</span> <span class="n">yylval</span> <span class="o">=</span> <span class="n">strdup</span><span class="p">(</span><span class="n">yytext</span><span class="p">);</span> <span class="k">return</span> <span class="n">FILENAME</span><span class="p">;</span>
<span class="err">\</span><span class="s">" return QUOTE;</span>
<span class="err">\</span><span class="p">{</span> <span class="k">return</span> <span class="n">OBRACE</span><span class="p">;</span>
<span class="err">\</span><span class="p">}</span> <span class="k">return</span> <span class="n">EBRACE</span><span class="p">;</span>
<span class="p">;</span> <span class="k">return</span> <span class="n">SEMICOLON</span><span class="p">;</span>
<span class="p">[</span> <span class="err">\</span><span class="n">t</span><span class="p">]</span><span class="o">+</span> <span class="cm">/* ignore whitespace */</span><span class="p">;</span>
<span class="err">\</span><span class="n">n</span> <span class="cm">/* ignore EOL */</span><span class="p">;</span>
<span class="o">%%</span></code></pre></div><p data-pid="Sp5tt_K8"><br>细心的话，你会发现yylval已经改变了！我们不再认为它是一个整数，而是假定为一个char*类型数据。为保持简单性，我们调用strdup并因此耗费了很多内存。但这并不影响你解析这个文件。<br><br>我们需要保存字符串的值，在此我们处理的都是一些命名，文件名以及区域命。在下一章，我们将解说如何对付一些复杂类型的数据。<br><br>为通知YACC关于yylval的新类型，我们在YACC的语法文件中添加一行：</p><div class="highlight"><pre><code class="language-cpp"><span class="cp">#define YYSTYPE char *
</span></code></pre></div><p data-pid="6D9NJFuj">下面是完整的YACC文件，语法比较复杂，建议结合代码画AST树来帮助理解（原文这里的代码有不少问题，下面是修正后的代码，对语法也简化了一点点）：</p><div class="highlight"><pre><code class="language-c"><span class="o">%</span><span class="p">{</span>
<span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;string.h&gt;</span><span class="cp">
</span><span class="cp"></span>
<span class="cp">#define YYSTYPE char *
</span><span class="cp"></span><span class="k">extern</span> <span class="n">YYSTYPE</span> <span class="n">yylval</span><span class="p">;</span>
<span class="c1">//int yydebug = 1; // debug
</span><span class="c1"></span>
<span class="k">extern</span> <span class="kt">int</span> <span class="nf">yylex</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="nf">yyparse</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="kt">int</span> <span class="nf">yywrap</span><span class="p">()</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">yyerror</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">s</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">"[error] %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">s</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
	<span class="n">yyparse</span><span class="p">();</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="o">%</span><span class="p">}</span>

<span class="o">%</span><span class="n">token</span> <span class="n">SEMICOLON</span> <span class="n">ZONETOK</span> <span class="n">OBRACE</span> <span class="n">EBRACE</span> <span class="n">QUOTE</span> <span class="n">FILENAME</span> <span class="n">WORD</span> <span class="n">FILETOK</span>

<span class="o">%%</span>
<span class="nl">commands</span><span class="p">:</span>
<span class="o">|</span> <span class="n">commands</span> <span class="n">command</span> <span class="n">SEMICOLON</span>
<span class="p">;</span>

<span class="nl">command</span><span class="p">:</span>
<span class="n">zone_set</span>
<span class="p">;</span>

<span class="nl">zone_set</span><span class="p">:</span>
<span class="n">ZONETOK</span> <span class="n">quotedname</span> <span class="n">zonecontent</span>
<span class="p">{</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">"Complete zone for '%s' found</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="err">$</span><span class="mi">2</span><span class="p">);</span>
<span class="p">};</span>

<span class="nl">zonecontent</span><span class="p">:</span>
<span class="n">OBRACE</span> <span class="n">zonestatements</span> <span class="n">EBRACE</span>
<span class="p">;</span>

<span class="nl">quotedname</span><span class="p">:</span>
<span class="n">QUOTE</span> <span class="n">FILENAME</span> <span class="n">QUOTE</span>
<span class="p">{</span>
	<span class="err">$$</span> <span class="o">=</span> <span class="err">$</span><span class="mi">2</span><span class="p">;</span>
<span class="p">};</span>

<span class="nl">zonestatements</span><span class="p">:</span>
<span class="o">|</span> <span class="n">zonestatements</span> <span class="n">zonestatement</span> <span class="n">SEMICOLON</span>
<span class="p">;</span>

<span class="nl">zonestatement</span><span class="p">:</span>
<span class="n">statements</span> <span class="o">|</span> <span class="n">FILETOK</span> <span class="n">quotedname</span>
<span class="p">{</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">"A zonefile name '%s' was encountered</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="err">$</span><span class="mi">2</span><span class="p">);</span>
<span class="p">};</span>

<span class="nl">statements</span><span class="p">:</span>
<span class="o">|</span> <span class="n">WORD</span> <span class="n">statement</span>
<span class="p">{</span>
	<span class="err">$$</span> <span class="o">=</span> <span class="err">$</span><span class="mi">2</span><span class="p">;</span> <span class="c1">// seems unnecessary
</span><span class="c1"></span>	<span class="n">printf</span><span class="p">(</span><span class="s">"statements, key: %s, value: %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="err">$</span><span class="mi">1</span><span class="p">,</span> <span class="err">$</span><span class="mi">2</span><span class="p">);</span>
<span class="p">};</span>

<span class="nl">statement</span><span class="p">:</span>
<span class="n">WORD</span> <span class="o">|</span> <span class="n">quotedname</span>
<span class="p">;</span>

<span class="o">%%</span>
</code></pre></div><p data-pid="A8mfUTI5"><br>我们执行example6的输出文件：</p><div class="highlight"><pre><code class="language-bash"><span class="c1"># 将配置文件的内容保存到sample.conf文件中，方便测试</span>
$ cat sample.conf <span class="p">|</span> ./example6</code></pre></div><p data-pid="QRYI-zId"><br>输出为：</p><div class="highlight"><pre><code class="language-text">   statements, key: type, value: hint
statements, key: name, value: foo
statements, key: hello, value: /hello/world
 A zonefile name '/etc/bind/db.root' was encountered
Complete zone for './www' found</code></pre></div><h2 id="h_143867739_10" data-into-catalog-status="">五、生成C++代码的解析器</h2><p data-pid="QSlvKILc">虽然LEX和YACC的历史要早于C++，但是还是可以用它们来生成一个C++解析器。但我们用LEX来生成C++的词法分析器，YACC并不知道如何直接来处理这些，所以我们不打算这么做。<br><br>我认为比较好的做法是，要做一个C++解析器，就需要LEX生成一个C文件，并且让YACC来生成C++代码。但当你这么做的时候，在这个过程中你将会遇到问题，因为C++代码默认情况下并不能找到C的函数，除非你将那些函数定义为extern “C”。<br><br>为达此目的，我们在YACC代码中编写一个C开头：</p><div class="highlight"><pre><code class="language-c"><span class="k">extern</span> <span class="err">“</span><span class="n">C</span><span class="err">”</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">yyparse</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
    <span class="kt">int</span> <span class="nf">yylex</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
    <span class="kt">int</span> <span class="nf">yywrap</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div><p data-pid="9REAoLns">如果你想声明并改变yydebug函数，你得这样做：</p><div class="highlight"><pre><code class="language-c"><span class="k">extern</span> <span class="kt">int</span> <span class="n">yydebug</span><span class="p">;</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">yydebug</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">yyparse</span><span class="p">();</span>
<span class="p">}</span></code></pre></div><p data-pid="glIITfEm">这是因为C++中的一个关于定义的规则，即不允许yydebug的多处定义。<br><br>你还可能发现，你需要在你的LEX文件中重复#define YYSTYPE，这是由于C++中严格的类型检查(机制)造成的。<br><br>按照如下方式来编译：</p><div class="highlight"><pre><code class="language-basemake"># Makefile
example_cpp:
	lex -o $@.yy.c $@.lex
	cc -c $@.yy.c -o $@.yy.o
	yacc -dtv $@.yy -o $@.cpp
	g++ $@.yy.o $@.cpp -o $@.out</code></pre></div><p data-pid="D5xEDtSZ">由于-o选项的存在，y.tab.h现在变成example_cpp.hpp，记住这点。<br><br>总结： 不要自寻烦恼的在C++中编译你的词法分析器，让它呆在C的领地里。在C++中编写解析器时，(也得)确保向编译器解释清楚，即你的C函数都有一个extern “C”声明。</p><h2 id="h_143867739_11" data-into-catalog-status="">六、Lex和YACC内部工作原理</h2><p data-pid="GAatPNhv">在YACC文件中，你定义了你自己的main()函数，它在某个点上调用了yyparse()。YACC会创建你的yyparse()函数，并在y.tab.c中结束该函数。<br><br>yyparse()函数读取一个『标识符/值对』(token/value pairs)流，这些流需要事先就提供，这些流可以是你自己手写的代码提供的，也可以是LEX生成的。在我们的示例中，我们把这个工作丢给了LEX。<br><br>LEX
生成的yylex()函数从文件参数FILE 
*file中读取字符(文件名为yyin)。如果不设置成yyin，则默认为标准输入，它会输出到yyout中，如果不加设置，就是stdout。你可以
在yywrap()函数中修改位于文件尾的yyin.yywrap()函数。这些修改使得你可以打开另一些文件，并继续解析。<br><br>如果是这种情况，那么就让yywrap()返回0，如果你想在该文件上结束解析，就让它返回1。<br><br>每次yylex()调用都会返回一个整数值，该值代表了一个标识符类型(token type)。它告诉YACC，已经读取了这种标识符。该标识符可以有一个值，它应该存放在yylval变量中。<br><br>yylval的默认类型为int，但是你可以修改其类型，通过在YACC文件中#define YYSTYPE。<br><br>词
法分析器需要能够访问yylval，为达到此效果，(yylval)必须在词法分析器(lexer)中被声明为一个外部变量(extern 
variable)。原来的YACC忽略了这点，并没有为你干这项工作，所以，你必须添加以下代码到你的词法分析器中，就在#include 
&lt;y.tab.h&gt;下面：</p><div class="highlight"><pre><code class="language-c"><span class="k">extern</span> <span class="n">YYSTYPE</span> <span class="n">yylval</span><span class="p">;</span></code></pre></div><p data-pid="exPgTA7T">当今多数人使用的Bison已经为你把这事自动做好了。</p><h3 id="h_143867739_12" data-into-catalog-status="">6.1 标识符的值(token values)</h3><p data-pid="DvCm6rHB">在前面我已经说过，yylex()需要返回它遇到了一个什么标识符类型，并将其值存储在yylval中。当这些标识符在%token命令中定义时，它们就被赋予了一些数字ID，从256开始。<br><br>由于这个事实，(我们)可以将所有的ascii字符当作标识符。假定你要写一个计算器，到现在为止，我们可能已经这样写了其词法分析器：</p><div class="highlight"><pre><code class="language-c"><span class="p">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span><span class="o">+</span> <span class="n">yylval</span> <span class="o">=</span> <span class="n">atoi</span><span class="p">(</span><span class="n">yytext</span><span class="p">);</span> <span class="k">return</span> <span class="n">NUMBER</span><span class="p">;</span>
<span class="p">[</span> <span class="err">\</span><span class="n">n</span><span class="p">]</span><span class="o">+</span> <span class="cm">/* eat whitespace */</span>
<span class="o">-</span> <span class="k">return</span> <span class="n">MINUS</span><span class="p">;</span>
<span class="err">\</span><span class="o">*</span> <span class="k">return</span> <span class="n">MULT</span><span class="p">;</span>
<span class="err">\</span><span class="o">+</span> <span class="k">return</span> <span class="n">PLUS</span><span class="p">;</span>
<span class="err">…</span></code></pre></div><p data-pid="EUVVqSKf">YACC文件可能是这样：</p><div class="highlight"><pre><code class="language-c"><span class="nl">exp</span> <span class="p">:</span> <span class="n">NUMBER</span>
<span class="o">|</span> <span class="n">exp</span> <span class="n">PLUS</span> <span class="n">exp</span>
<span class="o">|</span> <span class="n">exp</span> <span class="n">MINUS</span> <span class="n">exp</span>
<span class="o">|</span> <span class="n">exp</span> <span class="n">MULT</span> <span class="n">exp</span>
<span class="err">…</span></code></pre></div><p data-pid="yNBl1oQK">没有必要弄这么复杂。用字符作为速记法来作为标识符的数字ID，我们可以这样来重写我们的词法分析器：</p><div class="highlight"><pre><code class="language-c"><span class="p">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span><span class="o">+</span> <span class="n">yylval</span> <span class="o">=</span> <span class="n">atoi</span><span class="p">(</span><span class="n">yytext</span><span class="p">);</span> <span class="k">return</span> <span class="n">NUMBER</span><span class="p">;</span>
<span class="p">[</span> <span class="err">\</span><span class="n">n</span><span class="p">]</span><span class="o">+</span> <span class="cm">/* eat whitespace */</span>
<span class="p">.</span> <span class="k">return</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="n">yytext</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span></code></pre></div><p data-pid="a-wDGY8T">最后一行匹配任何的单个字符，否则就是不匹配字符。<br><br>而YACC的语法文件则是这样:</p><div class="highlight"><pre><code class="language-c"><span class="nl">exp</span> <span class="p">:</span> <span class="n">NUMBER</span>
<span class="o">|</span> <span class="n">exp</span> <span class="sc">'+'</span> <span class="n">exp</span>
<span class="o">|</span> <span class="n">exp</span> <span class="sc">'-'</span> <span class="n">exp</span>
<span class="o">|</span> <span class="n">exp</span> <span class="sc">'*'</span> <span class="n">exp</span></code></pre></div><p data-pid="X9vMIjVP">这样更加简短而直观，你就不必在文件头用%token来定义那些ascii字符了。<br>另一方面，这样构造还有一些好处，它可以匹配所有丢给它的东西，而避免了将那些不匹配的输入输出到标准输出的默认行为。如果用户在当前计算器上输入一个’^’字符，将会导致一个解析错误，而不是将其输出到标准输出中。</p><h3 id="h_143867739_13" data-into-catalog-status="">6.2 递归：’right is wrong’</h3><p data-pid="fyDvg8Kb">递归是YACC一个极其重要的特性。没有递归的话，你就确定一个文件是由一系列独立的命令组成还是由语句组成。由于YACC自身的特性，它只对第一个规则或那个你将其设计为『起始规则』的规则感兴趣。起始规则用’%start’符号标记。<br><br>YACC中的递归以两种形式出现，左递归和右递归。左递归是你应该经常使用的，它们看起来如下：</p><div class="highlight"><pre><code class="language-text">commands ： /* empty */
| commands command</code></pre></div><p data-pid="ZqVVG-M0"><br>这是在说，一个command要么为空，要么它包含了更多的commands，后面再跟一个command。YACC的这种工作方式意味着它现在可以轻易的剔除单个的command群并一步步简化(处理)。<br>拿上面的例子和下面的右递归做比较：</p><div class="highlight"><pre><code class="language-text">commands : /* empty */
| command commands</code></pre></div><p data-pid="nlGAXf75">但是这样做开销有点大，如
果(commands)是%start规则(即起始规则)，那么YACC会将所有的commands保存在你的栈数据中(file on the 
stack)，这将耗费大量内存。所以，在解析长的语句时，务必使用左递归，例如整个文件。但有时难以避免右递归，不过，如果你的语句并不太长，你就没有
必要越轨使用左递归。<br><br>如果你有一些东西来终结(因此而分割)你的commands，右递归就非常适合了，但开销还是有点大:</p><div class="highlight"><pre><code class="language-text">commands : /* empty */
| command SEMICOLON commands</code></pre></div><p data-pid="YYpyfku9">正确的做法是使用左递归(这也不是我发明的)：</p><div class="highlight"><pre><code class="language-text">commands : /* empty */
| commands command SEMICOLON</code></pre></div><p data-pid="-Uy2XNzF">本文档的早期版本错误的使用了右递归。Markus Triska友好的提示我们这点(错误)。</p><h3 id="h_143867739_14" data-into-catalog-status="">6.3 高级yylval: %union</h3><p data-pid="9FlIcupY">现在，我们需要定义yylval的类型。但是这并不一直恰如其当。我们可能会多次这样做，因为需要处理多种数据类型。回到我们假定的那个恒温器，可能你想选择控制一个加热器，例如：</p><div class="highlight"><pre><code class="language-text">heater mainbuilding
Selected ‘mainbuilding’ heater
Target temperature 23
‘mainbuilding’ heater target temperature now 23</code></pre></div><p data-pid="x3ZMngvn">这样的话，就要求yylval是一个union，它可以存储字符串，也可以存储整数，但并不是同时存储。<br>回忆之前我们讲过，我们提前通知YACC哪种yylval类型会要处理是通过定义YYSTYPE来实现。同样，我们可以定义YYSTYPE为一个union，YACC中有一种简便的方法来实现，即%union语句。<br><br>在example4基础上，我编写example7的YACC语法：</p><div class="highlight"><pre><code class="language-c"><span class="o">%</span><span class="n">token</span> <span class="n">TOKHEATER</span> <span class="n">TOKHEAT</span> <span class="n">TOKTARGET</span> <span class="n">TOKTEMERATURE</span>
<span class="o">%</span><span class="k">union</span>
<span class="p">{</span>
<span class="kt">int</span> <span class="n">number</span><span class="p">;</span>
<span class="kt">char</span> <span class="o">*</span><span class="n">string</span><span class="p">;</span>
<span class="p">}</span>
<span class="o">%</span><span class="n">token</span> <span class="o">&lt;</span><span class="n">number</span><span class="o">&gt;</span> <span class="n">STATE</span>
<span class="o">%</span><span class="n">token</span> <span class="o">&lt;</span><span class="n">number</span><span class="o">&gt;</span> <span class="n">NUMBER</span>
<span class="o">%</span><span class="n">token</span> <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">WORD</span></code></pre></div><p data-pid="ow17v5tj">我们定义了union，它只包含一个整数和一个字符串。接着使用了一个扩展的%token语法，我们向YACC解释了应该获取union哪个部分的标识符。<br>在本例中，我们让STATE标识符用一个整数(来表示)，这跟之前一样。NUMBER同理，我们之前用来读取温度。<br>但是WORD有所改变，它声明为需要一个字符串。<br>词法解析器文件有所改变：</p><div class="highlight"><pre><code class="language-c"><span class="o">%</span><span class="p">{</span>
<span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">"y.tab.h"</span><span class="cp">
</span><span class="cp"></span><span class="o">%</span><span class="p">}</span>

<span class="o">%%</span>

<span class="p">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span><span class="o">+</span> <span class="n">yylval</span><span class="p">.</span><span class="n">number</span><span class="o">=</span><span class="n">atoi</span><span class="p">(</span><span class="n">yytext</span><span class="p">);</span> <span class="k">return</span> <span class="n">NUMBER</span><span class="p">;</span>
<span class="n">heater</span> <span class="k">return</span> <span class="n">TOKHEATER</span><span class="p">;</span>
<span class="n">heat</span> <span class="k">return</span> <span class="n">TOKHEAT</span><span class="p">;</span>
<span class="n">on</span><span class="o">|</span><span class="n">off</span> <span class="n">yylval</span><span class="p">.</span><span class="n">number</span> <span class="o">=!</span> <span class="n">strcmp</span><span class="p">(</span><span class="n">yytext</span><span class="p">,</span><span class="s">"on"</span><span class="p">);</span> <span class="n">returnSTATE</span><span class="p">;</span>
<span class="n">target</span> <span class="k">return</span> <span class="n">TOKTARGET</span><span class="p">;</span>
<span class="n">temperature</span> <span class="k">return</span> <span class="n">TOKTEMPERATURE</span><span class="p">;</span>
<span class="p">[</span><span class="n">a</span><span class="o">-</span><span class="n">z0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span><span class="o">+</span> <span class="n">yylval</span><span class="p">.</span><span class="n">string</span> <span class="o">=</span> <span class="n">strdup</span><span class="p">(</span><span class="n">yytext</span><span class="p">);</span> <span class="k">return</span> <span class="n">WORD</span><span class="p">;</span>
<span class="err">\</span><span class="n">n</span> <span class="cm">/* ignore end of line */</span>
<span class="p">[</span> <span class="err">\</span><span class="n">t</span><span class="p">]</span><span class="o">+</span> <span class="cm">/* ignore whitespace */</span>

<span class="o">%%</span></code></pre></div><p data-pid="o222Dwzx">正如你所见，我们不再直接访问yylval，我们添加了一个后缀来说明我们要访问那个部分。我们不再需要在YACC语法文件中来干这个工作，YACC在这里耍了下魔法：</p><div class="highlight"><pre><code class="language-c"><span class="nl">heater_select</span><span class="p">:</span>
<span class="n">TOKHEATER</span> <span class="n">WORD</span>
<span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"</span><span class="se">\t</span><span class="s">Selected heater '%s'</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="err">$</span><span class="mi">2</span><span class="p">);</span>
    <span class="n">heater</span> <span class="o">=</span> <span class="err">$</span><span class="mi">2</span><span class="p">;</span>
<span class="p">};</span></code></pre></div><p data-pid="zu7SRki5">由于上面的%token声明，YACC自动选择了union中的’string’成员。注意这里$2中存储的一份拷贝，在后面它会告诉用户发送命令到哪个heater（需要在C文件头定义char *heater）：</p><div class="highlight"><pre><code class="language-c"><span class="nl">target_set</span><span class="p">:</span>
<span class="n">TOKTARGET</span> <span class="n">TOKTEMPERATURE</span> <span class="n">NUMBER</span>
<span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"</span><span class="se">\t</span><span class="s">Heater '%s' temperature set to %d</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> 
            <span class="n">heater</span><span class="p">,</span> <span class="err">$</span><span class="mi">3</span><span class="p">);</span>
<span class="p">};</span></code></pre></div><h3 id="h_143867739_15" data-into-catalog-status="">6.4 自定义YY_INPUT指向字符串而非标准输入</h3><p data-pid="Orlovwky">很多情况下，我们不希望从标准输入解析，而希望解析给定的字符串。实现方法是自定义实现YY_INPUT，具体做法如下：</p><div class="highlight"><pre><code class="language-c"><span class="cm">/* LEX 文件 */</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="nf">lex_custom_input</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span> <span class="n">buf</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="o">*</span><span class="n">num_read</span><span class="p">,</span><span class="kt">int</span> <span class="n">max_read</span><span class="p">);</span>
<span class="cp">#undef YY_INPUT
</span><span class="cp">#define YY_INPUT(b,r,s) lex_custom_input(b,&amp;r,s)
</span><span class="cp"></span>
<span class="cm">/* C 文件 */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="n">g_read_offset</span><span class="p">;</span>
<span class="cp">#define MAX_TEXT_LEN 1024
</span><span class="cp"></span><span class="k">static</span> <span class="kt">char</span> <span class="n">s_text_buf</span><span class="p">[</span><span class="n">MAX_TEXT_LEN</span><span class="p">];</span>

<span class="kt">int</span> <span class="nf">lex_custom_input</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span> <span class="n">buf</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="o">*</span><span class="n">num_read</span><span class="p">,</span><span class="kt">int</span> <span class="n">max_read</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">num_to_read</span> <span class="o">=</span> <span class="n">max_read</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">remain</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">s_text_buf</span><span class="p">)</span> <span class="o">-</span> <span class="n">g_read_offset</span><span class="p">;</span>

    <span class="n">num_to_read</span> <span class="o">=</span> <span class="n">num_to_read</span><span class="o">&gt;</span><span class="n">remain</span> <span class="o">?</span> <span class="nl">reamin</span><span class="p">:</span><span class="n">num_to_read</span><span class="p">;</span>
    <span class="n">memcpy</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="n">s_text_buf</span> <span class="o">+</span> <span class="n">g_read_offset</span><span class="p">,</span> <span class="n">num_to_read</span><span class="p">);</span>

    <span class="o">*</span><span class="n">num_read</span> <span class="o">=</span> <span class="n">num_to_read</span><span class="p">;</span>
    <span class="n">g_read_offset</span> <span class="o">+=</span> <span class="n">num_to_read</span><span class="p">;</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></div><h2 id="h_143867739_16" data-into-catalog-status="">七、调试</h2><p data-pid="0yhhMMmN">YACC中有许多调试反馈信息。这些调试信息的代价有点高，所以你需要提供一些开关来打开它。<br><br>当调试你的语法时，在YACC命令行中添加—debug和—verbose选项，在你的C文件头中添加以下语句：</p><div class="highlight"><pre><code class="language-c"><span class="kt">int</span> <span class="n">yydebug</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span></code></pre></div><p data-pid="vtSayjJp"><br>这将生成一个y.output文件，其中说明了所创建的那个状态机。<br>当你运行那个生成的二进制文件，它将输出很多运行时信息。里面包含当前所运行的状态机以及读取到的一些标识符。<br><br>Peter Jinks写了一篇关于调试的文章，他在其中讲述了一些常见得错误以及如何修正这些错误。</p><h3 id="h_143867739_17" data-into-catalog-status="">7.1 状态机</h3><p data-pid="-8X3be0x">YACC解析器在内部运行的是一个『状态机』，该状态机可以有多种转台。接着有多个规则来管制状态间的相互转化。任何内容都是从『root』规则开始。<br><br>在example7的y.output文件中：</p><div class="highlight"><pre><code class="language-text">state 0
ZPONETOK , and go to state 1
$default reduce using rule 1 (commands)
commands go to state 29
command go to state 2
zone_set go to satte 3</code></pre></div><p data-pid="L0Wvnw24">默认情形下，这个状态机从『commands』规则开始递减演化，这也是我们之前的那个递归规则，它定义了『commands』并从单个的『command』进行构造，后面跟着一个分号，然后可能再跟着更多的『commands』。<br><br>这个状态机不断递减演化，直到它遇到某些它能理解的东西，在本例中，为一个ZONETOK，也即单词『zone』。然后转化到状态1，在此，进一步处理一个zone command:</p><div class="highlight"><pre><code class="language-text">state 1
zone_set -&gt; ZONETOK .quotedname zonecontent (rule 4)
QUOTE , and go to state 4
Quotedname go to state 5</code></pre></div><p data-pid="5lG_Mo77">第一行中有一个『.』，它用来说明我们所处的位置：即刚刚识别到了一个ZONETOK，目前正在寻找一个『quotedname』。显然，一个『quotedname』会以QUOTE开始，它将我们转化到状态4。<br>为进一步跟踪，用在『调试』章节中提到的标志来编译example7。</p><h3 id="h_143867739_18" data-into-catalog-status="">7.2 冲突：『shift/reduce』以及『reduce/reduce』</h3><p data-pid="UyGzfxSj">一旦YACC警告你出现了冲突，那么你的麻烦来了。要解决这些问题显得是一种技巧形式，它会教会很多关于你的语言的东西。比你想知道的要多的多的内容。<br><br>问题萦绕于如何来翻译一系列标识符。假定我们定义了一种语言，它需要接受一下两种命令：</p><div class="highlight"><pre><code class="language-text">delete heater all
delete heater number1</code></pre></div><p data-pid="FaQZU1vs">为达到此目的，我们的语法为：</p><div class="highlight"><pre><code class="language-c"><span class="nl">delete_heaters</span> <span class="p">:</span>
<span class="n">TOKDELETE</span> <span class="n">TOKHEATER</span> <span class="n">mode</span>
<span class="p">{</span>
    <span class="n">Deleteheaters</span><span class="p">(</span><span class="err">$</span><span class="mi">3</span><span class="p">);</span>
<span class="p">}</span>
<span class="nl">mode</span> <span class="p">:</span> <span class="n">WORD</span>
<span class="nl">delete_a_heater</span><span class="p">:</span>
<span class="n">TOKDELETE</span> <span class="n">TOKHEATER</span> <span class="n">WORD</span>
<span class="p">{</span>
    <span class="n">delete</span><span class="p">(</span><span class="err">$</span><span class="mi">3</span><span class="p">);</span>
<span class="p">}</span></code></pre></div><p data-pid="mkFz6e4s"><br>也许你已经嗅到了麻烦的味道。状态机从读取单词『word』开始，接着它根据下一个标识符觉得转换到何种状态。接下来的标识符可以是『mode』，它指定了如何来删除heater，或者是将要删除的heater。<br>然而这里的麻烦是，对于这两个命令，下一个标识符都将是一个WORD。YACC因此也无法决定下一步该干嘛。这回导致一个『reduce/reduce』警告，而下一个警告就是『delete_a_heater』节点在状态转化图中永远也不能达到。<br>这种情况的冲突容易解决(例如，重命名第一个命令为『delete all heater』，或者将『all』作为一个分开的标识符)，但有时，(要解决冲突)却非常困难。 通过『--verbose』参数生成的y.output文件可以提供给你极大的帮助。</p><h2 id="h_143867739_19" data-into-catalog-status="">八、进一步阅读</h2><p data-pid="rOLNbzys">GNU YACC(Bison)有一个非常棒的.info文件，在其中很好的记录了YACC的语法。其中只提到了一次LEX，然而它还是很棒的。你可以用Emacs中那个非常好的『pinfo』工具阅读.info文件。同时，在Bison的主页上可以获得它：<u><a href="https://link.zhihu.com/?target=http%3A//www.gnu.org/software/bison/manual/bison.html" class=" wrap external" target="_blank" rel="nofollow noreferrer">Bison手册</a></u>。<br>FLEX有一个不错的主页。如果你粗略了解了FLEX所作所为，那将是非常有益的。<u><a href="https://link.zhihu.com/?target=http%3A//www.gnu.org/manual/flex/" class=" wrap external" target="_blank" rel="nofollow noreferrer">FLEX的手册</a></u>也可以联机获取。<br>在这些关于YACC和LEX的介绍之后，你可能觉得你想需要更多的信息。下面的书籍我们都还没有阅读，但他们听起来不错：</p><ul><li data-pid="iChC8Td1">《Bison—The Yacc-Compitible Parser Generator》——Charles Donnelly &amp;&amp; Richard Stallman.</li><li data-pid="bAN8s3Xl">《Lex &amp; Yacc》——John R. Levine, Tony Mason ,Doug Brown.</li><li data-pid="oACIu7G6">《Compilers: Principles, Techniques, and Tools》——By Alfred V.Aho,Ravi</li></ul><p class="ztext-empty-paragraph"><br></p><p data-pid="Xe-ZlcuF">原文：<a href="https://link.zhihu.com/?target=https%3A//www.cnblogs.com/hdk1993/p/4922866.html" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://www.</span><span class="visible">cnblogs.com/hdk1993/p/4</span><span class="invisible">922866.html</span><span class="ellipsis"></span></a> </p><p data-pid="dbtykddD">注：</p><p data-pid="-bm48k4R">1）修正了原文中有问题的代码；</p><p data-pid="grXWUha0">2）补充了YY_INPUT等内容。</p></div></div></div><div role="button" tabindex="0" class="ContentItem-time">编辑于 2021-11-27 22:44</div><div class="Post-topicsAndReviewer"><div class="TopicList Post-Topics"><div class="Tag Topic" data-za-detail-view-path-module="TopicItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Topic&quot;,&quot;token&quot;:&quot;20660281&quot;}}}"><span class="Tag-content"><a class="TopicLink" href="https://www.zhihu.com/topic/20660281" target="_blank"><div class="Popover"><div id="Popover1-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover1-content">lex</div></div></a></span></div><div class="Tag Topic" data-za-detail-view-path-module="TopicItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Topic&quot;,&quot;token&quot;:&quot;19843902&quot;}}}"><span class="Tag-content"><a class="TopicLink" href="https://www.zhihu.com/topic/19843902" target="_blank"><div class="Popover"><div id="Popover2-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover2-content">词法分析</div></div></a></span></div><div class="Tag Topic" data-za-detail-view-path-module="TopicItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Topic&quot;,&quot;token&quot;:&quot;19601369&quot;}}}"><span class="Tag-content"><a class="TopicLink" href="https://www.zhihu.com/topic/19601369" target="_blank"><div class="Popover"><div id="Popover3-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover3-content">编译原理</div></div></a></span></div></div></div><div><div class="Sticky RichContent-actions is-fixed is-bottom" style="width: 690px; bottom: 0px; left: 573px;"><div class="ContentItem-actions" data-za-detail-view-path-module="BottomBar" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Post&quot;,&quot;id&quot;:&quot;143867739&quot;}}}"><span><button aria-label="赞同 142 " aria-live="polite" type="button" class="Button VoteButton VoteButton--up"><span style="display:inline-flex;align-items:center">​<svg width="10" height="10" viewBox="0 0 24 24" data-new-api="AgreeFill24" data-old-api="TriangleUp" class="Zi Zi--TriangleUp VoteButton-TriangleUp" fill="currentColor"><path d="M13.792 3.681c-.781-1.406-2.803-1.406-3.584 0l-7.79 14.023c-.76 1.367.228 3.046 1.791 3.046h15.582c1.563 0 2.55-1.68 1.791-3.046l-7.79-14.023z" fill-rule="evenodd" clip-rule="evenodd"></path></svg></span>赞同 142</button><button aria-label="反对" aria-live="polite" type="button" class="Button VoteButton VoteButton--down"><span style="display:inline-flex;align-items:center">​<svg width="10" height="10" viewBox="0 0 24 24" data-new-api="OpposeFill24" data-old-api="TriangleDown" class="Zi Zi--TriangleDown" fill="currentColor"><path d="M13.792 20.319c-.781 1.406-2.803 1.406-3.584 0L2.418 6.296c-.76-1.367.228-3.046 1.791-3.046h15.582c1.563 0 2.55 1.68 1.791 3.046l-7.79 14.023z" fill-rule="evenodd" clip-rule="evenodd"></path></svg></span></button></span><div><button type="button" class="Button BottomActions-CommentBtn Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg width="1.2em" height="1.2em" viewBox="0 0 24 24" data-new-api="ChatBubbleFill24" data-old-api="Comment" class="Zi Zi--Comment Button-zi" fill="currentColor"><path d="M11.982 3C17.211 3 21 7.271 21 12.014c0 1.514-.441 3.072-1.215 4.496a.946.946 0 00-.063.813l.603 2.018c.135.487-.279.847-.738.703l-1.818-.54c-.495-.163-.882.044-1.341.324C15.114 20.602 13.476 21 12 21c-4.464 0-9-3.452-9-9.014C3 7.19 6.87 3 11.982 3z"></path></svg></span>5 条评论</button></div><div class="Popover ShareMenu"><div class="ShareMenu-toggler" id="Popover4-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover4-content"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg width="1.2em" height="1.2em" viewBox="0 0 24 24" data-new-api="PaperplaneFill24" data-old-api="Share" class="Zi Zi--Share Button-zi" fill="currentColor"><path d="M20.223 1.881a.8.8 0 011.205.778l-1.874 16.393a.9.9 0 01-1.204.742l-4.617-1.692a.7.7 0 00-.83.28l-1.929 3.021c-.43.674-1.474.37-1.474-.43v-3.866a.8.8 0 01.18-.505l5.809-7.15a.595.595 0 00-.897-.782l-5.933 6.357a1.1 1.1 0 01-1.257.251l-4.085-1.847a.8.8 0 01-.08-1.415L20.223 1.88z"></path></svg></span>分享</button></div></div><button aria-live="polite" type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg width="1.2em" height="1.2em" viewBox="0 0 24 24" data-new-api="HeartFill24" data-old-api="Heart" class="Zi Zi--Heart Button-zi" fill="currentColor"><path d="M12.004 4.934c1.015-.944 2.484-1.618 3.98-1.618 3.48 0 6.53 3.265 6.15 7.614-.11 1.254-.686 2.55-1.458 3.753-.778 1.215-1.79 2.392-2.845 3.419-1.054 1.028-2.168 1.923-3.161 2.566a9.96 9.96 0 01-1.41.777c-.418.182-.862.32-1.268.32s-.848-.137-1.267-.317a9.918 9.918 0 01-1.407-.771c-.992-.64-2.103-1.53-3.156-2.555-1.052-1.024-2.062-2.2-2.84-3.417-.77-1.208-1.346-2.51-1.456-3.775-.38-4.349 2.67-7.614 6.15-7.614 1.484 0 2.983.673 3.988 1.618z" fill-rule="evenodd" clip-rule="evenodd"></path></svg></span>喜欢</button><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg width="1.2em" height="1.2em" viewBox="0 0 24 24" data-new-api="StarFill24" data-old-api="Star" class="Zi Zi--Star Button-zi" fill="currentColor"><path d="M10.484 3.307c.673-1.168 2.358-1.168 3.032 0l2.377 4.122a.25.25 0 00.165.12l4.655.987c1.319.28 1.84 1.882.937 2.884l-3.186 3.535a.25.25 0 00-.063.193l.5 4.733c.142 1.34-1.222 2.33-2.453 1.782l-4.346-1.938a.25.25 0 00-.204 0l-4.346 1.938c-1.231.549-2.595-.442-2.453-1.782l.5-4.733a.25.25 0 00-.064-.193L2.35 11.42c-.903-1.002-.382-2.604.937-2.884l4.655-.987a.25.25 0 00.164-.12l2.378-4.122z"></path></svg></span>收藏</button><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg width="1.2em" height="1.2em" viewBox="0 0 24 24" data-new-api="TrayFullFill24" data-old-api="Deliver" class="Zi Zi--Deliver Button-zi" fill="currentColor"><g fill-rule="evenodd" clip-rule="evenodd"><path d="M7.821 12a.75.75 0 01.75-.75h6.857a.75.75 0 010 1.5H8.571a.75.75 0 01-.75-.75zm1.144-4a.75.75 0 01.75-.75h4.571a.75.75 0 010 1.5H9.715a.75.75 0 01-.75-.75z"></path><path d="M7.527 3.15a2.35 2.35 0 00-2.309 1.91L3.165 15.84a.85.85 0 00-.015.16v2.5a2.35 2.35 0 002.35 2.35h13a2.35 2.35 0 002.35-2.35V16a.848.848 0 00-.015-.16L18.78 5.06a2.35 2.35 0 00-2.308-1.91H7.527zm0 1.7a.65.65 0 00-.639.528l-1.88 9.872h13.984l-1.88-9.872a.65.65 0 00-.64-.528H7.528z"></path></g></svg></span>申请转载</button><div class="Post-ActionMenuButton"><div class="Popover"><div id="Popover5-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover5-content"><button type="button" class="Button Button--plain Button--withIcon Button--iconOnly"><span style="display:inline-flex;align-items:center">​<svg width="1.2em" height="1.2em" viewBox="0 0 24 24" data-new-api="Dots24" data-old-api="Dots" class="Zi Zi--Dots Button-zi" fill="currentColor"><path d="M5.34 12a1.665 1.665 0 11-3.33 0 1.665 1.665 0 013.33 0zm8.325 0a1.665 1.665 0 11-3.33 0 1.665 1.665 0 013.33 0zm8.325 0a1.665 1.665 0 11-3.33 0 1.665 1.665 0 013.33 0z"></path></svg></span></button></div></div></div></div><div style="opacity: 1;" class="Post-SideActions"><button class="like"><div class="Post-SideActions-icon"><svg width="16" height="16" viewBox="0 0 24 24" data-new-api="AgreeFill24" data-old-api="TriangleUp" class="Zi Zi--TriangleUp Post-SideActions-upIcon" fill="currentColor"><path d="M13.792 3.681c-.781-1.406-2.803-1.406-3.584 0l-7.79 14.023c-.76 1.367.228 3.046 1.791 3.046h15.582c1.563 0 2.55-1.68 1.791-3.046l-7.79-14.023z" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div><div class="likeCount"><div class="likeCount-inner" data-previous="已赞同 143">赞同 142</div></div></button><div class="Popover ShareMenu"><div class="ShareMenu-toggler" id="Popover25-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover25-content"><button><div class="Post-SideActions-icon"><span style="display: inline-flex; align-items: center;">​<svg width="20" height="20" viewBox="0 0 24 24" data-new-api="PaperplaneFill24" data-old-api="Share" class="Zi Zi--Share" fill="currentColor"><path d="M20.223 1.881a.8.8 0 011.205.778l-1.874 16.393a.9.9 0 01-1.204.742l-4.617-1.692a.7.7 0 00-.83.28l-1.929 3.021c-.43.674-1.474.37-1.474-.43v-3.866a.8.8 0 01.18-.505l5.809-7.15a.595.595 0 00-.897-.782l-5.933 6.357a1.1 1.1 0 01-1.257.251l-4.085-1.847a.8.8 0 01-.08-1.415L20.223 1.88z"></path></svg></span></div>分享</button></div></div></div></div><div class="Sticky--holder" style="position: static; inset: auto auto 0px 0px; display: block; float: none; margin: 0px 0px 10px; height: 54px;"></div></div></article><div class="Post-Sub Post-NormalSub"><div class="PostIndex-Contributions" data-za-detail-view-path-module="ColumnList" data-za-detail-view-path-module_name="文章被以下专栏收录" data-za-extra-module="{}"><h3 class="BlockTitle">文章被以下专栏收录</h3><ul><div class="ContentItem Column-ColumnItem"><div class="ContentItem-main"><div class="ContentItem-image"><a class="ColumnLink" href="https://www.zhihu.com/column/server-development"><div class="Popover"><div id="Popover6-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover6-content"><img class="Avatar Avatar--medium Avatar--round" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/v2-e40aec031d2b6ec664fb08d03de58738_xs.jpg" srcset="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/v2-e40aec031d2b6ec664fb08d03de58738_l.jpg 2x" alt="后台开发图鉴" width="40" height="40"></div></div></a></div><div class="ContentItem-head"><h2 class="ContentItem-title"><span><a class="ColumnLink ColumnItem-Title" href="https://www.zhihu.com/column/server-development"><div class="Popover"><div id="Popover7-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover7-content">后台开发图鉴</div></div></a></span></h2><div class="ContentItem-meta">后台开发技术分享。欢迎投稿，一起享受技术的乐趣！</div></div></div></div><div class="ContentItem Column-ColumnItem"><div class="ContentItem-main"><div class="ContentItem-image"><a class="ColumnLink" href="https://www.zhihu.com/column/c_1252160759133978624"><div class="Popover"><div id="Popover8-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover8-content"><img class="Avatar Avatar--medium Avatar--round" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/4b70deef7_xs.jpg" srcset="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/4b70deef7_l.jpg 2x" alt="数据库与存储" width="40" height="40"></div></div></a></div><div class="ContentItem-head"><h2 class="ContentItem-title"><span><a class="ColumnLink ColumnItem-Title" href="https://www.zhihu.com/column/c_1252160759133978624"><div class="Popover"><div id="Popover9-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover9-content">数据库与存储</div></div></a></span></h2><div class="ContentItem-meta">数据库和存储开发的技术分享。</div></div></div></div></ul></div><div role="complementary" aria-label="推荐阅读" class="Recommendations-Main" style="width: 1836px;"><h3 class="BlockTitle Recommendations-BlockTitle">推荐阅读</h3><ul class="Recommendations-List"><button class="PagingButton PagingButton-Previous" disabled="disabled" data-za-detail-view-path-module="Unknown" data-za-detail-view-path-module_name="推荐阅读" data-za-extra-module="{}"><svg width="40" height="40" viewBox="0 0 24 24" data-new-api="ArrowLeftSmall24" data-old-api="ArrowLeft" fill="#d3d3d3" class="Zi Zi--ArrowLeft"><path d="M10.752 12l4.025-3.78a.684.684 0 000-1.01.796.796 0 00-1.075 0l-4.42 4.15a.866.866 0 000 1.28l4.42 4.15a.796.796 0 001.075 0 .684.684 0 000-1.01L10.752 12z" fill-rule="evenodd" clip-rule="evenodd"></path></svg></button><a href="https://zhuanlan.zhihu.com/p/83824714" class="PostItem"><div><h1 class="PostItem-Title">Yacc&amp;Lex学习</h1><p class="PostItem-Summary">经典的lex与yacc由贝尔实验室在20世纪70年代开发，flex与bison则是它们的现代版本。flex和bison是用来生产程序的工具，它们所生成的程序能够处理结构化输入。最初flex和bison是用来生产编译…</p><div class="PostItem-Footer"><span>过河卒</span><span class="PostItem-FooterTitle">发表于Stack...</span></div></div></a><a href="https://zhuanlan.zhihu.com/p/80674597" class="PostItem"><div><img src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/v2-07e0aa963cf0267963ecca0db882ac8c_250x0.jpg" srcset="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/v2-07e0aa963cf0267963ecca0db882ac8c_qhd.jpg 2x" class="PostItem-TitleImage" alt="【国外精选课程】编译原理入门之编译阶段概述"><h1 class="PostItem-Title">【国外精选课程】编译原理入门之编译阶段概述</h1><div class="PostItem-Footer"><span>知秋z</span><span class="PostItem-FooterTitle">发表于极乐科技</span></div></div></a><a href="https://zhuanlan.zhihu.com/p/264367718" class="PostItem"><div><h1 class="PostItem-Title">SQL解析系列(golang)--goyacc实战</h1><p class="PostItem-Summary">一、
Lex &amp;amp; Yacc简介 Lex &amp;amp; Yacc 
是用来生成词法分析器和语法分析器的工具，与GNU用户所熟知Flex&amp;amp;Bison所对应（Flex是由Vern 
Paxon实现的一个Lex，Bison则是GNU版本的YACC）。除…</p><div class="PostItem-Footer"><span>蓝白狂想</span><span class="PostItem-FooterTitle"></span></div></div></a><a href="https://zhuanlan.zhihu.com/p/31301086" class="PostItem"><div><h1 class="PostItem-Title">语法分析 | LL(1) 分析算法</h1><p class="PostItem-Summary">在前面我们已经说过，LL(1) 也是属于自顶向下分析算法中的一种。 LL(1) 分析算法从左(L)向右读入程序，最左(L)推导，采用一个(1)前看符号分析高效（线性时间）错误定位和诊断信息准确有很多…</p><div class="PostItem-Footer"><span>晒月亮的孩子</span><span class="PostItem-FooterTitle"></span></div></div></a><button class="PagingButton PagingButton-Next" data-za-detail-view-path-module="Unknown" data-za-detail-view-path-module_name="推荐阅读" data-za-extra-module="{}"><svg width="40" height="40" viewBox="0 0 24 24" data-new-api="ArrowRightSmall24" data-old-api="ArrowRight" fill="#d3d3d3" class="Zi Zi--ArrowRight"><path d="M13.248 12l-4.025 3.78a.684.684 0 000 1.01.796.796 0 001.075 0l4.42-4.15a.867.867 0 000-1.28l-4.42-4.15a.796.796 0 00-1.075 0 .684.684 0 000 1.01L13.248 12z" fill-rule="evenodd" clip-rule="evenodd"></path></svg></button></ul></div><div class="Comments-container" data-za-detail-view-path-module="CommentList" data-za-extra-module="{}"><div class="CommentsV2 CommentsV2--withEditor CommentsV2-withPagination"><div class="Topbar CommentTopbar"><div class="Topbar-title"><h2 class="CommentTopbar-title">5 条评论</h2></div><div class="Topbar-options"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg width="1.2em" height="1.2em" viewBox="0 0 24 24" data-new-api="ArrowSwitch24" data-old-api="Switch" class="Zi Zi--Switch Button-zi" fill="currentColor"><path d="M18.296 8.592a.75.75 0 101.149-.964l-3.87-4.61a.747.747 0 00-1.057-.092.748.748 0 00-.268.574v17a.75.75 0 001.5 0V5.56l2.546 3.032zM9.75 20.5a.749.749 0 01-.293.595.75.75 0 01-1.097-.056l-3.87-4.613a.75.75 0 111.15-.964l2.61 3.111V3.5a.75.75 0 111.5 0v17z" fill-rule="evenodd" clip-rule="evenodd"></path></svg></span>切换为时间排序</button></div></div><div class="CommentsV2-footer-wrapper"><div><div class="CommentsV2-footer CommentEditorV2--normal"><div class="CommentEditorV2-inputWrap"><div class="InputLike CommentEditorV2-input Editable"><div style="min-height: 198px;" class="Dropzone Editable-content RichText RichText--editable RichText--clearBoth ztext"><div class="DraftEditor-root"><div class="public-DraftEditorPlaceholder-root"><div class="public-DraftEditorPlaceholder-inner" id="placeholder-8clak" style="white-space: pre-wrap;">写下你的评论...</div></div><div class="DraftEditor-editorContainer"><div aria-describedby="placeholder-8clak" class="notranslate public-DraftEditor-content" role="textbox" spellcheck="true" style="outline: currentcolor none medium; user-select: text; white-space: pre-wrap; overflow-wrap: break-word;" tabindex="0" contenteditable="true"><div data-contents="true"><div class="Editable-unstyled" data-block="true" data-editor="8clak" data-offset-key="fmlis-0-0"><div data-offset-key="fmlis-0-0" class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr"><span data-offset-key="fmlis-0-0"><br data-text="true"></span></div></div></div></div></div></div></div><div></div><input multiple="" type="file" style="display: none;" accept="image/webp,image/jpg,image/jpeg,image/png,image/gif"></div><div class="CommentEditorV2-inputUpload"><div class="CommentEditorV2-popoverWrap"><div class="Popover ImagePopover"><button aria-label="插入图片" data-tooltip="插入图片" data-tooltip-position="bottom" data-tooltip-will-hide-on-click="true" id="Popover13-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover13-content" type="button" class="Button Editable-control Button--plain"><svg width="24" height="24" viewBox="0 0 24 24" data-new-api="ImagePlus24" data-old-api="AddImage" class="Zi Zi--AddImage" fill="currentColor"><path d="M3 5.42a2.415 2.415 0 012.415-2.416h13.17a2.415 2.415 0 012.414 2.415V11.5a.75.75 0 01-1.5 0V5.42a.915.915 0 00-.915-.916H5.415a.915.915 0 00-.915.915v7.42a.75.75 0 01-1.5 0V5.42zm12.09 8.022a5.57 5.57 0 00-3.192 1.005l-2.053 1.435a8.52 8.52 0 01-4.882 1.538H4.5v1.16c0 .506.41.916.915.916H14a.75.75 0 010 1.5H5.415A2.415 2.415 0 013 18.58v-1.356c0-.72.585-1.305 1.305-1.305h.658a7.02 7.02 0 004.023-1.267l2.052-1.435a7.07 7.07 0 014.051-1.276h.191a.75.75 0 110 1.5h-.19zM6.5 8.937a2.417 2.417 0 114.833 0 2.417 2.417 0 01-4.833 0zm2.417-.917a.917.917 0 100 1.834.917.917 0 000-1.834zM19.5 14a.75.75 0 01.75.75v2h2a.75.75 0 010 1.5h-2v2a.75.75 0 01-1.5 0v-2h-2a.75.75 0 010-1.5h2v-2a.75.75 0 01.75-.75z" fill-rule="evenodd" clip-rule="evenodd"></path></svg><svg width="21" height="14" class="css-agjc5i" fill="none"><path fill="url(#A)" stroke="#f6f6f6" d="M7.486.504a6 6 0 100 12h7a6 6 0 100-12h-7z"></path><g fill="#935d14"><path d="M8.459 9.431l2.465-5.366h-.916L8.401 7.751l-1.6-3.687h-.923L8.35 9.431h.109zm3.825 0V4.065h-.814v5.366h.814zm2.05 0V7.445h.284c.659 0 1.156-.153 1.491-.46s.502-.747.502-1.321c0-.496-.154-.887-.462-1.172s-.794-.427-1.458-.427h-1.178v5.366h.822zm.305-2.708h-.305V4.78h.378c.388 0 .664.09.829.27s.247.414.247.701c0 .268-.085.496-.254.686s-.468.285-.894.285z" fill-rule="evenodd"></path><path d="M8.459 9.431v.146h.094l.039-.085-.133-.061zm2.465-5.366l.133.061.095-.207h-.228v.146zm-.916 0v-.146h-.096l-.038.088.134.058zM8.401 7.751l-.134.058.134.309.134-.309-.134-.058zm-1.6-3.687l.134-.058-.038-.088h-.096v.146zm-.923 0v-.146h-.229l.096.208.133-.061zM8.35 9.431l-.133.061.039.085h.094v-.146zm3.934 0v.146h.146v-.146h-.146zm0-5.366h.146v-.146h-.146v.146zm-.814 0v-.146h-.146v.146h.146zm0 5.366h-.146v.146h.146v-.146zm2.865 0v.146h.146v-.146h-.146zm0-1.986v-.146h-.146v.146h.146zm-.822-3.38v-.146h-.146v.146h.146zm0 5.366h-.146v.146h.146v-.146zm.822-2.708h-.146v.146h.146v-.146zm0-1.942v-.146h-.146v.146h.146zM8.592 9.492l2.465-5.366-.266-.122L8.326 9.37l.266.122zm2.332-5.573h-.916v.293h.916v-.293zm-1.05.088L8.267 7.693l.268.117 1.607-3.687-.268-.117zM8.535 7.693l-1.6-3.687-.269.116 1.6 3.687.268-.116zM6.801 3.918h-.923v.293h.923v-.293zm-1.056.208l2.472 5.366.266-.122-2.472-5.366-.266.122zM8.35 9.577h.109v-.293H8.35v.293zm4.08-.146V4.065h-.293v5.366h.293zm-.146-5.512h-.814v.293h.814v-.293zm-.961.146v5.366h.293V4.065h-.293zm.146 5.512h.814v-.293h-.814v.293zm3.011-.146V7.445h-.293v1.986h.293zm-.146-1.839h.284v-.293h-.284v.293zm.284 0c.68 0 1.218-.158 1.589-.498l-.198-.216c-.297.273-.753.421-1.392.421v.293zm1.589-.498c.372-.341.549-.826.549-1.429h-.293c0 .545-.158.942-.454 1.214l.198.216zm.549-1.429c0-.529-.166-.962-.509-1.279l-.199.215c.272.252.415.6.415 1.064h.293zm-.509-1.279c-.347-.321-.877-.466-1.557-.466v.293c.648 0 1.09.14 1.358.388l.199-.215zM14.69 3.92h-1.178v.293h1.178V3.92zm-1.324.146v5.366h.293V4.065h-.293zm.146 5.512h.822v-.293h-.822v.293zm1.127-3.001h-.305v.293h.305v-.293zm-.159.146V4.78h-.293v1.942h.293zm-.146-1.796h.378v-.293h-.378v.293zm.378 0c.37 0 .597.087.721.223l.216-.198c-.205-.224-.532-.318-.937-.318v.293zm.721.223c.136.148.209.345.209.602h.293c0-.317-.092-.588-.286-.8l-.216.198zm.209.602a.85.85 0 01-.217.589l.218.195a1.14 1.14 0 00.292-.784h-.293zm-.217.589c-.128.143-.373.236-.785.236v.293c.441 0 .792-.097 1.003-.334l-.218-.195z"></path></g><defs><linearGradient id="A" x1="1.986" x2="19.986" y1="12.004" y2="12.004" gradientUnits="userSpaceOnUse"><stop stop-color="#f8e2c4"></stop><stop offset="1" stop-color="#f3bb6c"></stop></linearGradient></defs></svg></button></div><label class="UploadPicture-wrapper"><input type="file" accept="image/png,image/jpeg" class="UploadPicture-input"></label><div class="Popover"><div id="Popover14-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover14-content" class="css-ltqpv7"></div></div><div class="Popover"><button aria-label="插入表情" data-tooltip="插入表情" data-tooltip-position="bottom" data-tooltip-will-hide-on-click="true" id="Popover15-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover15-content" type="button" class="Button Editable-control Button--plain"><svg width="24" height="24" viewBox="0 0 24 24" data-new-api="EmoHappy24" data-old-api="Emotion" class="Zi Zi--Emotion" fill="currentColor"><path d="M12 20.5a8.5 8.5 0 100-17 8.5 8.5 0 000 17zm0 1.5c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z" fill-rule="evenodd" clip-rule="evenodd"></path><path d="M10 10.25a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0zm6.5 0a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0z"></path><path d="M8.712 13.807a.75.75 0 01.98.406 2.488 2.488 0 001.352 1.347 2.503 2.503 0 003.263-1.347.75.75 0 011.386.575 3.99 3.99 0 01-2.164 2.159 4.004 4.004 0 01-5.222-2.16.75.75 0 01.405-.98z" fill-rule="evenodd" clip-rule="evenodd"></path></svg></button></div></div></div></div><button type="button" disabled="disabled" class="Button CommentEditorV2-singleButton Button--primary Button--blue">发布</button></div></div></div><div><div class="CommentListV2"><ul class="NestComment"><li class="NestComment--rootComment"><div class="CommentItemV2"><div><div class="CommentItemV2-meta"><span class="UserLink CommentItemV2-avatar"><div class="Popover"><div id="Popover20-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover20-content"><a href="https://www.zhihu.com/people/68cadf70a6cc0a7c2d30f76196ccbf70" target="_blank" class="UserLink-link" data-za-detail-view-element_name="User"><img class="Avatar UserLink-avatar" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/da8e974dc_s.jpg" srcset="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/da8e974dc_xs.jpg 2x" alt="知乎用户" width="24" height="24"></a></div></div></span><span class="UserLink"><a href="https://www.zhihu.com/people/68cadf70a6cc0a7c2d30f76196ccbf70" target="_blank" class="UserLink-link" data-za-detail-view-element_name="User">知乎用户</a></span><span class="CommentItemV2-time">2021-10-21</span></div><div class="CommentItemV2-metaSibling"><div class="CommentRichText CommentItemV2-content"><div class="RichText ztext css-14bz7qe" options="[object Object]">请问一下，“YACC和LEX内部如何工作的？”这是哪本书籍呢？谢谢</div></div><div class="CommentItemV2-footer"><button type="button" class="Button CommentItemV2-likeBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg width="16" height="16" viewBox="0 0 24 24" data-new-api="ThumbFill24" data-old-api="Like" style="margin-right: 5px;" class="Zi Zi--Like" fill="currentColor"><path d="M8.5 4.078c0-1.834 1.986-2.979 3.573-2.06a4.826 4.826 0 012.379 4.71l-.114 1.022h3.581c2.53 0 4.334 2.454 3.58 4.868l-1.823 5.833a3.784 3.784 0 01-3.848 2.64c-2.372-.147-6.042-.341-8.828-.341H4.5A1.75 1.75 0 012.75 19V9.5c0-.967.784-1.75 1.75-1.75h.637a3.418 3.418 0 003.19-2.191c.115-.296.173-.611.173-.928v-.553z"></path></svg></span>赞</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg width="16" height="16" viewBox="0 0 24 24" data-new-api="ArrowShapeTurnLeftFill24" data-old-api="Reply" style="margin-right: 5px;" class="Zi Zi--Reply" fill="currentColor"><path d="M10.75 5.414c0-1.559-1.885-2.34-2.988-1.237l-6.585 6.585a1.75 1.75 0 000 2.475l6.585 6.586c1.103 1.103 2.988.322 2.988-1.237v-2.83c3.086.053 4.95.44 6.289 1.042 1.434.646 2.33 1.566 3.54 2.82l.037.039c.374.388.915.477 1.36.282.456-.2.76-.68.685-1.24-.286-2.162-1.287-4.77-3.31-6.845-1.919-1.968-4.723-3.422-8.601-3.588V5.414z" fill-rule="evenodd" clip-rule="evenodd"></path></svg></span>回复</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg width="16" height="16" viewBox="0 0 24 24" data-new-api="ThumbFill24" data-old-api="Like" style="transform: rotate(180deg); margin-right: 5px;" class="Zi Zi--Like" fill="currentColor"><path d="M8.5 4.078c0-1.834 1.986-2.979 3.573-2.06a4.826 4.826 0 012.379 4.71l-.114 1.022h3.581c2.53 0 4.334 2.454 3.58 4.868l-1.823 5.833a3.784 3.784 0 01-3.848 2.64c-2.372-.147-6.042-.341-8.828-.341H4.5A1.75 1.75 0 012.75 19V9.5c0-.967.784-1.75 1.75-1.75h.637a3.418 3.418 0 003.19-2.191c.115-.296.173-.611.173-.928v-.553z"></path></svg></span>踩</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg width="1.2em" height="1.2em" viewBox="0 0 24 24" data-new-api="FlagFill24" data-old-api="FlagFill24" class="ZDI ZDI--FlagFill24" fill="currentColor"><path d="M12.842 4.421c-1.86-1.24-3.957-1.408-5.798-1.025-1.827.38-3.467 1.313-4.47 2.381a.75.75 0 00-.171.732l4.44 14.546a.75.75 0 101.434-.438l-1.08-3.542c.025-.018.053-.036.083-.054.298-.184.801-.415 1.568-.523 1.386-.197 2.307.129 3.341.543l.187.075c1.005.405 2.161.872 3.791.804 1.401-.003 2.707-.45 3.67-1.015a5.217 5.217 0 001.212-.953c.284-.312.581-.752.581-1.255V5.046a.75.75 0 00-1.17-.622c-1.82 1.23-4.881 1.823-7.618-.003z"></path></svg></span> 举报</button></div></div></div></div></li><li class="NestComment--child"><div class="CommentItemV2"><div><div class="CommentItemV2-meta"><span class="UserLink CommentItemV2-avatar"><div class="Popover"><div id="Popover21-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover21-content"><a href="https://www.zhihu.com/people/81eca0b6d2dc75a6fa57294337be0d9a" target="_blank" class="UserLink-link" data-za-detail-view-element_name="User"><img class="Avatar UserLink-avatar" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/da8e974dc_s_002.jpg" srcset="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/da8e974dc_xs_002.jpg 2x" alt="知乎用户" width="24" height="24"></a></div></div></span><span class="UserLink"><a href="https://www.zhihu.com/people/81eca0b6d2dc75a6fa57294337be0d9a" target="_blank" class="UserLink-link" data-za-detail-view-element_name="User">知乎用户</a></span><span class="CommentItemV2-roleInfo"> (作者) </span><span class="CommentItemV2-reply">回复</span><span class="UserLink"><a href="https://www.zhihu.com/people/68cadf70a6cc0a7c2d30f76196ccbf70" target="_blank" class="UserLink-link" data-za-detail-view-element_name="User">知乎用户</a></span><span class="CommentItemV2-time">2021-10-21</span></div><div class="CommentItemV2-metaSibling"><div class="CommentRichText CommentItemV2-content"><div class="RichText ztext css-14bz7qe" options="[object Object]">编译原理</div></div><div class="CommentItemV2-footer"><button type="button" class="Button CommentItemV2-likeBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg width="16" height="16" viewBox="0 0 24 24" data-new-api="ThumbFill24" data-old-api="Like" style="margin-right: 5px;" class="Zi Zi--Like" fill="currentColor"><path d="M8.5 4.078c0-1.834 1.986-2.979 3.573-2.06a4.826 4.826 0 012.379 4.71l-.114 1.022h3.581c2.53 0 4.334 2.454 3.58 4.868l-1.823 5.833a3.784 3.784 0 01-3.848 2.64c-2.372-.147-6.042-.341-8.828-.341H4.5A1.75 1.75 0 012.75 19V9.5c0-.967.784-1.75 1.75-1.75h.637a3.418 3.418 0 003.19-2.191c.115-.296.173-.611.173-.928v-.553z"></path></svg></span>赞</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg width="16" height="16" viewBox="0 0 24 24" data-new-api="ArrowShapeTurnLeftFill24" data-old-api="Reply" style="margin-right: 5px;" class="Zi Zi--Reply" fill="currentColor"><path d="M10.75 5.414c0-1.559-1.885-2.34-2.988-1.237l-6.585 6.585a1.75 1.75 0 000 2.475l6.585 6.586c1.103 1.103 2.988.322 2.988-1.237v-2.83c3.086.053 4.95.44 6.289 1.042 1.434.646 2.33 1.566 3.54 2.82l.037.039c.374.388.915.477 1.36.282.456-.2.76-.68.685-1.24-.286-2.162-1.287-4.77-3.31-6.845-1.919-1.968-4.723-3.422-8.601-3.588V5.414z" fill-rule="evenodd" clip-rule="evenodd"></path></svg></span>回复</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg width="16" height="16" viewBox="0 0 24 24" data-new-api="ThumbFill24" data-old-api="Like" style="transform: rotate(180deg); margin-right: 5px;" class="Zi Zi--Like" fill="currentColor"><path d="M8.5 4.078c0-1.834 1.986-2.979 3.573-2.06a4.826 4.826 0 012.379 4.71l-.114 1.022h3.581c2.53 0 4.334 2.454 3.58 4.868l-1.823 5.833a3.784 3.784 0 01-3.848 2.64c-2.372-.147-6.042-.341-8.828-.341H4.5A1.75 1.75 0 012.75 19V9.5c0-.967.784-1.75 1.75-1.75h.637a3.418 3.418 0 003.19-2.191c.115-.296.173-.611.173-.928v-.553z"></path></svg></span>踩</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg width="1.2em" height="1.2em" viewBox="0 0 24 24" data-new-api="FlagFill24" data-old-api="FlagFill24" class="ZDI ZDI--FlagFill24" fill="currentColor"><path d="M12.842 4.421c-1.86-1.24-3.957-1.408-5.798-1.025-1.827.38-3.467 1.313-4.47 2.381a.75.75 0 00-.171.732l4.44 14.546a.75.75 0 101.434-.438l-1.08-3.542c.025-.018.053-.036.083-.054.298-.184.801-.415 1.568-.523 1.386-.197 2.307.129 3.341.543l.187.075c1.005.405 2.161.872 3.791.804 1.401-.003 2.707-.45 3.67-1.015a5.217 5.217 0 001.212-.953c.284-.312.581-.752.581-1.255V5.046a.75.75 0 00-1.17-.622c-1.82 1.23-4.881 1.823-7.618-.003z"></path></svg></span> 举报</button></div></div></div></div></li></ul><ul class="NestComment"><li class="NestComment--rootCommentNoChild"><div class="CommentItemV2"><div><div class="CommentItemV2-meta"><span class="UserLink CommentItemV2-avatar"><div class="Popover"><div id="Popover22-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover22-content"><a href="https://www.zhihu.com/people/mu-qian-xiao-52" target="_blank" class="UserLink-link" data-za-detail-view-element_name="User"><img class="Avatar UserLink-avatar" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/v2-387092ce3a2aec86b8b90eb3ca769a11_s.jpg" srcset="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/v2-387092ce3a2aec86b8b90eb3ca769a11_xs.jpg 2x" alt="慕伶" width="24" height="24"></a></div></div></span><span class="UserLink"><a href="https://www.zhihu.com/people/mu-qian-xiao-52" target="_blank" class="UserLink-link" data-za-detail-view-element_name="User">慕伶</a></span><span class="CommentItemV2-time">2021-10-19</span></div><div class="CommentItemV2-metaSibling"><div class="CommentRichText CommentItemV2-content"><div class="RichText ztext css-14bz7qe" options="[object Object]">感谢</div></div><div class="CommentItemV2-footer"><button type="button" class="Button CommentItemV2-likeBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg width="16" height="16" viewBox="0 0 24 24" data-new-api="ThumbFill24" data-old-api="Like" style="margin-right: 5px;" class="Zi Zi--Like" fill="currentColor"><path d="M8.5 4.078c0-1.834 1.986-2.979 3.573-2.06a4.826 4.826 0 012.379 4.71l-.114 1.022h3.581c2.53 0 4.334 2.454 3.58 4.868l-1.823 5.833a3.784 3.784 0 01-3.848 2.64c-2.372-.147-6.042-.341-8.828-.341H4.5A1.75 1.75 0 012.75 19V9.5c0-.967.784-1.75 1.75-1.75h.637a3.418 3.418 0 003.19-2.191c.115-.296.173-.611.173-.928v-.553z"></path></svg></span>赞</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg width="16" height="16" viewBox="0 0 24 24" data-new-api="ArrowShapeTurnLeftFill24" data-old-api="Reply" style="margin-right: 5px;" class="Zi Zi--Reply" fill="currentColor"><path d="M10.75 5.414c0-1.559-1.885-2.34-2.988-1.237l-6.585 6.585a1.75 1.75 0 000 2.475l6.585 6.586c1.103 1.103 2.988.322 2.988-1.237v-2.83c3.086.053 4.95.44 6.289 1.042 1.434.646 2.33 1.566 3.54 2.82l.037.039c.374.388.915.477 1.36.282.456-.2.76-.68.685-1.24-.286-2.162-1.287-4.77-3.31-6.845-1.919-1.968-4.723-3.422-8.601-3.588V5.414z" fill-rule="evenodd" clip-rule="evenodd"></path></svg></span>回复</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg width="16" height="16" viewBox="0 0 24 24" data-new-api="ThumbFill24" data-old-api="Like" style="transform: rotate(180deg); margin-right: 5px;" class="Zi Zi--Like" fill="currentColor"><path d="M8.5 4.078c0-1.834 1.986-2.979 3.573-2.06a4.826 4.826 0 012.379 4.71l-.114 1.022h3.581c2.53 0 4.334 2.454 3.58 4.868l-1.823 5.833a3.784 3.784 0 01-3.848 2.64c-2.372-.147-6.042-.341-8.828-.341H4.5A1.75 1.75 0 012.75 19V9.5c0-.967.784-1.75 1.75-1.75h.637a3.418 3.418 0 003.19-2.191c.115-.296.173-.611.173-.928v-.553z"></path></svg></span>踩</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg width="1.2em" height="1.2em" viewBox="0 0 24 24" data-new-api="FlagFill24" data-old-api="FlagFill24" class="ZDI ZDI--FlagFill24" fill="currentColor"><path d="M12.842 4.421c-1.86-1.24-3.957-1.408-5.798-1.025-1.827.38-3.467 1.313-4.47 2.381a.75.75 0 00-.171.732l4.44 14.546a.75.75 0 101.434-.438l-1.08-3.542c.025-.018.053-.036.083-.054.298-.184.801-.415 1.568-.523 1.386-.197 2.307.129 3.341.543l.187.075c1.005.405 2.161.872 3.791.804 1.401-.003 2.707-.45 3.67-1.015a5.217 5.217 0 001.212-.953c.284-.312.581-.752.581-1.255V5.046a.75.75 0 00-1.17-.622c-1.82 1.23-4.881 1.823-7.618-.003z"></path></svg></span> 举报</button></div></div></div></div></li></ul><ul class="NestComment"><li class="NestComment--rootCommentNoChild"><div class="CommentItemV2"><div><div class="CommentItemV2-meta"><span class="UserLink CommentItemV2-avatar"><div class="Popover"><div id="Popover23-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover23-content"><a href="https://www.zhihu.com/people/old-god-3" target="_blank" class="UserLink-link" data-za-detail-view-element_name="User"><img class="Avatar UserLink-avatar" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/v2-9e9f524a813dd31b290f6f1822866a23_s.jpg" srcset="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/v2-9e9f524a813dd31b290f6f1822866a23_xs.jpg 2x" alt="取名字好难0141" width="24" height="24"></a></div></div></span><span class="UserLink"><a href="https://www.zhihu.com/people/old-god-3" target="_blank" class="UserLink-link" data-za-detail-view-element_name="User">取名字好难0141</a></span><span class="CommentItemV2-time">2021-04-14</span></div><div class="CommentItemV2-metaSibling"><div class="CommentRichText CommentItemV2-content"><div class="RichText ztext css-14bz7qe" options="[object Object]"><p data-first-child="">内容相对是比较全的，写得也很清晰</p></div></div><div class="CommentItemV2-footer"><button type="button" class="Button CommentItemV2-likeBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg width="16" height="16" viewBox="0 0 24 24" data-new-api="ThumbFill24" data-old-api="Like" style="margin-right: 5px;" class="Zi Zi--Like" fill="currentColor"><path d="M8.5 4.078c0-1.834 1.986-2.979 3.573-2.06a4.826 4.826 0 012.379 4.71l-.114 1.022h3.581c2.53 0 4.334 2.454 3.58 4.868l-1.823 5.833a3.784 3.784 0 01-3.848 2.64c-2.372-.147-6.042-.341-8.828-.341H4.5A1.75 1.75 0 012.75 19V9.5c0-.967.784-1.75 1.75-1.75h.637a3.418 3.418 0 003.19-2.191c.115-.296.173-.611.173-.928v-.553z"></path></svg></span>赞</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg width="16" height="16" viewBox="0 0 24 24" data-new-api="ArrowShapeTurnLeftFill24" data-old-api="Reply" style="margin-right: 5px;" class="Zi Zi--Reply" fill="currentColor"><path d="M10.75 5.414c0-1.559-1.885-2.34-2.988-1.237l-6.585 6.585a1.75 1.75 0 000 2.475l6.585 6.586c1.103 1.103 2.988.322 2.988-1.237v-2.83c3.086.053 4.95.44 6.289 1.042 1.434.646 2.33 1.566 3.54 2.82l.037.039c.374.388.915.477 1.36.282.456-.2.76-.68.685-1.24-.286-2.162-1.287-4.77-3.31-6.845-1.919-1.968-4.723-3.422-8.601-3.588V5.414z" fill-rule="evenodd" clip-rule="evenodd"></path></svg></span>回复</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg width="16" height="16" viewBox="0 0 24 24" data-new-api="ThumbFill24" data-old-api="Like" style="transform: rotate(180deg); margin-right: 5px;" class="Zi Zi--Like" fill="currentColor"><path d="M8.5 4.078c0-1.834 1.986-2.979 3.573-2.06a4.826 4.826 0 012.379 4.71l-.114 1.022h3.581c2.53 0 4.334 2.454 3.58 4.868l-1.823 5.833a3.784 3.784 0 01-3.848 2.64c-2.372-.147-6.042-.341-8.828-.341H4.5A1.75 1.75 0 012.75 19V9.5c0-.967.784-1.75 1.75-1.75h.637a3.418 3.418 0 003.19-2.191c.115-.296.173-.611.173-.928v-.553z"></path></svg></span>踩</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg width="1.2em" height="1.2em" viewBox="0 0 24 24" data-new-api="FlagFill24" data-old-api="FlagFill24" class="ZDI ZDI--FlagFill24" fill="currentColor"><path d="M12.842 4.421c-1.86-1.24-3.957-1.408-5.798-1.025-1.827.38-3.467 1.313-4.47 2.381a.75.75 0 00-.171.732l4.44 14.546a.75.75 0 101.434-.438l-1.08-3.542c.025-.018.053-.036.083-.054.298-.184.801-.415 1.568-.523 1.386-.197 2.307.129 3.341.543l.187.075c1.005.405 2.161.872 3.791.804 1.401-.003 2.707-.45 3.67-1.015a5.217 5.217 0 001.212-.953c.284-.312.581-.752.581-1.255V5.046a.75.75 0 00-1.17-.622c-1.82 1.23-4.881 1.823-7.618-.003z"></path></svg></span> 举报</button></div></div></div></div></li></ul><ul class="NestComment"><li class="NestComment--rootCommentNoChild"><div class="CommentItemV2"><div><div class="CommentItemV2-meta"><span class="UserLink CommentItemV2-avatar"><div class="Popover"><div id="Popover24-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover24-content"><a href="https://www.zhihu.com/people/bjersoon" target="_blank" class="UserLink-link" data-za-detail-view-element_name="User"><img class="Avatar UserLink-avatar" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/477404bb07389b35ab162d75de0a9474_s.jpg" srcset="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/477404bb07389b35ab162d75de0a9474_xs.jpg 2x" alt="Bjersoon" width="24" height="24"></a></div></div></span><span class="UserLink"><a href="https://www.zhihu.com/people/bjersoon" target="_blank" class="UserLink-link" data-za-detail-view-element_name="User">Bjersoon</a></span><span class="CommentItemV2-time">03-13</span></div><div class="CommentItemV2-metaSibling"><div class="CommentRichText CommentItemV2-content"><div class="RichText ztext css-14bz7qe" options="[object Object]">例子通俗易懂，很棒</div></div><div class="CommentItemV2-footer"><button type="button" class="Button CommentItemV2-likeBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg width="16" height="16" viewBox="0 0 24 24" data-new-api="ThumbFill24" data-old-api="Like" style="margin-right: 5px;" class="Zi Zi--Like" fill="currentColor"><path d="M8.5 4.078c0-1.834 1.986-2.979 3.573-2.06a4.826 4.826 0 012.379 4.71l-.114 1.022h3.581c2.53 0 4.334 2.454 3.58 4.868l-1.823 5.833a3.784 3.784 0 01-3.848 2.64c-2.372-.147-6.042-.341-8.828-.341H4.5A1.75 1.75 0 012.75 19V9.5c0-.967.784-1.75 1.75-1.75h.637a3.418 3.418 0 003.19-2.191c.115-.296.173-.611.173-.928v-.553z"></path></svg></span>赞</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg width="16" height="16" viewBox="0 0 24 24" data-new-api="ArrowShapeTurnLeftFill24" data-old-api="Reply" style="margin-right: 5px;" class="Zi Zi--Reply" fill="currentColor"><path d="M10.75 5.414c0-1.559-1.885-2.34-2.988-1.237l-6.585 6.585a1.75 1.75 0 000 2.475l6.585 6.586c1.103 1.103 2.988.322 2.988-1.237v-2.83c3.086.053 4.95.44 6.289 1.042 1.434.646 2.33 1.566 3.54 2.82l.037.039c.374.388.915.477 1.36.282.456-.2.76-.68.685-1.24-.286-2.162-1.287-4.77-3.31-6.845-1.919-1.968-4.723-3.422-8.601-3.588V5.414z" fill-rule="evenodd" clip-rule="evenodd"></path></svg></span>回复</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg width="16" height="16" viewBox="0 0 24 24" data-new-api="ThumbFill24" data-old-api="Like" style="transform: rotate(180deg); margin-right: 5px;" class="Zi Zi--Like" fill="currentColor"><path d="M8.5 4.078c0-1.834 1.986-2.979 3.573-2.06a4.826 4.826 0 012.379 4.71l-.114 1.022h3.581c2.53 0 4.334 2.454 3.58 4.868l-1.823 5.833a3.784 3.784 0 01-3.848 2.64c-2.372-.147-6.042-.341-8.828-.341H4.5A1.75 1.75 0 012.75 19V9.5c0-.967.784-1.75 1.75-1.75h.637a3.418 3.418 0 003.19-2.191c.115-.296.173-.611.173-.928v-.553z"></path></svg></span>踩</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg width="1.2em" height="1.2em" viewBox="0 0 24 24" data-new-api="FlagFill24" data-old-api="FlagFill24" class="ZDI ZDI--FlagFill24" fill="currentColor"><path d="M12.842 4.421c-1.86-1.24-3.957-1.408-5.798-1.025-1.827.38-3.467 1.313-4.47 2.381a.75.75 0 00-.171.732l4.44 14.546a.75.75 0 101.434-.438l-1.08-3.542c.025-.018.053-.036.083-.054.298-.184.801-.415 1.568-.523 1.386-.197 2.307.129 3.341.543l.187.075c1.005.405 2.161.872 3.791.804 1.401-.003 2.707-.45 3.67-1.015a5.217 5.217 0 001.212-.953c.284-.312.581-.752.581-1.255V5.046a.75.75 0 00-1.17-.622c-1.82 1.23-4.881 1.823-7.618-.003z"></path></svg></span> 举报</button></div></div></div></div></li></ul></div></div></div></div></div></div></main><div role="complementary"><div class="CornerButtons"><div class="CornerAnimayedFlex"><button data-tooltip="回到顶部" data-tooltip-position="left" data-tooltip-will-hide-on-click="true" aria-label="回到顶部" type="button" class="Button CornerButton Button--plain"><svg width="24" height="24" viewBox="0 0 24 24" data-new-api="ArrowShapeUpwardFill24" data-old-api="BackToTop" aria-label="回到顶部" class="Zi Zi--BackToTop" fill="currentColor"><path d="M13.204 3.107a1.75 1.75 0 00-2.408 0L3.806 9.73c-1.148 1.088-.378 3.02 1.204 3.02h2.24V20c0 .966.784 1.75 1.75 1.75h6A1.75 1.75 0 0016.75 20v-7.25h2.24c1.582 0 2.353-1.932 1.204-3.02l-6.99-6.623z" fill-rule="evenodd" clip-rule="evenodd"></path></svg></button></div></div></div></div></div><script id="js-clientConfig" type="text/json">{"fetchRoot":{"www":"https:\u002F\u002Fwww.zhihu.com","api":"https:\u002F\u002Fapi.zhihu.com","lens":"https:\u002F\u002Flens.zhihu.com","zhuanlan":"https:\u002F\u002Fzhuanlan.zhihu.com","walletpay":"https:\u002F\u002Fwalletpay.zhihu.com","captcha":"https:\u002F\u002Fcaptcha.zhihu.com","vzuu":"https:\u002F\u002Fv.vzuu.com","openapi":"https:\u002F\u002Fopenapi.zhihu.com"},"host":"zhihu.com","protocol":"https:","wwwHost":"www.zhihu.com","videoHost":"video.zhihu.com","allowSignUp":true}</script><script id="js-initialData" type="text/json">{"initialState":{"common":{"ask":{}},"loading":{"global":{"count":0},"local":{"env\u002FgetIpinfo\u002F":false,"article\u002Fget\u002F":false,"brand\u002FgetUrl\u002F":false,"article\u002FloadPostSearchEntity\u002F":false}},"club":{"tags":{},"admins":{"data":[]},"members":{"data":[]},"explore":{"candidateSyncClubs":{}},"profile":{},"checkin":{},"comments":{"paging":{},"loading":{},"meta":{},"ids":{}},"postList":{"paging":{},"loading":{},"ids":{}},"recommend":{"data":[]},"silences":{"data":[]},"application":{"profile":null}},"entities":{"users":{"donghua.lau":{"isFollowed":false,"avatarUrlTemplate":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-ffae45eb0d5db66f67640e894321c303.jpg?source=172ae18b","uid":"700985472867913728","userType":"people","isFollowing":false,"urlToken":"donghua.lau","id":"81eca0b6d2dc75a6fa57294337be0d9a","description":"从事数据库、数仓、数据湖、大数据等架构与研发。","name":"Deepliu","isAdvertiser":false,"headline":"在南方城市敲代码","gender":1,"url":"\u002Fpeople\u002F81eca0b6d2dc75a6fa57294337be0d9a","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-ffae45eb0d5db66f67640e894321c303_l.jpg?source=172ae18b","isOrg":false,"type":"people","levelInfo":{"exp":23898,"level":5,"nicknameColor":{"color":"","nightModeColor":""},"levelIcon":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-feadaaf2cd19dcb455c7a0d56fb2f46f_l.png?source=32738c0c","iconInfo":{"url":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-feadaaf2cd19dcb455c7a0d56fb2f46f_l.png?source=32738c0c","nightModeUrl":"https:\u002F\u002Fpica.zhimg.com\u002Fv2-3379809e95d6544c1ecd4ed9926a3019_l.png?source=32738c0c","width":93,"height":51}},"badge":[],"badgeV2":{"title":"","mergedBadges":[],"detailBadges":[],"icon":"","nightIcon":""},"exposedMedal":{"medalId":"972477022068568064","medalName":"备受瞩目","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-6da117205088242db9cd82e48b28640d_r.png?source=172ae18b","miniAvatarUrl":"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-6da117205088242db9cd82e48b28640d_l.png?source=172ae18b","description":"被 1000 个人关注","medalAvatarFrame":""}}},"questions":{},"answers":{},"articles":{"143867739":{"trackUrl":["https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper\u002Fcontent_monitor_log?si=__SESSIONID__&ti=__ATOKEN__&at=view&pf=__OS__&ed=BiBUKF0xBSkqGGJ-QhvjYHlDBQ==&idfa=__IDFA__&imei=__IMEI__&androidid=__ANDROIDID__&oaid=__OAID__&ci=__CREATIVEID__&zid=__ZONEID__"],"entityWords":[{"name":"解析器","mention":"解析器","matchorder":1,"begin":528,"end":531,"entityid":0,"isBookMark":false,"link":{"linkType":0,"linkUrl":"","docType":"","topicToken":""},"entityClass":"Computer","score":3.070664184564291,"attachedInfoBytes":"sgIvCgnop6PmnpDlmagSCENvbXB1dGVyGJAEIJMEKAE1w4VEQDoHYXJ0aWNsZUAASAA=","isOnAB":false,"isNatural":1},{"name":"Bison—The Yacc-Compitible Parser Generator","mention":"Bison—The Yacc-Compitible Parser Generator","matchorder":1,"begin":52065,"end":52107,"entityid":0,"isBookMark":false,"link":{"linkType":0,"linkUrl":"","docType":"","topicToken":""},"entityClass":"Artwork","score":2.8241096258163454,"attachedInfoBytes":"sgJTCixCaXNvbuKAlFRoZSBZYWNjLUNvbXBpdGlibGUgUGFyc2VyIEdlbmVyYXRvchIHQXJ0d29yaxjhlgMgi5cDKAE1Nr40QDoHYXJ0aWNsZUAASAA=","isOnAB":false,"isNatural":1},{"name":"终结符","mention":"终结符","matchorder":1,"begin":20501,"end":20504,"entityid":0,"isBookMark":false,"link":{"linkType":0,"linkUrl":"","docType":"","topicToken":""},"entityClass":"Math","score":5.23597439271178,"attachedInfoBytes":"sgItCgnnu4jnu5PnrKYSBE1hdGgYlaABIJigASgBNRqNp0A6B2FydGljbGVAAEgA","isOnAB":false,"isNatural":1},{"name":"递归结构","mention":"递归结构","matchorder":1,"begin":12538,"end":12542,"entityid":0,"isBookMark":false,"link":{"linkType":0,"linkUrl":"","docType":"","topicToken":""},"entityClass":"Math","score":5.100564029099823,"attachedInfoBytes":"sgIuCgzpgJLlvZLnu5PmnoQSBE1hdGgY+mEg\u002FmEoATXSN6NAOgdhcnRpY2xlQABIAA==","isOnAB":false,"isNatural":1},{"name":"Compilers: Principles, Techniques, and Tools","mention":"Compilers: Principles, Techniques, and Tools","matchorder":1,"begin":52271,"end":52315,"entityid":0,"isBookMark":false,"link":{"linkType":0,"linkUrl":"","docType":"","topicToken":""},"entityClass":"Artwork","score":4.487310242652893,"attachedInfoBytes":"sgJTCixDb21waWxlcnM6IFByaW5jaXBsZXMsIFRlY2huaXF1ZXMsIGFuZCBUb29scxIHQXJ0d29yaxivmAMg25gDKAE1DJiPQDoHYXJ0aWNsZUAASAA=","isOnAB":false,"isNatural":1},{"name":"状态机","mention":"状态机","matchorder":2,"begin":48769,"end":48772,"entityid":0,"isBookMark":false,"link":{"linkType":0,"linkUrl":"","docType":"","topicToken":""},"entityClass":"Computer","score":3.276394701976445,"attachedInfoBytes":"sgIxCgnnirbmgIHmnLoSCENvbXB1dGVyGIH9AiCE\u002FQIoAjVzsFFAOgdhcnRpY2xlQABIAA==","isOnAB":false,"isNatural":1},{"name":"内部工作原理","mention":"内部工作原理","matchorder":1,"begin":12596,"end":12602,"entityid":0,"isBookMark":false,"link":{"linkType":0,"linkUrl":"","docType":"","topicToken":""},"entityClass":"Artwork","score":3.0044174015522005,"attachedInfoBytes":"sgI3ChLlhoXpg6jlt6XkvZzljp\u002FnkIYSB0FydHdvcmsYtGIgumIoATVgSEBAOgdhcnRpY2xlQABIAA==","isOnAB":false,"isNatural":1},{"name":"进阶阅读","mention":"进阶阅读","matchorder":1,"begin":16371,"end":16375,"entityid":0,"isBookMark":false,"link":{"linkType":0,"linkUrl":"","docType":"","topicToken":""},"entityClass":"Artwork","score":2.994365778565407,"attachedInfoBytes":"sgIxCgzov5vpmLbpmIXor7sSB0FydHdvcmsY838g938oATWwoz9AOgdhcnRpY2xlQABIAA==","isOnAB":false,"isNatural":1},{"name":"正则表达式","mention":"正则表达式","matchorder":1,"begin":2662,"end":2667,"entityid":0,"isBookMark":false,"link":{"linkType":0,"linkUrl":"","docType":"","topicToken":""},"entityClass":"Math","score":2.983370859588377,"attachedInfoBytes":"sgIxCg\u002FmraPliJnooajovr7lvI8SBE1hdGgY5hQg6xQoATWM7z5AOgdhcnRpY2xlQABIAA==","isOnAB":false,"isNatural":1}],"id":143867739,"title":"Lex与YACC详解","type":"article","articleType":"normal","excerptTitle":"","url":"https:\u002F\u002Fzhuanlan.zhihu.com\u002Fp\u002F143867739","imageUrl":"","titleImage":"","excerpt":"\u003Cimg src=\"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-f83296b45ddda21d1d26ab17229b953a_200x112.png\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1252\" data-rawheight=\"1332\" data-watermark=\"watermark\" data-original-src=\"v2-f83296b45ddda21d1d26ab17229b953a\" data-watermark-src=\"v2-14e3c63e03db9eba547536139f023bf3\" data-private-watermark-src=\"\" class=\"origin_image inline-img zh-lightbox-thumb\" data-original=\"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-f83296b45ddda21d1d26ab17229b953a_r.png\"\u002F\u003E一、简介只要你在Unix环境中写过程序，你必定会邂逅神秘的Lex&amp;YACC，就如GNU\u002FLinux用户所熟知的Flex&amp;Bison，这里的Flex就是由Vern Paxon实现的一个Lex，Bison则是GNU版本的YACC。在此我们将统一称呼这些程序为Lex和YACC。新版本的程序是向上兼容的(译注：即…","created":1590546393,"updated":1638024285,"author":{"isFollowed":false,"avatarUrlTemplate":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-ffae45eb0d5db66f67640e894321c303.jpg?source=172ae18b","uid":"700985472867913728","userType":"people","isFollowing":false,"urlToken":"donghua.lau","id":"81eca0b6d2dc75a6fa57294337be0d9a","description":"从事数据库、数仓、数据湖、大数据等架构与研发。","name":"Deepliu","isAdvertiser":false,"headline":"在南方城市敲代码","gender":1,"url":"\u002Fpeople\u002F81eca0b6d2dc75a6fa57294337be0d9a","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-ffae45eb0d5db66f67640e894321c303_l.jpg?source=172ae18b","isOrg":false,"type":"people","levelInfo":{"exp":23898,"level":5,"nicknameColor":{"color":"","nightModeColor":""},"levelIcon":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-feadaaf2cd19dcb455c7a0d56fb2f46f_l.png?source=32738c0c","iconInfo":{"url":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-feadaaf2cd19dcb455c7a0d56fb2f46f_l.png?source=32738c0c","nightModeUrl":"https:\u002F\u002Fpica.zhimg.com\u002Fv2-3379809e95d6544c1ecd4ed9926a3019_l.png?source=32738c0c","width":93,"height":51}},"badge":[],"badgeV2":{"title":"","mergedBadges":[],"detailBadges":[],"icon":"","nightIcon":""},"exposedMedal":{"medalId":"972477022068568064","medalName":"备受瞩目","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-6da117205088242db9cd82e48b28640d_r.png?source=172ae18b","miniAvatarUrl":"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-6da117205088242db9cd82e48b28640d_l.png?source=172ae18b","description":"被 1000 个人关注","medalAvatarFrame":""}},"commentPermission":"all","copyrightPermission":"need_review","state":"published","imageWidth":0,"imageHeight":0,"content":"\u003Ch2\u003E一、简介\u003C\u002Fh2\u003E\u003Cp data-pid=\"RqzhCbiO\"\u003E只要你在Unix环境中写过程序，你必定会邂逅神秘的Lex&amp;YACC，就如GNU\u002FLinux用户所熟知的Flex&amp;Bison，这里的Flex就是由Vern Paxon实现的一个Lex，Bison则是GNU版本的YACC。在此我们将统一称呼这些程序为Lex和YACC。新版本的程序是向上兼容的(译注：即兼容老版本)，所以你可以用Flex和Bison来尝试下我们的实例。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E这些程序实用性极广，但如同你的C编译器一样，在其主页上并没有描述它们，也没有关于怎样使用的信息。当和Lex结合使用时，YACC实在是棒极了，但是Bison的主页上并没有描述Bison如何跟Lex结合使用以生成代码的相应说明。\u003C\u002Fp\u003E\u003Ch2\u003E二、Lex &amp; YACC能为你做什么？\u003C\u002Fh2\u003E\u003Cp data-pid=\"hoG8D09M\"\u003E如果使用得当，这些程序(指LEX&amp;YACC)可以让你轻易的解析复杂的语言，当你需要读取一个配置文件时，或者你需要编写一个你自己使用的语言的编译器时，这对于你来说是莫大的裨益。\u003Cbr\u002F\u003E本文档能提供给你一些帮助，你将发现你再也不用手工写解析器了，Lex &amp; YACC就是为你量身打造的利器。\u003C\u002Fp\u003E\u003Ch2\u003E三、Lex\u003C\u002Fh2\u003E\u003Cp data-pid=\"IAcFo_u_\"\u003ELex会生成一个叫做『词法分析器』的程序。这是一个函数，它带有一个字符流传入参数，词法分析器函数看到一组字符就会去匹配一个关键字(key)，采取相应措施。一个非常简单的例子(example1)如下:\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-c\"\u003E\u003Cspan class=\"o\"\u003E%\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\u003Cspan class=\"cp\"\u003E#include\u003C\u002Fspan\u003E \u003Cspan class=\"cpf\"\u003E&lt;stdio.h&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E%\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E%%\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003Estop\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eprintf\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;Stop command received\u003C\u002Fspan\u003E\u003Cspan class=\"se\"\u003E\\n\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003Estart\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003Eprintf\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;Start command received\u003C\u002Fspan\u003E\u003Cspan class=\"se\"\u003E\\n\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E%%\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"Br54Ktve\"\u003E\u003Cbr\u002F\u003E第一部分，位于%{和%}对之间直接包含了输出程序(stdio.h)。我们需要这个程序，因为使用了printf函数，它在stdio.h中定义。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E第二部分用’%%’分割开来，所以第二行起始于’stop’，一旦在输入参数中遇到了’stop’，接下来的那一行(printf()调用)将被执行。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E除此之外，还有’start’，其跟stop的行为差不多。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E我们再次用’%%’结束代码段。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E为了编译上面的例子，只需要执行以下命令：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-bash\"\u003Elex example1.l\ncc lex.yy –o example –ll\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"Puvp50Q4\"\u003E\u003Cbr\u002F\u003E注意：如果你用flex，则就将lex命令用flex代替，还需要将’-ll’选项改成’-lfl’。在RedHat 6.x以及SuSe中需要这样做。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E这样，Lex将生成’example1’这个文件。运行该文件，它将等待你输入一些数据。每次你输入一些不匹配的命令(非’stop’和’start’)，它会将你输入的字符再次输出。你若输入’stop’，它将输出’Stop command received’。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E用一个EOF(^D)来结束程序。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E也许你想知道，它是怎么运行的，因为我们并没有定义main()函数。这个函数(指main())已经在lib1(liblex)中定义好了，在此我们选用了编译选项’-ll’\u003C\u002Fp\u003E\u003Ch3\u003E3.1 Lex的常规表达式\u003C\u002Fh3\u003E\u003Cp data-pid=\"9FMU0b0f\"\u003E常规表达式是一种使用元语言的模式描述。表达式由符号组成。符号一般是字符和数字，还有一些具有特殊含义的其他标记，如下表：\u003C\u002Fp\u003E\u003Cfigure data-size=\"normal\"\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-14e3c63e03db9eba547536139f023bf3_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1252\" data-rawheight=\"1332\" class=\"origin_image zh-lightbox-thumb\" width=\"1252\" data-original=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-14e3c63e03db9eba547536139f023bf3_r.jpg\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&lt;svg xmlns=&#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&#39; width=&#39;1252&#39; height=&#39;1332&#39;&gt;&lt;\u002Fsvg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1252\" data-rawheight=\"1332\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1252\" data-original=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-14e3c63e03db9eba547536139f023bf3_r.jpg\" data-actualsrc=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-14e3c63e03db9eba547536139f023bf3_b.jpg\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Ch3\u003E3.2 匹配中的正则表达式示例\u003C\u002Fh3\u003E\u003Cp data-pid=\"6IHoG8Ol\"\u003E这个实例(example2)本身并没什么用处，下一个实例也不会提及正则表达式。但这里它展示了如何在Lex中使用正则表达式，这在后面将非常有用。\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-c\"\u003E\u003Cspan class=\"o\"\u003E%\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\u003Cspan class=\"cp\"\u003E#include\u003C\u002Fspan\u003E \u003Cspan class=\"cpf\"\u003E&lt;stdio.h&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E%\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"o\"\u003E%%\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"mo\"\u003E01234567\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E89\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eprintf\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;NUMBER\u003C\u002Fspan\u003E\u003Cspan class=\"se\"\u003E\\n\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ea\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EzA\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EZ\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E][\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ea\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EzA\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EZ0\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E9\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eprintf\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;WORD\u003C\u002Fspan\u003E\u003Cspan class=\"se\"\u003E\\n\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"U1dO3kHp\"\u003E该Lex文件描述了两种token匹配：WORDs和NUMBERs。正则表达式非常恐怖，但是只需要稍花力气便可以加以理解。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E其中NUMBER匹配“[0123456789]+”可以写成“[0-9]+”。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003EWORD匹配就有点复杂：[a-zA-Z][a-zA-Z0-9]*\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E第一部分仅仅匹配一个’a’到’z’或’A’到’Z’之间的字符，也即一个字母。接着该字母后面需要连上0个或多个字符，这些字符可以是字母，也可以是数字。这里为何用’*’? ’+’表示至少1次的匹配。一个WORD只有一个字符也可以很好的匹配，在第一部分我们已经匹配到了一个字符，所以第二部分可以是0个匹配，所以用’*’。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E用这种方式，我们就模仿了很多编程语言中对于一个变量名的要求，即要求变量名『必须』以字母开头，但是可以在后续字符中用数字。也就是说’temperature1’是一个正确的命名，但是’1temperature’就不是。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E像example1一样编译example2，并输入一些文本，如下：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-text\"\u003E$ .\u002Fexample2\nfoo\nWORD\n\nbar\nWORD\n\n123\nNUMBER\n\nbar123\nWORD\n\n123bar\nNUMBER\nWORD\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"4TkXwZru\"\u003E\u003Cbr\u002F\u003E你也许会疑惑，所有的输出中的空格是从哪来的？理由很简单：从输入而来，我们不在空格上匹配任何内容，所以它们又输出来了。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003EFlex主页上有正则表达式的详细文档。很多人觉得perl正则表达式主页的说明非常有用，但是Flex并不实现perl所实现的所有东西。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E你只需要确保不写一些形如’[0-9]*’的空匹配即可，你的词法分析器(由Flex生成)将不明就里的开始不断的匹配空字符。\u003C\u002Fp\u003E\u003Ch3\u003E3.3 复杂一点的类C语法示例\u003C\u002Fh3\u003E\u003Cp data-pid=\"qFHWSH1o\"\u003E假定我们需要解析一个形如下面的文件：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-nginx\"\u003E\u003Cspan class=\"k\"\u003Elogging{\u003C\u002Fspan\u003E\n\u003Cspan class=\"s\"\u003Ecategory\u003C\u002Fspan\u003E \u003Cspan class=\"s\"\u003Elame-servers\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E \u003Cspan class=\"kn\"\u003Enull\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E;\n\u003Cspan class=\"k\"\u003Ecategory\u003C\u002Fspan\u003E \u003Cspan class=\"s\"\u003Ecname\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E \u003Cspan class=\"kn\"\u003Enull\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E;\n\u003Cspan class=\"k\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"k\"\u003Ezone\u003C\u002Fspan\u003E \u003Cspan class=\"s\"\u003E&#34;.&#34;\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\u003Cspan class=\"kn\"\u003Etype\u003C\u002Fspan\u003E \u003Cspan class=\"s\"\u003Ehint\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"kn\"\u003Efile\u003C\u002Fspan\u003E \u003Cspan class=\"s\"\u003E&#34;\u002Fetc\u002Fbind\u002Fdb.root&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"eDH3QpSH\"\u003E我们在此见到了很多token：\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli data-pid=\"RxfM-FiR\"\u003EWORD: 如’zone’和’type’\u003C\u002Fli\u003E\u003Cli data-pid=\"RmRUVygN\"\u003EFILENAME：如“\u002Fetc\u002Fbind\u002Fdb.root”\u003C\u002Fli\u003E\u003Cli data-pid=\"nwobbF4i\"\u003EQUOTE: 如包含文件名的引号\u003C\u002Fli\u003E\u003Cli data-pid=\"mqhgeG6O\"\u003EOBRACE：{\u003C\u002Fli\u003E\u003Cli data-pid=\"uHFMFTAJ\"\u003EEBRACE: }\u003C\u002Fli\u003E\u003Cli data-pid=\"TyTOW3Y4\"\u003ESEMICOLON: ;\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp data-pid=\"SnAYua45\"\u003Eexample3相应的Lex文件如下：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-c\"\u003E\u003Cspan class=\"o\"\u003E%\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\u003Cspan class=\"cp\"\u003E#include\u003C\u002Fspan\u003E \u003Cspan class=\"cpf\"\u003E&lt;stdio.h&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E%\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"o\"\u003E%%\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ea\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EzA\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EZ\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E][\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ea\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EzA\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EZ0\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E9\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eprintf\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;WORD &#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ea\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EzA\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EZ0\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E9\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E\\\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eprintf\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;FILENAME &#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"err\"\u003E\\\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34; printf(&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EQUOTE\u003C\u002Fspan\u003E \u003Cspan class=\"s\"\u003E&#34;);\u003C\u002Fspan\u003E\n\u003Cspan class=\"err\"\u003E\\\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eprintf\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;OBRACE &#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"err\"\u003E\\\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eprintf\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;EBRACE &#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eprintf\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;SEMICOLON &#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"err\"\u003E\\\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003En\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eprintf\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"se\"\u003E\\n\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E \u003Cspan class=\"err\"\u003E\\\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Et\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"cm\"\u003E\u002F* ignore whitespace *\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E%%\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"42zBTP-r\"\u003E\u003Cbr\u002F\u003E当输入我们的文件到Lex生成的example3中，我们得到：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-text\"\u003EWORD OBRACE\nWORD FILENAME OBRACE WORD SEMICOLON EBRACE SEMICOLON\nWORD WORD OBRACE WORD SEMICOLON EBRACE SEMICOLON\nEBRACE SEMICOLON\nWORD QUOTE FILENAME QUOTE OBRACE\nWORD WORD SEMICOLON\nWORD QUOTE FILENAME QUOTE SEMICOLON\nEBRACE SEMICOLON\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Ch2\u003E四、YACC\u003C\u002Fh2\u003E\u003Cp data-pid=\"d6t14KBl\"\u003EYACC可以解析输入流中的标识符(token)，这就清楚的描述了YACC和LEX的关系，YACC并不知道『输入流』为何物，它需要事先就将输入流预加工成标识符，虽然你可以自己手工写一个Tokenizer，但我们将这些工作留给LEX来做。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003EYACC用来为编译器解析输入数据，即程序代码。这些用编程语言写成的程序代码一点也不模棱两可——它们只有一个意思。正因为如此，YACC才不会去对付那些有歧义的语法，并且会抱怨shift\u002Freduce或者reduce\u002Freduce冲突。更多的关于模糊性和YACC『问题』可以在『冲突』一章中找到。\u003C\u002Fp\u003E\u003Ch3\u003E4.1 一个简单的温度控制器\u003C\u002Fh3\u003E\u003Cp data-pid=\"8BQXaE3h\"\u003E假定我们有一个温度计，我们要用一种简单的语言来控制它。关于此的一个会话、如下：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-text\"\u003Eheat on\nHeater on!\nheat off\nHeader off!\ntarget temperature set!\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"rnWA9i7a\"\u003E我们需要识别的标识符为heat, on\u002Foff(STATE), target, temperature, NUMBER。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003ELEX的tokenizer(example4)为：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-c\"\u003E\u003Cspan class=\"o\"\u003E%\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\u003Cspan class=\"cp\"\u003E#include\u003C\u002Fspan\u003E \u003Cspan class=\"cpf\"\u003E&lt;stdio.h&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E#include\u003C\u002Fspan\u003E \u003Cspan class=\"cpf\"\u003E&#34;y.tab.h&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E%\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"o\"\u003E%%\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E9\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ENUMBER\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003Eheat\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ETOKHEAT\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E|\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eoff\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ESTATE\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003Etarget\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ETOKTARGET\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003Etemperature\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ETOKTEMPERATURE\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"err\"\u003E\\\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003En\u003C\u002Fspan\u003E \u003Cspan class=\"cm\"\u003E\u002F* ignore end of line *\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E \u003Cspan class=\"err\"\u003E\\\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Et\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"cm\"\u003E\u002F* ignore whitespace *\u002F\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E%%\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"zsmF7mgJ\"\u003E\u003Cbr\u002F\u003E有两个重点需要注意：\u003Cbr\u002F\u003E第一，我们包含了『y.tab.h』；\u003Cbr\u002F\u003E第二，我们不再打印输出了，我们返回标识符的名字。之所这样做是因为我们将这些返回传送给了YACC，而它对于我们屏幕上的输出并不感冒。 『y.tab.h』中定义了这些标识符。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E但是y.tab.h从哪里来？它由YACC从我们编写的语法文件中生成，语法文件非常简单，如下：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-c\"\u003E\u003Cspan class=\"nl\"\u003Ecommands\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"cm\"\u003E\u002F* empty *\u002F\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E|\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ecommands\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ecommand\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"nl\"\u003Ecommand\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eheat_switch\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E|\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Etarget_set\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"nl\"\u003Eheat_switch\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003ETOKHEAT\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ESTATE\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"n\"\u003Eprintf\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"se\"\u003E\\t\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003EHeat turned on or off\u003C\u002Fspan\u003E\u003Cspan class=\"se\"\u003E\\n\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E};\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"nl\"\u003Etarget_set\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003ETOKTARGET\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ETOKTEMPERATURE\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ENUMBER\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"n\"\u003Eprintf\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"se\"\u003E\\t\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003ETemperature set\u003C\u002Fspan\u003E\u003Cspan class=\"se\"\u003E\\n\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E};\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"o0IXgX0o\"\u003E\u003Cbr\u002F\u003E第一部分，我们称之为根(root)。它告诉我们有一个『commands』，并且这些『commands』由单个的『command』组成。正如你所见到的那样，这是一个标准的递归结构，因为它又再次包含了『commands』。这意味着该程序可以一个个的递减一系列的命令。参见『LEX和YACC内部工作原理』一章，阅读更多的递归细节。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E第二个规则定义了『command』的内容。我们只假定两种命令。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E一个heat_switch由HEAT标识符组成，它后面跟着一个状态，该状态在LEX中定义，为『on』或『off』。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003Etarget_set稍微有点复杂，它由TARGET标识符、TEMPERATURE以及一个数字组成。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E前面的那个例子只有YACC文件的语法部分，起始在YACC文件中还有其它内容，完整的YACC文件如下：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-c\"\u003E\u003Cspan class=\"o\"\u003E%\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\u003Cspan class=\"cp\"\u003E#include\u003C\u002Fspan\u003E \u003Cspan class=\"cpf\"\u003E&lt;stdio.h&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E#include\u003C\u002Fspan\u003E \u003Cspan class=\"cpf\"\u003E&lt;string.h&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"c1\"\u003E\u002F\u002F在lex.yy.c里定义，会被yyparse()调用。在此声明消除编译和链接错误。\n\u003C\u002Fspan\u003E\u003Cspan class=\"c1\"\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"k\"\u003Eextern\u003C\u002Fspan\u003E \u003Cspan class=\"kt\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eyylex\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"kt\"\u003Evoid\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E \n\n\u003Cspan class=\"c1\"\u003E\u002F\u002F 在此声明，消除yacc生成代码时的告警\n\u003C\u002Fspan\u003E\u003Cspan class=\"c1\"\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"k\"\u003Eextern\u003C\u002Fspan\u003E \u003Cspan class=\"kt\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003Eyyparse\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"kt\"\u003Evoid\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E \n\n\u003Cspan class=\"kt\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003Eyywrap\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E()\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"c1\"\u003E\u002F\u002F 该函数在y.tab.c里会被调用，需要在此定义\n\u003C\u002Fspan\u003E\u003Cspan class=\"c1\"\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"kt\"\u003Evoid\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003Eyyerror\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"k\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"kt\"\u003Echar\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Es\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"n\"\u003Eprintf\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;[error] %s\u003C\u002Fspan\u003E\u003Cspan class=\"se\"\u003E\\n\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Es\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"kt\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E()\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"n\"\u003Eyyparse\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E%\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"o\"\u003E%\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Etoken\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ENUMBER\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ETOKHEAT\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ESTATE\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ETOKTARGET\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ETOKTEMPERATURE\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"o\"\u003E%%\u003C\u002Fspan\u003E\n\u003Cspan class=\"nl\"\u003Ecommands\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"cm\"\u003E\u002F* empty *\u002F\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E|\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ecommands\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ecommand\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"nl\"\u003Ecommand\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eheat_switch\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E|\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Etarget_set\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"nl\"\u003Eheat_switch\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003ETOKHEAT\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ESTATE\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"n\"\u003Eprintf\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"se\"\u003E\\t\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003EHeat turned on or off\u003C\u002Fspan\u003E\u003Cspan class=\"se\"\u003E\\n\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E};\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"nl\"\u003Etarget_set\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003ETOKTARGET\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ETOKTEMPERATURE\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ENUMBER\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"n\"\u003Eprintf\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"se\"\u003E\\t\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003ETemperature set\u003C\u002Fspan\u003E\u003Cspan class=\"se\"\u003E\\n\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E};\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E%%\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"74LJ8I46\"\u003E\u003Cbr\u002F\u003E函数yyerror()在YACC发现一个错误的时候被调用，我们只是简单的输出错误信息，但其实还可以做一些更漂亮的事情，参见文档尾的『进阶阅读』部分。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003Eyywrap()函数用于不断的从一个文件中读取数据，当遇到EOF时，你可以再输入一个文件，然后返回0，你也可以使得其返回1，暗示着输入结束。更多细节，参见『YACC和LEX内部如何工作的？』一章。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E接着，这里有一个main()函数，它基本什么也不做，只是调用一些函数。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E最后一行简单的定义了我将使用的标识符，如果调用YACC时，使用『-d』选项，那么它们会输出到y.tab.h中。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E编译并运行恒温控制器：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-basemake\"\u003Elex example4.l\nyacc –d example4.y\ncc lex.yy.c y.tab.c –o example4\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"ruv_p1dE\"\u003E在此，情况有所改变，我们现在调用YACC来编译我们的程序，它创建了y.tab.c和y.tab.h. 我接着再调用LEX。 编译时，我们去除了『-ll』编译选项，因为此时我们有了自己的main()函数，并不需要libl来提供。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E注意：如果在编译过程中报错说找不到『yylval』，那么在example4.l的#include &lt;y.tab.h&gt;下面加上：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-c\"\u003E\u003Cspan class=\"k\"\u003Eextern\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EYYSTYPE\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eyylval\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E；\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"J9kS908m\"\u003E具体细节在『LEX和YACC内部工作原理』中解说。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E一个简单的会话：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-text\"\u003E$ .\u002Fexample4\nheat on\nHeat turned on or off\nheat off\nHeat turned on or off\ntarget temperature 10\nTemperature set\ntarget humidity 20\nerror: parse error\n$\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Ch3\u003E4.2 扩展恒温器，使得其可以接受参数\u003C\u002Fh3\u003E\u003Cp data-pid=\"hal-hPOa\"\u003E我们已经可以正确的解析温度计命令了，并且能对一些错误做标记。但也许一些狡猾的人会猜疑说，该解析器并不知道你应该做什么，也没有处理一些你输入的数值。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E让我们来添加能读取新的温度参数的功能。为达到此目的，我们得知道LEX中的NUMBER匹配要转化成一个数值，然后才能为YACC所接收.\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E每当LEX匹配到了一个目标字串，它就将该匹配文本赋值给『yytext』，YACC则依次在『yylval』中来查找一个值，在example5中，我们可以得到一个明晰的方案：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-c\"\u003E\u003Cspan class=\"o\"\u003E%\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\u003Cspan class=\"cp\"\u003E#include\u003C\u002Fspan\u003E \u003Cspan class=\"cpf\"\u003E&lt;stdio.h&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E#include\u003C\u002Fspan\u003E \u003Cspan class=\"cpf\"\u003E&#34;y.tab.h&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E%\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"o\"\u003E%%\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E9\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eyylval\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eatoi\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eyytext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ENUMBER\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003Eheat\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ETOKHEAT\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E|\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eoff\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eyylval\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E!\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Estrcmp\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eyytext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"s\"\u003E&#34;on&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ESTATE\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003Etarget\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ETOKTARGET\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003Etemperature\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ETOKTEMPERATURE\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"err\"\u003E\\\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003En\u003C\u002Fspan\u003E \u003Cspan class=\"cm\"\u003E\u002F* ignore end of line *\u002F\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E \u003Cspan class=\"err\"\u003E\\\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Et\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"cm\"\u003E\u002F* ignore whitespace *\u002F\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E%%\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"uh5jQi1g\"\u003E\u003Cbr\u002F\u003E如你所见，我们在yytext中用了atoi()，并将结果存储在yylval中，使得YACC可以『看见』它。 同理，我们再处理STATE匹配，将其与『on』比较，若想等，则将yylval设置为1。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E接下来，我们就得考察YACC如何来应对。我们来看看新的temperature target规则设置：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-c\"\u003E\u003Cspan class=\"nl\"\u003Etarget_set\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003ETOKTARGET\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ETOKTEMPERATURE\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ENUMBER\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"n\"\u003Eprintf\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"se\"\u003E\\t\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003ETemperature set to %d\u003C\u002Fspan\u003E\u003Cspan class=\"se\"\u003E\\n\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"err\"\u003E$\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E3\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E};\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"y5NHT1f-\"\u003E为得到规则中第三部分的值(NUMBER)，我们用『$3』来表示，每次yylex()返回时，yylval的值便依附到了终结符上，其值可以通过『$-常数』来获取。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E为更进一步加深理解，我们来看『heat_switch』规则：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-c\"\u003E\u003Cspan class=\"nl\"\u003Eheat_switch\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003ETOKHEAT\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ESTATE\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"k\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E$\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\n        \u003Cspan class=\"n\"\u003Eprintf\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"se\"\u003E\\t\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003EHeat turned on\u003C\u002Fspan\u003E\u003Cspan class=\"se\"\u003E\\n\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n    \u003Cspan class=\"k\"\u003Eelse\u003C\u002Fspan\u003E\n        \u003Cspan class=\"nf\"\u003Eprintf\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"se\"\u003E\\t\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003EHeat turned off\u003C\u002Fspan\u003E\u003Cspan class=\"se\"\u003E\\n\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"lIb3skpJ\"\u003E如果现在运行example5，它将输出你所输入的数据。\u003C\u002Fp\u003E\u003Ch3\u003E4.3 解析一个配置文件\u003C\u002Fh3\u003E\u003Cp data-pid=\"MofD4If1\"\u003E让我们再次回顾先前提到的那个配置文件：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-nginx\"\u003E\u003Cspan class=\"k\"\u003Ezone\u003C\u002Fspan\u003E \u003Cspan class=\"s\"\u003E&#34;.\u002Fwww&#34;\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"kn\"\u003Etype\u003C\u002Fspan\u003E \u003Cspan class=\"s\"\u003Ehint\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"kn\"\u003Ename\u003C\u002Fspan\u003E \u003Cspan class=\"s\"\u003Efoo\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"kn\"\u003Ehello\u003C\u002Fspan\u003E \u003Cspan class=\"s\"\u003E&#34;\u002Fhello\u002Fworld&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"kn\"\u003Efile\u003C\u002Fspan\u003E \u003Cspan class=\"s\"\u003E&#34;\u002Fetc\u002Fbind\u002Fdb.root&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"e-Q9rEae\"\u003E之前我们已经将LEX文件写好了，接下来只需要编写YACC语法文件，并且对词法分析器做一些修改，使得其可以返回一些值给YACC。\u003Cbr\u002F\u003Eexample6中的词法分析器如下：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-c\"\u003E\u003Cspan class=\"o\"\u003E%\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\u003Cspan class=\"cp\"\u003E#include\u003C\u002Fspan\u003E \u003Cspan class=\"cpf\"\u003E&lt;stdio.h&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E#define YYSTYPE char *\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"k\"\u003Eextern\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EYYSTYPE\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eyylval\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"c1\"\u003E\u002F\u002F 必须放在#include &#34;y.tab.h&#34;前面\n\u003C\u002Fspan\u003E\u003Cspan class=\"c1\"\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E#include\u003C\u002Fspan\u003E \u003Cspan class=\"cpf\"\u003E&#34;y.tab.h&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E%\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E%%\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003Ezone\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EZONETOK\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003Efile\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EFILETOK\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ea\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EzA\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EZ\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E][\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ea\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EzA\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EZ0\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E9\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eyylval\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Estrdup\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eyytext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EWORD\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ea\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EzA\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EZ0\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E9\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E\\\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eyylval\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Estrdup\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eyytext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EFILENAME\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"err\"\u003E\\\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34; return QUOTE;\u003C\u002Fspan\u003E\n\u003Cspan class=\"err\"\u003E\\\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EOBRACE\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"err\"\u003E\\\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EEBRACE\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ESEMICOLON\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E \u003Cspan class=\"err\"\u003E\\\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Et\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"cm\"\u003E\u002F* ignore whitespace *\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"err\"\u003E\\\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003En\u003C\u002Fspan\u003E \u003Cspan class=\"cm\"\u003E\u002F* ignore EOL *\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E%%\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"Sp5tt_K8\"\u003E\u003Cbr\u002F\u003E细心的话，你会发现yylval已经改变了！我们不再认为它是一个整数，而是假定为一个char*类型数据。为保持简单性，我们调用strdup并因此耗费了很多内存。但这并不影响你解析这个文件。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E我们需要保存字符串的值，在此我们处理的都是一些命名，文件名以及区域命。在下一章，我们将解说如何对付一些复杂类型的数据。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E为通知YACC关于yylval的新类型，我们在YACC的语法文件中添加一行：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-cpp\"\u003E\u003Cspan class=\"cp\"\u003E#define YYSTYPE char *\n\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"6D9NJFuj\"\u003E下面是完整的YACC文件，语法比较复杂，建议结合代码画AST树来帮助理解（原文这里的代码有不少问题，下面是修正后的代码，对语法也简化了一点点）：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-c\"\u003E\u003Cspan class=\"o\"\u003E%\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\u003Cspan class=\"cp\"\u003E#include\u003C\u002Fspan\u003E \u003Cspan class=\"cpf\"\u003E&lt;stdio.h&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E#include\u003C\u002Fspan\u003E \u003Cspan class=\"cpf\"\u003E&lt;string.h&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"cp\"\u003E#define YYSTYPE char *\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"k\"\u003Eextern\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EYYSTYPE\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eyylval\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"c1\"\u003E\u002F\u002Fint yydebug = 1; \u002F\u002F debug\n\u003C\u002Fspan\u003E\u003Cspan class=\"c1\"\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"k\"\u003Eextern\u003C\u002Fspan\u003E \u003Cspan class=\"kt\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003Eyylex\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"kt\"\u003Evoid\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"k\"\u003Eextern\u003C\u002Fspan\u003E \u003Cspan class=\"kt\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003Eyyparse\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"kt\"\u003Evoid\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"kt\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003Eyywrap\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E()\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"kt\"\u003Evoid\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003Eyyerror\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"k\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"kt\"\u003Echar\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Es\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"n\"\u003Eprintf\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;[error] %s\u003C\u002Fspan\u003E\u003Cspan class=\"se\"\u003E\\n\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Es\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"kt\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E()\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"n\"\u003Eyyparse\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E%\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"o\"\u003E%\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Etoken\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ESEMICOLON\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EZONETOK\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EOBRACE\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EEBRACE\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EQUOTE\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EFILENAME\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EWORD\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EFILETOK\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"o\"\u003E%%\u003C\u002Fspan\u003E\n\u003Cspan class=\"nl\"\u003Ecommands\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E|\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ecommands\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ecommand\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ESEMICOLON\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"nl\"\u003Ecommand\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003Ezone_set\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"nl\"\u003Ezone_set\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003EZONETOK\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Equotedname\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ezonecontent\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"n\"\u003Eprintf\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;Complete zone for &#39;%s&#39; found\u003C\u002Fspan\u003E\u003Cspan class=\"se\"\u003E\\n\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"err\"\u003E$\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E};\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"nl\"\u003Ezonecontent\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003EOBRACE\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ezonestatements\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EEBRACE\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"nl\"\u003Equotedname\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003EQUOTE\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EFILENAME\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EQUOTE\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"err\"\u003E$$\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"err\"\u003E$\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E};\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"nl\"\u003Ezonestatements\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E|\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ezonestatements\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ezonestatement\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ESEMICOLON\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"nl\"\u003Ezonestatement\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003Estatements\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E|\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EFILETOK\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Equotedname\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"n\"\u003Eprintf\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;A zonefile name &#39;%s&#39; was encountered\u003C\u002Fspan\u003E\u003Cspan class=\"se\"\u003E\\n\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"err\"\u003E$\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E};\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"nl\"\u003Estatements\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E|\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EWORD\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Estatement\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"err\"\u003E$$\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"err\"\u003E$\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"c1\"\u003E\u002F\u002F seems unnecessary\n\u003C\u002Fspan\u003E\u003Cspan class=\"c1\"\u003E\u003C\u002Fspan\u003E\t\u003Cspan class=\"n\"\u003Eprintf\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;statements, key: %s, value: %s\u003C\u002Fspan\u003E\u003Cspan class=\"se\"\u003E\\n\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"err\"\u003E$\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"err\"\u003E$\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E};\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"nl\"\u003Estatement\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003EWORD\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E|\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Equotedname\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"o\"\u003E%%\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"A8mfUTI5\"\u003E\u003Cbr\u002F\u003E我们执行example6的输出文件：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-bash\"\u003E\u003Cspan class=\"c1\"\u003E# 将配置文件的内容保存到sample.conf文件中，方便测试\u003C\u002Fspan\u003E\n$ cat sample.conf \u003Cspan class=\"p\"\u003E|\u003C\u002Fspan\u003E .\u002Fexample6\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"QRYI-zId\"\u003E\u003Cbr\u002F\u003E输出为：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-text\"\u003E   statements, key: type, value: hint\nstatements, key: name, value: foo\nstatements, key: hello, value: \u002Fhello\u002Fworld\n A zonefile name &#39;\u002Fetc\u002Fbind\u002Fdb.root&#39; was encountered\nComplete zone for &#39;.\u002Fwww&#39; found\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Ch2\u003E五、生成C++代码的解析器\u003C\u002Fh2\u003E\u003Cp data-pid=\"QSlvKILc\"\u003E虽然LEX和YACC的历史要早于C++，但是还是可以用它们来生成一个C++解析器。但我们用LEX来生成C++的词法分析器，YACC并不知道如何直接来处理这些，所以我们不打算这么做。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E我认为比较好的做法是，要做一个C++解析器，就需要LEX生成一个C文件，并且让YACC来生成C++代码。但当你这么做的时候，在这个过程中你将会遇到问题，因为C++代码默认情况下并不能找到C的函数，除非你将那些函数定义为extern “C”。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E为达此目的，我们在YACC代码中编写一个C开头：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-c\"\u003E\u003Cspan class=\"k\"\u003Eextern\u003C\u002Fspan\u003E \u003Cspan class=\"err\"\u003E“\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EC\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E”\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"kt\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eyyparse\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"kt\"\u003Evoid\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n    \u003Cspan class=\"kt\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003Eyylex\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"kt\"\u003Evoid\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n    \u003Cspan class=\"kt\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003Eyywrap\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E()\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n        \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"9REAoLns\"\u003E如果你想声明并改变yydebug函数，你得这样做：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-c\"\u003E\u003Cspan class=\"k\"\u003Eextern\u003C\u002Fspan\u003E \u003Cspan class=\"kt\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eyydebug\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"kt\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E()\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"n\"\u003Eyydebug\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"n\"\u003Eyyparse\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"glIITfEm\"\u003E这是因为C++中的一个关于定义的规则，即不允许yydebug的多处定义。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E你还可能发现，你需要在你的LEX文件中重复#define YYSTYPE，这是由于C++中严格的类型检查(机制)造成的。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E按照如下方式来编译：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-basemake\"\u003E# Makefile\nexample_cpp:\n\tlex -o $@.yy.c $@.lex\n\tcc -c $@.yy.c -o $@.yy.o\n\tyacc -dtv $@.yy -o $@.cpp\n\tg++ $@.yy.o $@.cpp -o $@.out\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"D5xEDtSZ\"\u003E由于-o选项的存在，y.tab.h现在变成example_cpp.hpp，记住这点。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E总结： 不要自寻烦恼的在C++中编译你的词法分析器，让它呆在C的领地里。在C++中编写解析器时，(也得)确保向编译器解释清楚，即你的C函数都有一个extern “C”声明。\u003C\u002Fp\u003E\u003Ch2\u003E六、Lex和YACC内部工作原理\u003C\u002Fh2\u003E\u003Cp data-pid=\"GAatPNhv\"\u003E在YACC文件中，你定义了你自己的main()函数，它在某个点上调用了yyparse()。YACC会创建你的yyparse()函数，并在y.tab.c中结束该函数。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003Eyyparse()函数读取一个『标识符\u002F值对』(token\u002Fvalue pairs)流，这些流需要事先就提供，这些流可以是你自己手写的代码提供的，也可以是LEX生成的。在我们的示例中，我们把这个工作丢给了LEX。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003ELEX生成的yylex()函数从文件参数FILE *file中读取字符(文件名为yyin)。如果不设置成yyin，则默认为标准输入，它会输出到yyout中，如果不加设置，就是stdout。你可以在yywrap()函数中修改位于文件尾的yyin.yywrap()函数。这些修改使得你可以打开另一些文件，并继续解析。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E如果是这种情况，那么就让yywrap()返回0，如果你想在该文件上结束解析，就让它返回1。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E每次yylex()调用都会返回一个整数值，该值代表了一个标识符类型(token type)。它告诉YACC，已经读取了这种标识符。该标识符可以有一个值，它应该存放在yylval变量中。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003Eyylval的默认类型为int，但是你可以修改其类型，通过在YACC文件中#define YYSTYPE。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E词法分析器需要能够访问yylval，为达到此效果，(yylval)必须在词法分析器(lexer)中被声明为一个外部变量(extern variable)。原来的YACC忽略了这点，并没有为你干这项工作，所以，你必须添加以下代码到你的词法分析器中，就在#include &lt;y.tab.h&gt;下面：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-c\"\u003E\u003Cspan class=\"k\"\u003Eextern\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EYYSTYPE\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eyylval\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"exPgTA7T\"\u003E当今多数人使用的Bison已经为你把这事自动做好了。\u003C\u002Fp\u003E\u003Ch3\u003E6.1 标识符的值(token values)\u003C\u002Fh3\u003E\u003Cp data-pid=\"DvCm6rHB\"\u003E在前面我已经说过，yylex()需要返回它遇到了一个什么标识符类型，并将其值存储在yylval中。当这些标识符在%token命令中定义时，它们就被赋予了一些数字ID，从256开始。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E由于这个事实，(我们)可以将所有的ascii字符当作标识符。假定你要写一个计算器，到现在为止，我们可能已经这样写了其词法分析器：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-c\"\u003E\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E9\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eyylval\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eatoi\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eyytext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ENUMBER\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E \u003Cspan class=\"err\"\u003E\\\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003En\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"cm\"\u003E\u002F* eat whitespace *\u002F\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EMINUS\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"err\"\u003E\\\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EMULT\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"err\"\u003E\\\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EPLUS\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"err\"\u003E…\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"EUVVqSKf\"\u003EYACC文件可能是这样：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-c\"\u003E\u003Cspan class=\"nl\"\u003Eexp\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ENUMBER\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E|\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eexp\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EPLUS\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eexp\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E|\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eexp\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EMINUS\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eexp\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E|\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eexp\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EMULT\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eexp\u003C\u002Fspan\u003E\n\u003Cspan class=\"err\"\u003E…\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"yNBl1oQK\"\u003E没有必要弄这么复杂。用字符作为速记法来作为标识符的数字ID，我们可以这样来重写我们的词法分析器：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-c\"\u003E\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E9\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eyylval\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eatoi\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eyytext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ENUMBER\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E \u003Cspan class=\"err\"\u003E\\\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003En\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"cm\"\u003E\u002F* eat whitespace *\u002F\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"kt\"\u003Eint\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eyytext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E];\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"a-wDGY8T\"\u003E最后一行匹配任何的单个字符，否则就是不匹配字符。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E而YACC的语法文件则是这样:\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-c\"\u003E\u003Cspan class=\"nl\"\u003Eexp\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ENUMBER\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E|\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eexp\u003C\u002Fspan\u003E \u003Cspan class=\"sc\"\u003E&#39;+&#39;\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eexp\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E|\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eexp\u003C\u002Fspan\u003E \u003Cspan class=\"sc\"\u003E&#39;-&#39;\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eexp\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E|\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eexp\u003C\u002Fspan\u003E \u003Cspan class=\"sc\"\u003E&#39;*&#39;\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eexp\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"X9vMIjVP\"\u003E这样更加简短而直观，你就不必在文件头用%token来定义那些ascii字符了。\u003Cbr\u002F\u003E另一方面，这样构造还有一些好处，它可以匹配所有丢给它的东西，而避免了将那些不匹配的输入输出到标准输出的默认行为。如果用户在当前计算器上输入一个’^’字符，将会导致一个解析错误，而不是将其输出到标准输出中。\u003C\u002Fp\u003E\u003Ch3\u003E6.2 递归：’right is wrong’\u003C\u002Fh3\u003E\u003Cp data-pid=\"fyDvg8Kb\"\u003E递归是YACC一个极其重要的特性。没有递归的话，你就确定一个文件是由一系列独立的命令组成还是由语句组成。由于YACC自身的特性，它只对第一个规则或那个你将其设计为『起始规则』的规则感兴趣。起始规则用’%start’符号标记。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003EYACC中的递归以两种形式出现，左递归和右递归。左递归是你应该经常使用的，它们看起来如下：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-text\"\u003Ecommands ： \u002F* empty *\u002F\n| commands command\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"ZqVVG-M0\"\u003E\u003Cbr\u002F\u003E这是在说，一个command要么为空，要么它包含了更多的commands，后面再跟一个command。YACC的这种工作方式意味着它现在可以轻易的剔除单个的command群并一步步简化(处理)。\u003Cbr\u002F\u003E拿上面的例子和下面的右递归做比较：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-text\"\u003Ecommands : \u002F* empty *\u002F\n| command commands\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"nlGAXf75\"\u003E但是这样做开销有点大，如果(commands)是%start规则(即起始规则)，那么YACC会将所有的commands保存在你的栈数据中(file on the stack)，这将耗费大量内存。所以，在解析长的语句时，务必使用左递归，例如整个文件。但有时难以避免右递归，不过，如果你的语句并不太长，你就没有必要越轨使用左递归。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E如果你有一些东西来终结(因此而分割)你的commands，右递归就非常适合了，但开销还是有点大:\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-text\"\u003Ecommands : \u002F* empty *\u002F\n| command SEMICOLON commands\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"YYpyfku9\"\u003E正确的做法是使用左递归(这也不是我发明的)：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-text\"\u003Ecommands : \u002F* empty *\u002F\n| commands command SEMICOLON\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"-Uy2XNzF\"\u003E本文档的早期版本错误的使用了右递归。Markus Triska友好的提示我们这点(错误)。\u003C\u002Fp\u003E\u003Ch3\u003E6.3 高级yylval: %union\u003C\u002Fh3\u003E\u003Cp data-pid=\"9FlIcupY\"\u003E现在，我们需要定义yylval的类型。但是这并不一直恰如其当。我们可能会多次这样做，因为需要处理多种数据类型。回到我们假定的那个恒温器，可能你想选择控制一个加热器，例如：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-text\"\u003Eheater mainbuilding\nSelected ‘mainbuilding’ heater\nTarget temperature 23\n‘mainbuilding’ heater target temperature now 23\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"x3ZMngvn\"\u003E这样的话，就要求yylval是一个union，它可以存储字符串，也可以存储整数，但并不是同时存储。\u003Cbr\u002F\u003E回忆之前我们讲过，我们提前通知YACC哪种yylval类型会要处理是通过定义YYSTYPE来实现。同样，我们可以定义YYSTYPE为一个union，YACC中有一种简便的方法来实现，即%union语句。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E在example4基础上，我编写example7的YACC语法：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-c\"\u003E\u003Cspan class=\"o\"\u003E%\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Etoken\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ETOKHEATER\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ETOKHEAT\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ETOKTARGET\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ETOKTEMERATURE\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E%\u003C\u002Fspan\u003E\u003Cspan class=\"k\"\u003Eunion\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\u003Cspan class=\"kt\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"kt\"\u003Echar\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E%\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Etoken\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ESTATE\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E%\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Etoken\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ENUMBER\u003C\u002Fspan\u003E\n\u003Cspan class=\"o\"\u003E%\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Etoken\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EWORD\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"ow17v5tj\"\u003E我们定义了union，它只包含一个整数和一个字符串。接着使用了一个扩展的%token语法，我们向YACC解释了应该获取union哪个部分的标识符。\u003Cbr\u002F\u003E在本例中，我们让STATE标识符用一个整数(来表示)，这跟之前一样。NUMBER同理，我们之前用来读取温度。\u003Cbr\u002F\u003E但是WORD有所改变，它声明为需要一个字符串。\u003Cbr\u002F\u003E词法解析器文件有所改变：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-c\"\u003E\u003Cspan class=\"o\"\u003E%\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\u003Cspan class=\"cp\"\u003E#include\u003C\u002Fspan\u003E \u003Cspan class=\"cpf\"\u003E&lt;stdio.h&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E#include\u003C\u002Fspan\u003E \u003Cspan class=\"cpf\"\u003E&#34;y.tab.h&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E%\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"o\"\u003E%%\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E9\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eyylval\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eatoi\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eyytext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ENUMBER\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003Eheater\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ETOKHEATER\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003Eheat\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ETOKHEAT\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E|\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eoff\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eyylval\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Enumber\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=!\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Estrcmp\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eyytext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;on&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EreturnSTATE\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003Etarget\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ETOKTARGET\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003Etemperature\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ETOKTEMPERATURE\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ea\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ez0\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E9\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eyylval\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Estring\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Estrdup\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eyytext\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EWORD\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"err\"\u003E\\\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003En\u003C\u002Fspan\u003E \u003Cspan class=\"cm\"\u003E\u002F* ignore end of line *\u002F\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E \u003Cspan class=\"err\"\u003E\\\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Et\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"cm\"\u003E\u002F* ignore whitespace *\u002F\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"o\"\u003E%%\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"o222Dwzx\"\u003E正如你所见，我们不再直接访问yylval，我们添加了一个后缀来说明我们要访问那个部分。我们不再需要在YACC语法文件中来干这个工作，YACC在这里耍了下魔法：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-c\"\u003E\u003Cspan class=\"nl\"\u003Eheater_select\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003ETOKHEATER\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EWORD\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"n\"\u003Eprintf\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"se\"\u003E\\t\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003ESelected heater &#39;%s&#39;\u003C\u002Fspan\u003E\u003Cspan class=\"se\"\u003E\\n\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"err\"\u003E$\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n    \u003Cspan class=\"n\"\u003Eheater\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"err\"\u003E$\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E};\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"zu7SRki5\"\u003E由于上面的%token声明，YACC自动选择了union中的’string’成员。注意这里$2中存储的一份拷贝，在后面它会告诉用户发送命令到哪个heater（需要在C文件头定义char *heater）：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-c\"\u003E\u003Cspan class=\"nl\"\u003Etarget_set\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003ETOKTARGET\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ETOKTEMPERATURE\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ENUMBER\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"n\"\u003Eprintf\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"se\"\u003E\\t\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003EHeater &#39;%s&#39; temperature set to %d\u003C\u002Fspan\u003E\u003Cspan class=\"se\"\u003E\\n\u003C\u002Fspan\u003E\u003Cspan class=\"s\"\u003E&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \n            \u003Cspan class=\"n\"\u003Eheater\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"err\"\u003E$\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E3\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E};\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Ch3\u003E6.4 自定义YY_INPUT指向字符串而非标准输入\u003C\u002Fh3\u003E\u003Cp data-pid=\"Orlovwky\"\u003E很多情况下，我们不希望从标准输入解析，而希望解析给定的字符串。实现方法是自定义实现YY_INPUT，具体做法如下：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-c\"\u003E\u003Cspan class=\"cm\"\u003E\u002F* LEX 文件 *\u002F\u003C\u002Fspan\u003E\n\u003Cspan class=\"k\"\u003Eextern\u003C\u002Fspan\u003E \u003Cspan class=\"kt\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003Elex_custom_input\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"kt\"\u003Echar\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ebuf\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"kt\"\u003Eunsigned\u003C\u002Fspan\u003E \u003Cspan class=\"kt\"\u003Elong\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Enum_read\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\u003Cspan class=\"kt\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Emax_read\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"cp\"\u003E#undef YY_INPUT\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E#define YY_INPUT(b,r,s) lex_custom_input(b,&amp;r,s)\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"cm\"\u003E\u002F* C 文件 *\u002F\u003C\u002Fspan\u003E\n\u003Cspan class=\"k\"\u003Estatic\u003C\u002Fspan\u003E \u003Cspan class=\"kt\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eg_read_offset\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"cp\"\u003E#define MAX_TEXT_LEN 1024\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"k\"\u003Estatic\u003C\u002Fspan\u003E \u003Cspan class=\"kt\"\u003Echar\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Es_text_buf\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EMAX_TEXT_LEN\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E];\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"kt\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\"nf\"\u003Elex_custom_input\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"kt\"\u003Echar\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ebuf\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"kt\"\u003Eunsigned\u003C\u002Fspan\u003E \u003Cspan class=\"kt\"\u003Elong\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Enum_read\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E\u003Cspan class=\"kt\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Emax_read\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"kt\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Enum_to_read\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Emax_read\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"kt\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eremain\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Estrlen\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Es_text_buf\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E-\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eg_read_offset\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"n\"\u003Enum_to_read\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Enum_to_read\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eremain\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E?\u003C\u002Fspan\u003E \u003Cspan class=\"nl\"\u003Ereamin\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Enum_to_read\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"n\"\u003Ememcpy\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ebuf\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Es_text_buf\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eg_read_offset\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Enum_to_read\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Enum_read\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Enum_to_read\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"n\"\u003Eg_read_offset\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E+=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Enum_to_read\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"k\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Ch2\u003E七、调试\u003C\u002Fh2\u003E\u003Cp data-pid=\"0yhhMMmN\"\u003EYACC中有许多调试反馈信息。这些调试信息的代价有点高，所以你需要提供一些开关来打开它。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E当调试你的语法时，在YACC命令行中添加—debug和—verbose选项，在你的C文件头中添加以下语句：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-c\"\u003E\u003Cspan class=\"kt\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eyydebug\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"vtSayjJp\"\u003E\u003Cbr\u002F\u003E这将生成一个y.output文件，其中说明了所创建的那个状态机。\u003Cbr\u002F\u003E当你运行那个生成的二进制文件，它将输出很多运行时信息。里面包含当前所运行的状态机以及读取到的一些标识符。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003EPeter Jinks写了一篇关于调试的文章，他在其中讲述了一些常见得错误以及如何修正这些错误。\u003C\u002Fp\u003E\u003Ch3\u003E7.1 状态机\u003C\u002Fh3\u003E\u003Cp data-pid=\"-8X3be0x\"\u003EYACC解析器在内部运行的是一个『状态机』，该状态机可以有多种转台。接着有多个规则来管制状态间的相互转化。任何内容都是从『root』规则开始。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E在example7的y.output文件中：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-text\"\u003Estate 0\nZPONETOK , and go to state 1\n$default reduce using rule 1 (commands)\ncommands go to state 29\ncommand go to state 2\nzone_set go to satte 3\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"L0Wvnw24\"\u003E默认情形下，这个状态机从『commands』规则开始递减演化，这也是我们之前的那个递归规则，它定义了『commands』并从单个的『command』进行构造，后面跟着一个分号，然后可能再跟着更多的『commands』。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E这个状态机不断递减演化，直到它遇到某些它能理解的东西，在本例中，为一个ZONETOK，也即单词『zone』。然后转化到状态1，在此，进一步处理一个zone command:\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-text\"\u003Estate 1\nzone_set -&gt; ZONETOK .quotedname zonecontent (rule 4)\nQUOTE , and go to state 4\nQuotedname go to state 5\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"5lG_Mo77\"\u003E第一行中有一个『.』，它用来说明我们所处的位置：即刚刚识别到了一个ZONETOK，目前正在寻找一个『quotedname』。显然，一个『quotedname』会以QUOTE开始，它将我们转化到状态4。\u003Cbr\u002F\u003E为进一步跟踪，用在『调试』章节中提到的标志来编译example7。\u003C\u002Fp\u003E\u003Ch3\u003E7.2 冲突：『shift\u002Freduce』以及『reduce\u002Freduce』\u003C\u002Fh3\u003E\u003Cp data-pid=\"UyGzfxSj\"\u003E一旦YACC警告你出现了冲突，那么你的麻烦来了。要解决这些问题显得是一种技巧形式，它会教会很多关于你的语言的东西。比你想知道的要多的多的内容。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E问题萦绕于如何来翻译一系列标识符。假定我们定义了一种语言，它需要接受一下两种命令：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-text\"\u003Edelete heater all\ndelete heater number1\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"FaQZU1vs\"\u003E为达到此目的，我们的语法为：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-c\"\u003E\u003Cspan class=\"nl\"\u003Edelete_heaters\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003ETOKDELETE\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ETOKHEATER\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Emode\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"n\"\u003EDeleteheaters\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E$\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E3\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"nl\"\u003Emode\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EWORD\u003C\u002Fspan\u003E\n\u003Cspan class=\"nl\"\u003Edelete_a_heater\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E:\u003C\u002Fspan\u003E\n\u003Cspan class=\"n\"\u003ETOKDELETE\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ETOKHEATER\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EWORD\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"n\"\u003Edelete\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"err\"\u003E$\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E3\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp data-pid=\"mkFz6e4s\"\u003E\u003Cbr\u002F\u003E也许你已经嗅到了麻烦的味道。状态机从读取单词『word』开始，接着它根据下一个标识符觉得转换到何种状态。接下来的标识符可以是『mode』，它指定了如何来删除heater，或者是将要删除的heater。\u003Cbr\u002F\u003E然而这里的麻烦是，对于这两个命令，下一个标识符都将是一个WORD。YACC因此也无法决定下一步该干嘛。这回导致一个『reduce\u002Freduce』警告，而下一个警告就是『delete_a_heater』节点在状态转化图中永远也不能达到。\u003Cbr\u002F\u003E这种情况的冲突容易解决(例如，重命名第一个命令为『delete all heater』，或者将『all』作为一个分开的标识符)，但有时，(要解决冲突)却非常困难。 通过『--verbose』参数生成的y.output文件可以提供给你极大的帮助。\u003C\u002Fp\u003E\u003Ch2\u003E八、进一步阅读\u003C\u002Fh2\u003E\u003Cp data-pid=\"rOLNbzys\"\u003EGNU YACC(Bison)有一个非常棒的.info文件，在其中很好的记录了YACC的语法。其中只提到了一次LEX，然而它还是很棒的。你可以用Emacs中那个非常好的『pinfo』工具阅读.info文件。同时，在Bison的主页上可以获得它：\u003Cu\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fwww.gnu.org\u002Fsoftware\u002Fbison\u002Fmanual\u002Fbison.html\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EBison手册\u003C\u002Fa\u003E\u003C\u002Fu\u003E。\u003Cbr\u002F\u003EFLEX有一个不错的主页。如果你粗略了解了FLEX所作所为，那将是非常有益的。\u003Cu\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fwww.gnu.org\u002Fmanual\u002Fflex\u002F\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EFLEX的手册\u003C\u002Fa\u003E\u003C\u002Fu\u003E也可以联机获取。\u003Cbr\u002F\u003E在这些关于YACC和LEX的介绍之后，你可能觉得你想需要更多的信息。下面的书籍我们都还没有阅读，但他们听起来不错：\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli data-pid=\"iChC8Td1\"\u003E《Bison—The Yacc-Compitible Parser Generator》——Charles Donnelly &amp;&amp; Richard Stallman.\u003C\u002Fli\u003E\u003Cli data-pid=\"bAN8s3Xl\"\u003E《Lex &amp; Yacc》——John R. Levine, Tony Mason ,Doug Brown.\u003C\u002Fli\u003E\u003Cli data-pid=\"oACIu7G6\"\u003E《Compilers: Principles, Techniques, and Tools》——By Alfred V.Aho,Ravi\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp class=\"ztext-empty-paragraph\"\u003E\u003Cbr\u002F\u003E\u003C\u002Fp\u003E\u003Cp data-pid=\"Xe-ZlcuF\"\u003E原文：\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fwww.cnblogs.com\u002Fhdk1993\u002Fp\u002F4922866.html\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E\u003Cspan class=\"invisible\"\u003Ehttps:\u002F\u002Fwww.\u003C\u002Fspan\u003E\u003Cspan class=\"visible\"\u003Ecnblogs.com\u002Fhdk1993\u002Fp\u002F4\u003C\u002Fspan\u003E\u003Cspan class=\"invisible\"\u003E922866.html\u003C\u002Fspan\u003E\u003Cspan class=\"ellipsis\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E \u003C\u002Fp\u003E\u003Cp data-pid=\"dbtykddD\"\u003E注：\u003C\u002Fp\u003E\u003Cp data-pid=\"-bm48k4R\"\u003E1）修正了原文中有问题的代码；\u003C\u002Fp\u003E\u003Cp data-pid=\"grXWUha0\"\u003E2）补充了YY_INPUT等内容。\u003C\u002Fp\u003E","adminClosedComment":false,"topics":[{"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F20660281","type":"topic","id":"20660281","name":"lex"},{"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19843902","type":"topic","id":"19843902","name":"词法分析"},{"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19601369","type":"topic","id":"19601369","name":"编译原理"}],"voteupCount":142,"voting":0,"heavyUpStatus":"allow_heavy_up","column":{"description":"","canManage":false,"intro":"后台开发技术分享。欢迎投稿，一起享受技术的乐趣！","isFollowing":false,"urlToken":"server-development","id":"server-development","articlesCount":4,"acceptSubmission":true,"title":"后台开发图鉴","url":"https:\u002F\u002Fzhuanlan.zhihu.com\u002Fserver-development","commentPermission":"all","created":1588747090,"updated":1591429077,"imageUrl":"https:\u002F\u002Fpica.zhimg.com\u002Fv2-e40aec031d2b6ec664fb08d03de58738_720w.jpg?source=172ae18b","author":{"isFollowed":false,"avatarUrlTemplate":"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-ffae45eb0d5db66f67640e894321c303.jpg?source=172ae18b","uid":"700985472867913728","userType":"people","isFollowing":false,"urlToken":"donghua.lau","id":"81eca0b6d2dc75a6fa57294337be0d9a","description":"从事数据库、数仓、数据湖、大数据等架构与研发。","name":"Deepliu","isAdvertiser":false,"headline":"在南方城市敲代码","gender":1,"url":"\u002Fpeople\u002F81eca0b6d2dc75a6fa57294337be0d9a","avatarUrl":"https:\u002F\u002Fpica.zhimg.com\u002Fv2-ffae45eb0d5db66f67640e894321c303_l.jpg?source=172ae18b","isOrg":false,"type":"people"},"followers":3,"type":"column"},"commentCount":5,"contributions":[{"id":24125398,"state":"accepted","type":"first_publish","column":{"description":"","canManage":false,"intro":"后台开发技术分享。欢迎投稿，一起享受技术的乐趣！","isFollowing":false,"urlToken":"server-development","id":"server-development","articlesCount":4,"acceptSubmission":true,"title":"后台开发图鉴","url":"https:\u002F\u002Fzhuanlan.zhihu.com\u002Fserver-development","commentPermission":"all","created":1588747090,"updated":1591429077,"imageUrl":"https:\u002F\u002Fpica.zhimg.com\u002Fv2-e40aec031d2b6ec664fb08d03de58738_720w.jpg?source=172ae18b","author":{"isFollowed":false,"avatarUrlTemplate":"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-ffae45eb0d5db66f67640e894321c303.jpg?source=172ae18b","uid":"700985472867913728","userType":"people","isFollowing":false,"urlToken":"donghua.lau","id":"81eca0b6d2dc75a6fa57294337be0d9a","description":"从事数据库、数仓、数据湖、大数据等架构与研发。","name":"Deepliu","isAdvertiser":false,"headline":"在南方城市敲代码","gender":1,"url":"\u002Fpeople\u002F81eca0b6d2dc75a6fa57294337be0d9a","avatarUrl":"https:\u002F\u002Fpica.zhimg.com\u002Fv2-ffae45eb0d5db66f67640e894321c303_l.jpg?source=172ae18b","isOrg":false,"type":"people"},"followers":3,"type":"column"}},{"id":24263089,"state":"accepted","type":"first_publish","column":{"description":"数据库和存储开发的技术分享。","canManage":false,"intro":"","isFollowing":false,"urlToken":"c_1252160759133978624","id":"c_1252160759133978624","articlesCount":20,"acceptSubmission":true,"title":"数据库与存储","url":"https:\u002F\u002Fzhuanlan.zhihu.com\u002Fc_1252160759133978624","commentPermission":"all","created":1591318389,"updated":1591318389,"imageUrl":"https:\u002F\u002Fpic1.zhimg.com\u002F4b70deef7_720w.jpg?source=172ae18b","author":{"isFollowed":false,"avatarUrlTemplate":"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-ffae45eb0d5db66f67640e894321c303.jpg?source=172ae18b","uid":"700985472867913728","userType":"people","isFollowing":false,"urlToken":"donghua.lau","id":"81eca0b6d2dc75a6fa57294337be0d9a","description":"从事数据库、数仓、数据湖、大数据等架构与研发。","name":"Deepliu","isAdvertiser":false,"headline":"在南方城市敲代码","gender":1,"url":"\u002Fpeople\u002F81eca0b6d2dc75a6fa57294337be0d9a","avatarUrl":"https:\u002F\u002Fpica.zhimg.com\u002Fv2-ffae45eb0d5db66f67640e894321c303_l.jpg?source=172ae18b","isOrg":false,"type":"people"},"followers":12,"type":"column"}}],"isTitleImageFullScreen":false,"upvotedFollowees":[],"commercialInfo":{"isCommercial":false,"plugin":{}},"suggestEdit":{"status":false,"reason":"","tip":"","url":"","title":""},"reason":"","annotationAction":[],"canTip":true,"tipjarorsCount":0,"isLabeled":false,"hasPublishingDraft":false,"isFavorited":false,"favlistsCount":183,"isNormal":true,"status":0,"shareText":"Lex与YACC详解 - 来自知乎专栏「后台开发图鉴」，作者: Deepliu https:\u002F\u002Fzhuanlan.zhihu.com\u002Fp\u002F143867739 （想看更多？下载 @知乎 App：http:\u002F\u002Fweibo.com\u002Fp\u002F100404711598 ）","canComment":{"status":true,"reason":""},"mcnFpShow":-1,"isVisible":true,"isLiked":false,"likedCount":31,"hasColumn":true,"republishers":[],"isNewLinkCard":true,"emojiReaction":{"cryFaceCount":0,"cryFaceHasSet":false,"hugCount":0,"hugHasSet":false,"likeCount":31,"likeHasSet":false,"onlookerCount":0,"onlookerHasSet":false},"abParam":{"shangyebiaoshi":"1"},"attachedInfo":"kgIkCgkxMjAxMDI4MjESCTE0Mzg2NzczORgHIgpJTUFHRV9URVhU","settings":{"tableOfContents":{"enabled":true}},"canReference":false,"reactionInstruction":{}}},"columns":{"server-development":{"description":"","canManage":false,"intro":"后台开发技术分享。欢迎投稿，一起享受技术的乐趣！","isFollowing":false,"urlToken":"server-development","id":"server-development","articlesCount":4,"acceptSubmission":true,"title":"后台开发图鉴","url":"https:\u002F\u002Fzhuanlan.zhihu.com\u002Fserver-development","commentPermission":"all","created":1588747090,"updated":1591429077,"imageUrl":"https:\u002F\u002Fpica.zhimg.com\u002Fv2-e40aec031d2b6ec664fb08d03de58738_720w.jpg?source=172ae18b","author":{"isFollowed":false,"avatarUrlTemplate":"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-ffae45eb0d5db66f67640e894321c303.jpg?source=172ae18b","uid":"700985472867913728","userType":"people","isFollowing":false,"urlToken":"donghua.lau","id":"81eca0b6d2dc75a6fa57294337be0d9a","description":"从事数据库、数仓、数据湖、大数据等架构与研发。","name":"Deepliu","isAdvertiser":false,"headline":"在南方城市敲代码","gender":1,"url":"\u002Fpeople\u002F81eca0b6d2dc75a6fa57294337be0d9a","avatarUrl":"https:\u002F\u002Fpica.zhimg.com\u002Fv2-ffae45eb0d5db66f67640e894321c303_l.jpg?source=172ae18b","isOrg":false,"type":"people"},"followers":3,"type":"column"},"c_1252160759133978624":{"description":"数据库和存储开发的技术分享。","canManage":false,"intro":"","isFollowing":false,"urlToken":"c_1252160759133978624","id":"c_1252160759133978624","articlesCount":20,"acceptSubmission":true,"title":"数据库与存储","url":"https:\u002F\u002Fzhuanlan.zhihu.com\u002Fc_1252160759133978624","commentPermission":"all","created":1591318389,"updated":1591318389,"imageUrl":"https:\u002F\u002Fpic1.zhimg.com\u002F4b70deef7_720w.jpg?source=172ae18b","author":{"isFollowed":false,"avatarUrlTemplate":"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-ffae45eb0d5db66f67640e894321c303.jpg?source=172ae18b","uid":"700985472867913728","userType":"people","isFollowing":false,"urlToken":"donghua.lau","id":"81eca0b6d2dc75a6fa57294337be0d9a","description":"从事数据库、数仓、数据湖、大数据等架构与研发。","name":"Deepliu","isAdvertiser":false,"headline":"在南方城市敲代码","gender":1,"url":"\u002Fpeople\u002F81eca0b6d2dc75a6fa57294337be0d9a","avatarUrl":"https:\u002F\u002Fpica.zhimg.com\u002Fv2-ffae45eb0d5db66f67640e894321c303_l.jpg?source=172ae18b","isOrg":false,"type":"people"},"followers":12,"type":"column"}},"topics":{},"roundtables":{},"favlists":{},"comments":{},"notifications":{},"ebooks":{},"activities":{},"feeds":{},"pins":{},"promotions":{},"drafts":{},"chats":{},"posts":{},"clubs":{},"clubTags":{},"zvideos":{},"zvideoContributions":{},"briefs":{},"eduCourses":{}},"currentUser":"","account":{"lockLevel":{},"unlockTicketStatus":false,"unlockTicket":null,"challenge":[],"errorStatus":false,"message":"","isFetching":false,"accountInfo":{},"urlToken":{"loading":false},"cardUserInfo":{"vipInfo":{}},"handleWidget":{},"widgetList":[],"userWidgetId":""},"settings":{"socialBind":null,"inboxMsg":null,"notification":{},"email":{},"privacyFlag":null,"blockedUsers":{"isFetching":false,"paging":{"pageNo":1,"pageSize":6},"data":[]},"blockedFollowees":{"isFetching":false,"paging":{"pageNo":1,"pageSize":6},"data":[]},"ignoredTopics":{"isFetching":false,"paging":{"pageNo":1,"pageSize":6},"data":[]},"restrictedTopics":null,"laboratory":{}},"notification":{},"people":{"profileStatus":{},"activitiesByUser":{},"answersByUser":{},"answersSortByVotesByUser":{},"answersIncludedByUser":{},"votedAnswersByUser":{},"thankedAnswersByUser":{},"voteAnswersByUser":{},"thankAnswersByUser":{},"topicAnswersByUser":{},"zvideosByUser":{},"articlesByUser":{},"articlesSortByVotesByUser":{},"articlesIncludedByUser":{},"pinsByUser":{},"questionsByUser":{},"commercialQuestionsByUser":{},"favlistsByUser":{},"followingByUser":{},"followersByUser":{},"mutualsByUser":{},"followingColumnsByUser":{},"followingQuestionsByUser":{},"followingFavlistsByUser":{},"followingTopicsByUser":{},"publicationsByUser":{},"columnsByUser":{},"allFavlistsByUser":{},"brands":null,"creationsByUser":{},"creationsSortByVotesByUser":{},"creationsFeed":{},"infinity":{},"batchUsers":{},"profileInfinity":null},"env":{"ab":{"config":{"experiments":[{"expId":"launch-qa_cl_guest-2","expPrefix":"qa_cl_guest","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-se_item-3","expPrefix":"se_item","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_andplay_d-2","expPrefix":"vd_andplay_d","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_hookupplay_an-2","expPrefix":"vd_hookupplay_an","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_timeguide-2","expPrefix":"vd_timeguide","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_video_replay-3","expPrefix":"vd_video_replay","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_zvideo_link-10","expPrefix":"vd_zvideo_link","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"vd_bullet_gui-1","expPrefix":"vd_bullet_gui","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"pcdrama_shuiyin-2_v1","expPrefix":"pcdrama_shuiyin","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"help_center-2_v6","expPrefix":"help_center","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"ge_newbie3-1_v1","expPrefix":"ge_newbie3","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"account_sdk-2_v39","expPrefix":"account_sdk","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"explore_newbee-2_v2","expPrefix":"explore_newbee","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"rec_pin_opt-2_v13","expPrefix":"rec_pin_opt","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false}],"params":[{"id":"tp_topic_style","type":"String","value":"0","chainId":"_all_","layerId":"tptp_layer_4"},{"id":"launch_consult","type":"Int","value":"0","layerId":"launch_consult"},{"id":"se_shopguide","type":"Int","value":"0","chainId":"_gene_","layerId":"se_shopguide","key":1361},{"id":"se_pre_rel","type":"Int","value":"0","chainId":"_gene_","layerId":"4djB","key":1684},{"id":"qa_ab_test2","type":"Int","value":"0","chainId":"_gene_","layerId":"ARx2","key":2351},{"id":"gue_recmess","type":"String","value":"0","layerId":"gueqa_layer_795"},{"id":"video_point","type":"Int","value":"0","layerId":"l-video_point"},{"id":"ad_com_zhi","type":"Int","value":"0","chainId":"_gene_","layerId":"ad_com_zhi","key":571},{"id":"And_Collection","type":"Int","value":"0","chainId":"_gene_","layerId":"VbMB","key":848},{"id":"ge_infinity6","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_815","key":2817},{"id":"gue_video_guide","type":"String","value":"1","layerId":"guevd_layer_625"},{"id":"web_audit_01","type":"String","value":"case1","layerId":"webre_layer_1"},{"id":"hwtj_bottom_btn","type":"Int","value":"1","layerId":"l-jrhg"},{"id":"next_autoplay","type":"Int","value":"0","layerId":"l-next_autoplay"},{"id":"answer_keyword","type":"Int","value":"0","layerId":"answer_keyword"},{"id":"a_vdtab_algload","type":"Int","value":"0","chainId":"_gene_","layerId":"a_vdtab_algload","key":2012},{"id":"feed_card","type":"Int","value":"0","chainId":"_gene_","layerId":"feed_card","key":2262},{"id":"se_must_bst","type":"Int","value":"0","chainId":"_gene_","layerId":"se_must_bst","key":1871},{"id":"qa_ab_test8","type":"Int","value":"0","chainId":"_gene_","layerId":"x1jC","key":2357},{"id":"CC_resolution","type":"Int","value":"1","layerId":"CC_resolution"},{"id":"vdox_cmt","type":"Int","value":"0","layerId":"l-9YBb"},{"id":"se_zhiplus_cpc","type":"Int","value":"0","chainId":"_gene_","layerId":"se_zhiplus_cpc","key":716},{"id":"gue_repost","type":"String","value":"1","layerId":"gueqa_layer_671"},{"id":"v_search","type":"Int","value":"0","chainId":"_gene_","layerId":"ICqh","key":1558},{"id":"rec_new2th","type":"Int","value":"0","chainId":"_gene_","layerId":"Hump","key":320},{"id":"hw_aa_50","type":"Int","value":"0","chainId":"_gene_","layerId":"hw_aa_50","key":362},{"id":"Re_Collection","type":"Int","value":"0","chainId":"_gene_","layerId":"9olk","key":847},{"id":"se_nwh_v2","type":"Int","value":"0","chainId":"_gene_","layerId":"se_nwh_v2","key":1366},{"id":"se_edu_monetize","type":"Int","value":"0","chainId":"_gene_","layerId":"se_edu_monetize","key":2472},{"id":"ge_meta_ss","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_834","key":3079},{"id":"new_toolbar","type":"Int","value":"0","chainId":"_gene_","layerId":"new_toolbar","key":1894},{"id":"se_zp_termsize","type":"Int","value":"0","chainId":"_gene_","layerId":"se_zp_termsize","key":2305},{"id":"qa_ab_test7","type":"Int","value":"0","chainId":"_gene_","layerId":"JAwR","key":2356},{"id":"pf_noti_entry_num","type":"String","value":"0","chainId":"_all_","layerId":"pfus_layer_718"},{"id":"qap_question_author","type":"String","value":"0","chainId":"_all_","layerId":"qapqa_layer_2"},{"id":"v_upl_config","type":"Int","value":"0","layerId":"LFDy"},{"id":"i_choosy","type":"Int","value":"0","chainId":"_gene_","layerId":"i_choosy","key":1164},{"id":"gue_bulletmb","type":"String","value":"0","layerId":"guevd_layer_812"},{"id":"gue_fo_recom","type":"String","value":"0","layerId":"gueqa_layer_780"},{"id":"i_vdtab_algload","type":"Int","value":"0","chainId":"_gene_","layerId":"i_vdtab_algload","key":2013},{"id":"se_contentpool","type":"Int","value":"0","chainId":"_gene_","layerId":"me9f","key":2475},{"id":"ge_yuzhi_v1","type":"String","value":"1","chainId":"_gene_","layerId":"gese_layer_1029","key":3127},{"id":"se_must_rank","type":"Int","value":"0","chainId":"_gene_","layerId":"nF45","key":1331},{"id":"se_videoanswer1","type":"Int","value":"0","chainId":"_gene_","layerId":"uvCF","key":1599},{"id":"club_fn","type":"Int","value":"1","layerId":"club_fn"},{"id":"recnew_2th","type":"Int","value":"24","chainId":"_gene_","layerId":"l-recnew_2th","key":67},{"id":"Full_ans_fav","type":"Int","value":"0","chainId":"_gene_","layerId":"Pnd6","key":372},{"id":"i_vdtab_wb","type":"Int","value":"0","chainId":"_gene_","layerId":"i_vdtab_wb","key":1911},{"id":"ge_relation2","type":"String","value":"1","chainId":"_gene_","layerId":"gese_layer_815","key":2796},{"id":"ge_newbie3","type":"Int","value":"0","chainId":"_gene_","layerId":"ge_newbie3","key":180},{"id":"pfd_newbie","type":"Int","value":"0","chainId":"_gene_","layerId":"pfd_newbie","key":63},{"id":"book_ebook","type":"Int","value":"0","chainId":"_gene_","layerId":"book_ebook","key":758},{"id":"gue_art_ui","type":"String","value":"0","layerId":"gueqa_layer_647"},{"id":"ge_usercard1","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_742","key":2740},{"id":"rec_pin_opt","type":"Int","value":"1","chainId":"_gene_","layerId":"0b8V","key":2151},{"id":"se_financial","type":"Int","value":"0","chainId":"_gene_","layerId":"se_financial","key":1111},{"id":"se_edu_model","type":"Int","value":"0","chainId":"_gene_","layerId":"KBmE","key":1537},{"id":"se_qs_offline","type":"Int","value":"0","chainId":"_gene_","layerId":"gkhl","key":1702},{"id":"se_convbox","type":"Int","value":"0","chainId":"_gene_","layerId":"tLUl","key":1771},{"id":"gerenye_tab","type":"Int","value":"0","layerId":"l-gerenye_tab"},{"id":"se_simclick","type":"Int","value":"0","chainId":"_gene_","layerId":"se_simclick","key":1507},{"id":"se_zp_score","type":"Int","value":"0","chainId":"_gene_","layerId":"se_zp_score","key":2367},{"id":"ts_refresh","type":"Int","value":"1","layerId":"EBn6"},{"id":"se_market_ctl","type":"Int","value":"0","chainId":"_gene_","layerId":"ccCn","key":1707},{"id":"se_mix_rank","type":"Int","value":"0","chainId":"_gene_","layerId":"ewiV","key":2465},{"id":"account_sdk","type":"Int","value":"2","chainId":"_gene_","layerId":"account_sdk","key":810},{"id":"gue_messrec","type":"String","value":"0","layerId":"gueqa_layer_769"},{"id":"card_ctr01","type":"Int","value":"0","layerId":"card_ctr01"},{"id":"show_ad","type":"Int","value":"0","chainId":"_gene_","layerId":"show_ad","key":27},{"id":"se_zhiplus_ec","type":"Int","value":"0","chainId":"_gene_","layerId":"se_zhiplus_ec","key":1511},{"id":"se_zhi_plus","type":"Int","value":"0","chainId":"_gene_","layerId":"6r4W","key":2170},{"id":"ge_newcard","type":"String","value":"3","chainId":"_gene_","layerId":"geus_layer_839","key":2997},{"id":"editor_test2","type":"Int","value":"0","layerId":"editor_test2"},{"id":"zvideocard","type":"Int","value":"0","chainId":"_gene_","layerId":"zvideocard","key":1321},{"id":"vanswer_new","type":"Int","value":"0","chainId":"_gene_","layerId":"vanswer_new","key":1420},{"id":"se_searchfilter","type":"Int","value":"0","chainId":"_gene_","layerId":"se_searchfilter","key":1438},{"id":"edu_i_off_ab","type":"Int","value":"0","chainId":"_gene_","layerId":"edu_i_off_ab","key":2166},{"id":"tp_zrec","type":"String","value":"0","chainId":"_all_","layerId":"tptp_layer_619"},{"id":"se_v_rank_ab","type":"Int","value":"0","chainId":"_gene_","layerId":"se_v_rank_ab","key":1035},{"id":"a_vdtab_wb","type":"Int","value":"0","chainId":"_gene_","layerId":"a_vdtab_wb","key":1912},{"id":"se_time_box","type":"Int","value":"0","chainId":"_gene_","layerId":"nK7D","key":2449},{"id":"gue_art2qa","type":"String","value":"0","layerId":"gueqa_layer_579"},{"id":"pcdrama_shuiyin","type":"Int","value":"1","layerId":"ZmU4"},{"id":"PCplayingspeed","type":"Int","value":"0","layerId":"PCplayingspeed"},{"id":"explore_b","type":"Int","value":"0","chainId":"_gene_","layerId":"explore_b","key":1257},{"id":"se_pincard","type":"Int","value":"0","chainId":"_gene_","layerId":"se_pincard","key":2185},{"id":"gue_profile_video","type":"String","value":"1","layerId":"guevd_layer_5"},{"id":"editor","type":"Int","value":"0","layerId":"editor"},{"id":"test_rec","type":"Int","value":"10","layerId":"test_rec"},{"id":"Message_3","type":"Int","value":"0","chainId":"_gene_","layerId":"Message_3","key":2370},{"id":"se_ffzx_jushen1","type":"String","value":"0","chainId":"_all_","layerId":"sese_layer_4"},{"id":"web_answer_list_ad","type":"String","value":"1","layerId":"webqa_layer_4"},{"id":"gue_vid_tab","type":"String","value":"0","layerId":"guevd_layer_900"},{"id":"pc_ppt_publish","type":"Int","value":"0","layerId":"pc_ppt_publish"},{"id":"comment","type":"Int","value":"0","chainId":"_gene_","layerId":"comment","key":644},{"id":"se_zhiplus_pre2","type":"Int","value":"0","chainId":"_gene_","layerId":"g4qp","key":1970},{"id":"se_article","type":"Int","value":"0","chainId":"_gene_","layerId":"yqbS","key":2200},{"id":"gue_playh_an","type":"String","value":"1","layerId":"guevd_layer_622"},{"id":"svip_buy_card","type":"Int","value":"0","layerId":"s7Kr"},{"id":"plus_panel","type":"Int","value":"0","chainId":"_gene_","layerId":"2CDt","key":818},{"id":"qa_recmd_zvideo","type":"Int","value":"0","chainId":"_gene_","layerId":"fzT4","key":1190},{"id":"pf_adjust","type":"String","value":"0","chainId":"_all_","layerId":"pfus_layer_9"},{"id":"private_vanswer","type":"Int","value":"0","chainId":"_gene_","layerId":"private_vanswer","key":951},{"id":"gue_iosplay","type":"String","value":"0","layerId":"guevd_layer_810"},{"id":"web_sem_ab","type":"String","value":"1","layerId":"webgw_layer_3"},{"id":"test_3","type":"Int","value":"0","chainId":"_gene_","layerId":"dABe","key":637},{"id":"se_rel_mod_swh","type":"Int","value":"0","chainId":"_gene_","layerId":"TWG8","key":1915},{"id":"ge_newyanzhi","type":"String","value":"0","chainId":"_gene_","layerId":"geus_layer_1019","key":2788},{"id":"web_column_auto_invite","type":"String","value":"0","layerId":"webqa_layer_1"},{"id":"web_login","type":"String","value":"0","layerId":"webgw_layer_759"},{"id":"gue_bullet_guide","type":"String","value":"发个弹幕聊聊…","layerId":"guevd_layer_0"},{"id":"io_video_tab","type":"Int","value":"0","chainId":"_gene_","layerId":"io_video_tab","key":728},{"id":"search_infobox","type":"Int","value":"0","chainId":"_gene_","layerId":"search_infobox","key":2389},{"id":"top_test_4_liguangyi","type":"String","value":"1","chainId":"_all_","layerId":"iosus_layer_1"},{"id":"pc_fullsize","type":"Int","value":"0","layerId":"3GZy"},{"id":"qa_ques_revion1","type":"Int","value":"0","chainId":"_gene_","layerId":"qa_ques_revion1","key":2266},{"id":"gue_goods_card","type":"String","value":"0","layerId":"gueqa_layer_1"},{"id":"ans_qus_uncircl","type":"Int","value":"0","layerId":"3G4h"},{"id":"se_scholarcard","type":"Int","value":"0","chainId":"_gene_","layerId":"5AyM","key":1584},{"id":"qa_ab_test5","type":"Int","value":"0","chainId":"_gene_","layerId":"winf","key":2354},{"id":"ecc","type":"Int","value":"0","chainId":"_gene_","layerId":"jjmY","key":2436},{"id":"gue_andplayd","type":"String","value":"1","layerId":"guevd_layer_686"},{"id":"waiting_answer","type":"Int","value":"1","layerId":"waiting_answer"},{"id":"gue_zvideo_link","type":"String","value":"1","layerId":"guevd_layer_2"},{"id":"test_ab_logic","type":"Int","value":"1","chainId":"_gene_","layerId":"test_ab_logic","key":2050},{"id":"qa_ab_test4","type":"Int","value":"0","chainId":"_gene_","layerId":"MS2V","key":2353},{"id":"gue_visit_n_artcard","type":"String","value":"1","layerId":"gueqa_layer_579"},{"id":"web_heifetz_grow_ad","type":"String","value":"1","layerId":"webgw_layer_3"},{"id":"tp_contents","type":"String","value":"2","chainId":"_all_","layerId":"tptp_layer_627"},{"id":"se_mix_n1","type":"Int","value":"0","chainId":"_gene_","layerId":"JIws","key":2277},{"id":"iserial","type":"Int","value":"0","chainId":"_gene_","layerId":"iserial","key":928},{"id":"se_zhiplus_sim","type":"Int","value":"0","chainId":"_gene_","layerId":"PpKW","key":1601},{"id":"qa_ab_test9","type":"Int","value":"0","chainId":"_gene_","layerId":"TP0t","key":2358},{"id":"ge_hard_s_ma","type":"String","value":"0","chainId":"_gene_","layerId":"geli_layer_856","key":3031},{"id":"ge_search_ui","type":"String","value":"1","chainId":"_gene_","layerId":"gese_layer_838","key":2898},{"id":"i_secondary_tab","type":"Int","value":"0","chainId":"_gene_","layerId":"i_secondary_tab","key":1012},{"id":"ge_video","type":"String","value":"0","chainId":"_gene_","layerId":"geli_layer_856","key":2831},{"id":"help_center","type":"Int","value":"1","layerId":"help_center"},{"id":"pfd_newbie2","type":"Int","value":"0","chainId":"_gene_","layerId":"pfd_newbie2","key":71},{"id":"search_kaoyan","type":"Int","value":"0","chainId":"_gene_","layerId":"search_kaoyan","key":2388},{"id":"short_pin","type":"Int","value":"0","layerId":"short_pin"},{"id":"new_video_ans","type":"Int","value":"0","chainId":"_gene_","layerId":"new_video_ans","key":1419},{"id":"se_scholartab","type":"Int","value":"0","chainId":"_gene_","layerId":"se_scholartab","key":1585},{"id":"drafts_opt","type":"Int","value":"0","layerId":"l-4yXb"},{"id":"se_v_rescore_ab","type":"Int","value":"0","chainId":"_gene_","layerId":"9UJp","key":1330},{"id":"gue_bullet_second","type":"String","value":"1","layerId":"guevd_layer_1"},{"id":"valuable_label","type":"Int","value":"0","layerId":"l-bu9v"},{"id":"answercard","type":"Int","value":"0","chainId":"_gene_","layerId":"answercard","key":1947},{"id":"gue_card_test","type":"String","value":"1","layerId":"gueqa_layer_2"},{"id":"gue_q_share","type":"String","value":"0","layerId":"gueqa_layer_647"},{"id":"tp_dingyue_video","type":"String","value":"0","chainId":"_all_","layerId":"tptp_layer_4"},{"id":"explore_fl_pic","type":"Int","value":"0","layerId":"explore_fl_pic"},{"id":"video_point2","type":"Int","value":"0","layerId":"l-video_point2"},{"id":"android_serial","type":"Int","value":"0","chainId":"_gene_","layerId":"android_serial","key":929},{"id":"feed_label_opt","type":"Int","value":"0","chainId":"_gene_","layerId":"feed_label_opt","key":2445},{"id":"self_operation","type":"Int","value":"0","chainId":"_gene_","layerId":"ksLT","key":1698},{"id":"rec_3th","type":"Int","value":"11","chainId":"_gene_","layerId":"pRqt","key":697},{"id":"a_choosy","type":"Int","value":"0","chainId":"_gene_","layerId":"a_choosy","key":1165},{"id":"se_vertical_new","type":"Int","value":"0","chainId":"_gene_","layerId":"se_vertical_new","key":2343},{"id":"ge_rec_2th","type":"String","value":"11","chainId":"_gene_","layerId":"geli_layer_965","key":3023},{"id":"se_rel_val","type":"Int","value":"0","chainId":"_gene_","layerId":"se_rel_val","key":2245},{"id":"web_scl_rec","type":"String","value":"0","layerId":"webgw_layer_759"},{"id":"Followtab","type":"Int","value":"0","chainId":"_gene_","layerId":"Followtab","key":2421},{"id":"ge_sxzx","type":"String","value":"0","chainId":"_gene_","layerId":"gere_layer_990","key":3060},{"id":"editor_extend","type":"Int","value":"0","layerId":"Gpp5"},{"id":"se_mix_n2","type":"Int","value":"0","chainId":"_gene_","layerId":"se_mix_n2","key":2326},{"id":"fixed_layer","type":"Int","value":"0","layerId":"nYEh"},{"id":"ge_item","type":"String","value":"2","chainId":"_gene_","layerId":"gese_layer_945","key":2971},{"id":"share_content","type":"Int","value":"0","chainId":"_gene_","layerId":"share_content","key":1238},{"id":"Profile_F","type":"Int","value":"40","layerId":"rjQW"},{"id":"explore_b_opt","type":"Int","value":"0","chainId":"_gene_","layerId":"explore_b_opt","key":1297},{"id":"a_v_int2string","type":"Int","value":"0","chainId":"_gene_","layerId":"a_v_int2string","key":2008},{"id":"non_pinrec","type":"Int","value":"0","chainId":"_gene_","layerId":"pmdv","key":2087},{"id":"web_collection_guest","type":"String","value":"1","layerId":"webqa_layer_4"},{"id":"edu_detail_ad","type":"Int","value":"0","layerId":"edu_detail_ad"},{"id":"se_must_rerank","type":"Int","value":"0","chainId":"_gene_","layerId":"se_must_rerank","key":1362},{"id":"webpImg","type":"Int","value":"1","layerId":"JnVt"},{"id":"videoedit_v1","type":"Int","value":"0","layerId":"videoedit_v1"},{"id":"se_videobox_","type":"Int","value":"0","chainId":"_gene_","layerId":"se_videobox_","key":1408},{"id":"se_neg_score","type":"Int","value":"0","chainId":"_gene_","layerId":"se_neg_score","key":2156},{"id":"qa_ab_test10","type":"Int","value":"0","chainId":"_gene_","layerId":"r1mR","key":2359},{"id":"web_answerlist_ad","type":"String","value":"0","layerId":"webqa_layer_1"},{"id":"userlinkv2","type":"Int","value":"0","layerId":"userlinkv2"},{"id":"square","type":"Int","value":"0","layerId":"square"},{"id":"fe_test","type":"Int","value":"0","chainId":"_gene_","layerId":"fe_test","key":1075},{"id":"ge_sug_rep","type":"String","value":"1","chainId":"_gene_","layerId":"gese_layer_1034","key":3158},{"id":"gue_v_serial","type":"String","value":"1","layerId":"guevd_layer_695"},{"id":"se_pa_esmm","type":"Int","value":"0","chainId":"_gene_","layerId":"se_pa_esmm","key":1831},{"id":"qa_ques_vcardgd","type":"Int","value":"0","chainId":"_gene_","layerId":"s4zc","key":2164},{"id":"se_sc_realtime","type":"Int","value":"0","chainId":"_gene_","layerId":"se_sc_realtime","key":2401},{"id":"gue_video_replay","type":"String","value":"2","layerId":"guevd_layer_3"},{"id":"gue_cdzixun","type":"String","value":"0","layerId":"gueqa_layer_3"},{"id":"gue_sharp","type":"String","value":"1","layerId":"guevd_layer_686"},{"id":"use_bff_profit","type":"Int","value":"0","layerId":"use_bff_profit"},{"id":"hw_aa_30","type":"Int","value":"0","chainId":"_gene_","layerId":"hw_aa_30","key":361},{"id":"secondary_tab","type":"Int","value":"0","chainId":"_gene_","layerId":"secondary_tab","key":1011},{"id":"se_storycard","type":"Int","value":"0","chainId":"_gene_","layerId":"se_storycard","key":1578},{"id":"se_highlight","type":"Int","value":"0","chainId":"_gene_","layerId":"uMG3","key":2268},{"id":"message_type","type":"Int","value":"1","layerId":"message_type"},{"id":"Test_Punk","type":"Int","value":"0","layerId":"Test_Punk"},{"id":"qa_ab_test3","type":"Int","value":"0","chainId":"_gene_","layerId":"uOi9","key":2352},{"id":"se_rank","type":"Int","value":"0","chainId":"_gene_","layerId":"se_rank","key":2443},{"id":"ge_entity","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_946","key":3036},{"id":"briefpreload","type":"Int","value":"0","layerId":"briefpreload"},{"id":"pop_recom","type":"Int","value":"1","chainId":"_gene_","layerId":"pop_recom","key":2377},{"id":"se_lct_q","type":"Int","value":"0","chainId":"_gene_","layerId":"se_lct_q","key":2467},{"id":"waiting_for_you","type":"Int","value":"20","layerId":"jVyK"},{"id":"ts_cardtitle","type":"Int","value":"0","layerId":"l-ZED7"},{"id":"ans_keyword","type":"Int","value":"0","layerId":"ans_keyword"},{"id":"qa_ab_test1","type":"Int","value":"0","chainId":"_gene_","layerId":"JPMX","key":2350},{"id":"ge_dipin_pre","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_1000","key":3124},{"id":"qap_question_visitor","type":"String","value":" 0","chainId":"_all_","layerId":"qapqa_layer_2"},{"id":"explore_newbee","type":"Int","value":"0","chainId":"_gene_","layerId":"explore_newbee","key":930},{"id":"ge_guess","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_938","key":2912},{"id":"ge_prf_rec","type":"String","value":"0","chainId":"_gene_","layerId":"getop_layer_991","key":3040},{"id":"meta_ebook","type":"Int","value":"0","layerId":"meta_ebook"},{"id":"an_video_tab","type":"Int","value":"0","chainId":"_gene_","layerId":"an_video_tab","key":727},{"id":"cardloading","type":"Int","value":"0","chainId":"_gene_","layerId":"cardloading","key":1879},{"id":"RelatedSearchAB","type":"Int","value":"0","chainId":"_gene_","layerId":"DqZ2","key":2322}],"chains":[{"chainId":"_all_"}],"encodedParams":"CogCUQWUBi8JOwJQAwEL3AfWCE8HNQnMAhYGQAFqAU8DVgWoCQcMZgcBCTQJjATdB6sJNwwzBT8GQwB0AXcH7Aq0AD8A9gK0CmcIVwQBBqYG6wbjBT8JqwahCSoDGwDnBXoItQspBYwFngV2CAsEeAeRCekEiQhCCYQCsgeYCDIDpgS3A30CewfkCtgCVQnaCDAGMgmECQIIMQnlCKADQQY2CdcLUgv0Aw8LRwBUCYsFMQYyBZsHoQONCaIGuQKNBCcJzwvFCHUJ9AsWCZsL1gQRBdgHJwhSBYAFbAg3CTMEVgwnB3QIYQlpAfMDKgbcCDAJiwncC0kJowkuCTQMogNgC+AL1wJXBxIJEoQBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAGAAAAQAAAAABAAAAAAAAAAACAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAQAAAAAAAAAAAAAACwAACwAAAAACAAAAAAAAAAAAAQAAAAAAAAAAAAABAAAAAAAAAAAA"},"triggers":{}},"userAgent":{"Edge":false,"IE":false,"Wechat":false,"Weibo":false,"QQ":false,"MQQBrowser":false,"Qzone":false,"Mobile":false,"Android":false,"iOS":false,"isAppleDevice":false,"Zhihu":false,"ZhihuHybrid":false,"isBot":false,"Tablet":false,"UC":false,"Quark":false,"Sogou":false,"Qihoo":false,"Baidu":false,"BaiduApp":false,"Safari":false,"GoogleBot":false,"AndroidDaily":false,"iOSDaily":false,"WxMiniProgram":false,"BaiduMiniProgram":false,"QQMiniProgram":false,"JDMiniProgram":false,"isWebView":false,"isMiniProgram":false,"origin":"Mozilla\u002F5.0 (X11; Ubuntu; Linux x86_64; rv:98.0) Gecko\u002F20100101 Firefox\u002F98.0"},"appViewConfig":{},"ctx":{"path":"\u002Fp\u002F143867739","query":{},"href":"http:\u002F\u002Fzhuanlan.zhihu.com\u002Fp\u002F143867739","host":"zhuanlan.zhihu.com"},"trafficSource":"production","edition":{"beijing":true,"baidu":true,"sogou":false,"baiduBeijing":true,"sogouBeijing":false,"sogouInput":false,"baiduSearch":true,"googleSearch":false,"shenma":false,"miniProgram":false,"xiaomi":false},"theme":"light","appHeaderTheme":{"current":"normal","disable":true,"normal":{"bgColor":"GBK99A"},"custom":{"bgColor":"GBK99A"}},"enableShortcut":true,"referer":"https:\u002F\u002Fwww.baidu.com\u002Flink?url=ZA_iTQolj4Xw3tqXkv24nsa46QMvBZvctiPJI37ry8dNbW33eLG-YFrAtwSbl_x8&wd=&eqid=d67f8316002981cc000000026252ea68","xUDId":"ACBQDxSF1ROPTlfGMGn-klHWE2SkdUy_9Yk=","mode":"ssr","conf":{},"xTrafficFreeOrigin":"","ipInfo":{"cityName":"北京","countryName":"中国","regionName":"北京","countryCode":"CN"},"logged":false,"vars":{"passThroughHeaders":{}}},"me":{"columnContributions":[]},"label":{"recognizerLists":{}},"ecommerce":{},"comments":{"pagination":{},"collapsed":{},"reverse":{},"reviewing":{},"conversation":{},"parent":{}},"commentsV2":{"stickers":[],"commentWithPicPermission":{},"notificationsComments":{},"pagination":{},"collapsed":{},"reverse":{},"reviewing":{},"conversation":{},"conversationMore":{},"parent":{}},"pushNotifications":{"default":{"isFetching":false,"isDrained":false,"ids":[]},"follow":{"isFetching":false,"isDrained":false,"ids":[]},"vote_thank":{"isFetching":false,"isDrained":false,"ids":[]},"currentTab":"default","notificationsCount":{"default":0,"follow":0,"vote_thank":0}},"messages":{"data":{},"currentTab":"common","messageCount":0},"register":{"registerValidateSucceeded":null,"registerValidateErrors":{},"registerConfirmError":null,"sendDigitsError":null,"registerConfirmSucceeded":null},"login":{"loginUnregisteredError":false,"loginBindWechatError":false,"loginConfirmError":null,"sendDigitsError":null,"needSMSIdentify":false,"validateDigitsError":false,"loginConfirmSucceeded":null,"qrcodeLoginToken":"","qrcodeLoginScanStatus":0,"qrcodeLoginError":null,"qrcodeLoginReturnNewToken":false},"switches":{},"captcha":{"captchaNeeded":false,"captchaValidated":false,"captchaBase64String":null,"captchaValidationMessage":null,"loginCaptchaExpires":false},"sms":{"supportedCountries":[]},"chat":{"chats":{},"inbox":{"recents":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"strangers":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"friends":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"search":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"config":{"newCount":0,"strangerMessageSwitch":false,"strangerMessageUnread":false,"friendCount":0}},"global":{"isChatMqttExisted":false}},"emoticons":{"emoticonGroupList":[],"emoticonGroupDetail":{}},"creator":{"currentCreatorUrlToken":null,"homeData":{"recommendQuestions":[]},"tools":{"question":{"invitationCount":{"questionFolloweeCount":0,"questionTotalCount":0},"goodatTopics":[]},"customPromotion":{"itemLists":{}},"recommend":{"recommendTimes":{}}},"explore":{"academy":{"tabs":[],"article":{}}},"rights":[],"newRights":[],"rightsStatus":{},"levelUpperLimit":10,"account":{"growthLevel":{}},"mcn":{},"applyStatus":{},"videoSupport":{},"textBenefit":{},"mcnManage":{},"tasks":{},"newTasks":[],"newTaskDes":[],"scoreInfo":{},"recentlyCreated":[],"analysis":{"all":{},"answer":{},"zvideo":{},"article":{},"pin":{},"singleContent":{}},"announcement":{},"bannerList":[],"school":{"tabs":[],"contents":[],"banner":null,"entities":{}},"creatorsRecommendInfo":{},"menusShowControlByServer":{"bVipRecomend":false,"creationRelationship":false},"income":{"aggregation":{}}},"answers":{"voters":{},"copyrightApplicants":{},"favlists":{},"newAnswer":{},"entityWords":{},"concernedUpvoters":{},"simpleConcernedUpvoters":{},"paidContent":{},"settings":{}},"recommendation":{"homeRecommendations":[]},"shareTexts":{},"articles":{"voters":{},"concernedUpvoters":{}},"previewPost":{},"favlists":{"relations":{}},"columns":{"voters":{}},"reward":{"answer":{},"article":{},"question":{}},"video":{"data":{},"shareVideoDetail":{},"last":{}},"topstory":{"recommend":{"isFetching":false,"isDrained":false,"afterId":0,"items":[],"next":null},"follow":{"isFetching":false,"isDrained":false,"afterId":0,"items":[],"next":null},"room":{"meta":{},"isFetching":false,"afterId":0,"items":[],"next":null},"followWonderful":{"isFetching":false,"isDrained":false,"afterId":0,"items":[],"next":null},"sidebar":null,"announcement":{},"hotList":[],"guestFeeds":{"isFetching":false,"isDrained":false,"afterId":0,"items":[],"next":null},"followExtra":{"isNewUser":null,"isFetched":false,"followCount":0,"followers":[]},"hotDaily":{"data":[],"paging":{}},"hotHighlight":{"isFetching":false,"isDrained":false,"data":[],"paging":{}},"banner":{},"commercialBanner":{"show":false,"banner":{},"trackData":{}},"video":{"items":[],"next":null,"isLoading":false,"isDrained":false}},"readStatus":{},"column":{},"requestColumn":{"categories":[],"error":null},"articleContribution":{"contributeRequests":[],"deleteContributeIdList":[],"handledContributeIdList":[],"recommendedColumns":[],"pinnedColumns":[],"sentContributeRequestsIdList":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"server-development","c_1252160759133978624"]},"columnContribution":{"contributeRequests":[],"autoInviteEnabled":false,"recommendedContributors":[],"contributionInvitation":null},"draftHistory":{"history":{},"drafts":{}},"upload":{},"articleDraft":{"titleImage":"","titleImageSize":{},"isTitleImageFullScreen":false,"canTitleImageFullScreen":false,"title":"","titleImageUploading":false,"error":"","content":"","draftLoading":false,"updating":false,"globalLoading":false,"pendingVideo":{"resource":null,"error":null},"deleteFail":{"fail":false},"recommendTopics":[],"selectedColumn":0,"articleDisclaimers":[]},"articleDrafts":{"isDrained":false,"isLoading":false,"items":[]},"columnAutocomplete":{"users":[],"friends":[]},"columnCollection":{},"userProfit":{"permission":{"permissionStatus":{"zhiZixuan":0,"recommend":-1,"task":0,"plugin":0,"infinity":0},"visible":false}},"mcn":{"bindInfo":{},"memberCategoryList":[],"producerList":[],"categoryList":[],"lists":{},"banners":{},"protocolStatus":{"isAgreedNew":true,"isAgreedOld":true},"probationCountdownDays":0},"zvideos":{"campaignVideoList":{},"campaigns":{},"tagoreCategory":[],"recommendations":{},"insertable":{},"recruit":{"form":{"platform":"","nickname":"","followerCount":"","domain":"","contact":""},"submited":false,"ranking":[]},"club":{},"qyActivityData":{},"talkActivityData":{},"party2022ActivityData":{},"batchVideos":{},"contribution":{"selectedContribution":null,"campaign":null,"configs":{},"contributionLists":{},"recommendQuestions":{"isLoading":true,"paging":{"isEnd":false,"isStart":true,"totals":0},"data":[]},"questionSearchResults":{"isLoading":true,"paging":{"isEnd":false,"isStart":true,"totals":0},"data":[]}},"creationReferences":{},"zvideoCollection":{},"zvideoGrant":{},"collectData":{"isFetching":false,"list":[]},"videoSource":{"isLoaded":false}},"republish":{},"commentPermission":{}},"fetchHost":"www.zhihu.com","subAppName":"column"}</script><script crossorigin="" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/vendor.js"></script><script crossorigin="" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/column_005.js"></script><script crossorigin="" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/column.js"></script><script crossorigin="" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/column_010.js"></script><script crossorigin="" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/column_003.js"></script><script crossorigin="" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/column_007.js"></script><script defer="defer" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/aria.js"></script><script src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/hm.js" async=""></script><script crossorigin="" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/zap.js"></script><script src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/push.js"></script><div><div style="display: none;"><i>想来知乎工作？请发送邮件到 jobs@zhihu.com</i></div></div><div><div><div class="css-8pdeid"></div></div></div><script crossorigin="" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/emoticon.js"></script><div><div><div style="left: -1179px; top: -999px;" class="Editable-languageSuggestions"><div><div class="Popover"><label class="Editable-languageSuggestionsInput Input-wrapper"><input autocomplete="off" role="combobox" aria-expanded="false" aria-autocomplete="list" aria-activedescendant="AutoComplete17-0" id="Popover16-toggle" aria-haspopup="true" aria-owns="Popover16-content" class="Input" placeholder="选择语言"><svg width="24" height="24" viewBox="0 0 24 24" data-new-api="ArrowUpDown24" data-old-api="Select" fill="#afbdcf" class="Zi Zi--Select"><path d="M12.53 3.47a.75.75 0 00-1.06 0l-5 5a.75.75 0 001.06 1.06L12 5.06l4.47 4.47a.75.75 0 101.06-1.06l-5-5zm-5 11a.75.75 0 00-1.06 1.06l5 5a.75.75 0 001.06 0l5-5a.75.75 0 10-1.06-1.06L12 18.94l-4.47-4.47z" fill-rule="evenodd" clip-rule="evenodd"></path></svg></label></div></div></div></div></div><script crossorigin="" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/load.js"></script><script crossorigin="" src="Lex%E4%B8%8EYACC%E8%AF%A6%E8%A7%A3%20-%20%E7%9F%A5%E4%B9%8E_files/js.asc"></script></body></html>